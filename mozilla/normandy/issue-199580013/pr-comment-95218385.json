{"original_position": 83, "diff_hunk": "@@ -23,69 +19,15 @@ class Meta:\n         ]\n \n \n-class ApprovalSerializer(serializers.ModelSerializer):\n-    creator = UserSerializer(read_only=True)\n-    creator_id = serializers.PrimaryKeyRelatedField(source='creator', queryset=User.objects.all(),\n-                                                    write_only=True)\n-\n-    class Meta:\n-        model = Approval\n-        fields = [\n-            'id',\n-            'created',\n-            'creator',\n-            'creator_id',\n-        ]\n-\n-\n-class ApprovalRequestSerializer(serializers.ModelSerializer):\n-    creator = UserSerializer(read_only=True)\n-    creator_id = serializers.PrimaryKeyRelatedField(source='creator', queryset=User.objects.all(),\n-                                                    write_only=True)\n-    is_approved = serializers.BooleanField(read_only=True)\n-    recipe_id = serializers.PrimaryKeyRelatedField(source='recipe', queryset=Recipe.objects.all(),\n-                                                   write_only=True)\n-\n-    class Meta:\n-        model = ApprovalRequest\n-        fields = [\n-            'id',\n-            'created',\n-            'creator',\n-            'creator_id',\n-            'active',\n-            'approval',\n-            'is_approved',\n-            'recipe_id',\n-        ]\n-\n-\n-class ApprovalRequestCommentSerializer(serializers.ModelSerializer):\n-    creator = UserSerializer(read_only=True)\n-    creator_id = serializers.PrimaryKeyRelatedField(source='creator', queryset=User.objects.all(),\n-                                                    write_only=True)\n-    approval_request_id = serializers.PrimaryKeyRelatedField(\n-        source='approval_request', queryset=ApprovalRequest.objects.all(), write_only=True)\n-\n-    class Meta:\n-        model = ApprovalRequestComment\n-        fields = [\n-            'id',\n-            'created',\n-            'creator',\n-            'creator_id',\n-            'text',\n-            'approval_request_id',\n-        ]\n-\n-\n class RecipeSerializer(serializers.ModelSerializer):\n-    action = serializers.SlugRelatedField(slug_field='name', queryset=Action.objects.all())\n-    arguments = serializers.JSONField()\n-    current_approval_request = ApprovalRequestSerializer(read_only=True)\n-    approval = ApprovalSerializer(read_only=True)\n-    is_approved = serializers.BooleanField(read_only=True)\n     enabled = serializers.BooleanField(required=False)\n+    last_updated = serializers.DateTimeField(source='latest_revision.updated', read_only=True)\n+    revision_id = serializers.CharField(source='latest_revision.id', read_only=True)\n+    name = serializers.CharField(source='latest_revision.name')", "body_text": "Most of these fields look like there are aliased to the Recipe instance with @propertys, right? In that case, can we make the serializer read directly from the Recipe instead of having to know about latest_revision?", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/410", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/95218385", "created_at": "2017-01-09T18:42:18Z", "author_association": "MEMBER", "body": "Most of these fields look like there are aliased to the `Recipe` instance with `@property`s, right? In that case, can we make the serializer read directly from the Recipe instead of having to know about `latest_revision`?", "updated_at": "2017-01-13T22:13:08Z", "html_url": "https://github.com/mozilla/normandy/pull/410#discussion_r95218385", "pull_request_review_id": 15764714, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/95218385"}, "html": {"href": "https://github.com/mozilla/normandy/pull/410#discussion_r95218385"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/410"}}, "commit_id": "c80dbf01212e9ece69fb8c06c7def0ffc84bb898", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "normandy/recipes/api/serializers.py", "body_html": "<p>Most of these fields look like there are aliased to the <code>Recipe</code> instance with <code>@property</code>s, right? In that case, can we make the serializer read directly from the Recipe instead of having to know about <code>latest_revision</code>?</p>", "original_commit_id": "09b5dcf15d4168ab62565098469b018c80f4dfa8", "id": 95218385}