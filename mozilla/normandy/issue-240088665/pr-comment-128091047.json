{"original_position": 55, "diff_hunk": "@@ -0,0 +1,70 @@\n+import { Card, Col, Row } from 'antd';\n+import { Map } from 'immutable';\n+import PropTypes from 'prop-types';\n+import React from 'react';\n+import { connect } from 'react-redux';\n+\n+import LoadingOverlay from 'control_new/components/common/LoadingOverlay';\n+import QueryRecipe from 'control_new/components/data/QueryRecipe';\n+import QueryRecipeHistory from 'control_new/components/data/QueryRecipeHistory';\n+import Details from 'control_new/components/recipes/Details';\n+import DetailsActionBar from 'control_new/components/recipes/DetailsActionBar';\n+import HistoryTimeline from 'control_new/components/recipes/HistoryTimeline';\n+import RevisionNotice from 'control_new/components/recipes/RevisionNotice';\n+import {\n+  getLatestRevisionIdForRecipe,\n+  getRecipeHistory,\n+} from 'control_new/state/recipes/selectors';\n+import { getRevision } from 'control_new/state/revisions/selectors';\n+import { getUrlParam, getUrlParamAsInt } from 'control_new/state/router/selectors';\n+\n+\n+@connect(\n+  state => {\n+    const recipeId = getUrlParamAsInt(state, 'recipeId');\n+    const latestRevisionId = getLatestRevisionIdForRecipe(state, recipeId, '');\n+    const revisionId = getUrlParam(state, 'revisionId', latestRevisionId);\n+    const revision = getRevision(state, revisionId, new Map());\n+\n+    return {\n+      history: getRecipeHistory(state, recipeId),\n+      recipeId,\n+      revision,\n+      revisionId,\n+    };\n+  },\n+)\n+export default class DetailPage extends React.Component {\n+  static propTypes = {\n+    history: PropTypes.object.isRequired,\n+    recipeId: PropTypes.number.isRequired,\n+    revision: PropTypes.object.isRequired,\n+    revisionId: PropTypes.string.isRequired,\n+  }\n+\n+  render() {\n+    const { history, recipeId, revision, revisionId } = this.props;\n+    return (\n+      <div className=\"page-recipe-details\">\n+        <QueryRecipe pk={recipeId} />\n+        <QueryRecipeHistory pk={recipeId} />\n+        <Row gutter={24}>\n+          <Col span={16}>\n+            <DetailsActionBar />\n+            <RevisionNotice revision={revision} />\n+            <LoadingOverlay>", "body_text": "This doesn't work because it doesn't show the loading spinner after the recipe has loaded into state. Even though it is \"loading\" every time the page loads. Leads to weird unexpected flashes.", "in_reply_to_id": 128054539, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/858", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/128091047", "created_at": "2017-07-18T20:48:17Z", "author_association": "MEMBER", "body": "This doesn't work because it doesn't show the loading spinner after the recipe has loaded into state. Even though it is \"loading\" every time the page loads. Leads to weird unexpected flashes.", "updated_at": "2017-07-19T17:27:53Z", "html_url": "https://github.com/mozilla/normandy/pull/858#discussion_r128091047", "pull_request_review_id": 50738850, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/128091047"}, "html": {"href": "https://github.com/mozilla/normandy/pull/858#discussion_r128091047"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/858"}}, "commit_id": "a01fcec3e56173c666db8178da1bee6718534598", "user": {"following_url": "https://api.github.com/users/rehandalal/following{/other_user}", "events_url": "https://api.github.com/users/rehandalal/events{/privacy}", "organizations_url": "https://api.github.com/users/rehandalal/orgs", "url": "https://api.github.com/users/rehandalal", "gists_url": "https://api.github.com/users/rehandalal/gists{/gist_id}", "html_url": "https://github.com/rehandalal", "subscriptions_url": "https://api.github.com/users/rehandalal/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/987136?v=4", "repos_url": "https://api.github.com/users/rehandalal/repos", "received_events_url": "https://api.github.com/users/rehandalal/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/rehandalal/starred{/owner}{/repo}", "site_admin": false, "login": "rehandalal", "type": "User", "id": 987136, "followers_url": "https://api.github.com/users/rehandalal/followers"}, "position": 53, "path": "recipe-server/client/control_new/components/recipes/DetailPage.js", "body_html": "<p>This doesn't work because it doesn't show the loading spinner after the recipe has loaded into state. Even though it is \"loading\" every time the page loads. Leads to weird unexpected flashes.</p>", "original_commit_id": "c30aa6f9ddb808845a2de34640fee9fa4cdd5c94", "id": 128091047}