{"original_position": 89, "diff_hunk": "@@ -0,0 +1,91 @@\n+Workflow\n+========\n+The following is a list of things you'll probably need to do at some point while\n+working on the recipe client. The majority of these steps assume that you have\n+a working :ref:`mozilla-central checkout <build-moz-central>`.\n+\n+Building an XPI\n+---------------\n+The ``make-xpi.sh`` script builds an XPI file from the current recipe-client\n+files:\n+\n+.. code-block:: bash\n+\n+   cd recipe-client-addon\n+   ./bin/make-xpi.sh # Creates /recipe-client-addon/shield-recipe-client.xpi\n+\n+.. _recipe-client-sync:\n+\n+Sync changes to mozilla-central\n+-------------------------------\n+The ``update-mozilla-central.sh`` script copies the recipe-client files to a\n+checkout of mozilla-central. The files that are copied over are determined by\n+``build-includes.txt``.\n+\n+.. code-block:: bash\n+\n+   cd recipe-client-addon\n+   ./bin/update-mozilla-central.sh /path/to/mozilla-central\n+\n+.. _recipe-client-tests:\n+\n+Writing and Running Tests\n+-------------------------\n+The recipe client tests are designed to be run using mozilla-central's test\n+frameworks. There are multiple test suites:\n+\n+* xpcshell_ tests, located in ``/recipe-client-addon/test/unit``, are run in a\n+  JavaScript shell. Some modules do not work in this environment because it\n+  lacks things like access to a browser window, but the test output is more\n+  readable, and executing tests does not require focus.\n+\n+* mochitest_ tests, located in ``/recipe-client-addon/test/browser``, are run in\n+  a webpage that can import and run chrome code. Mochitest can test pretty much\n+  anything, but running the test requires you to focus the browser windows that\n+  the test framework opens, and the test output is sometimes difficult to read.\n+\n+To run the tests, you must sync your code do mozilla-central, and use the\n+``./mach test`` command:\n+\n+.. code-block:: bash\n+\n+   cd recipe-client-addon\n+   ./bin/update-mozilla-central.sh /path/to/mozilla-central\n+   cd /path/to/mozilla-central\n+   ./mach test browser/extensions/shield-recipe-client/test\n+\n+.. note::\n+\n+   ``./mach test`` can also be given a subdirectory or single file as an\n+   argument if you only want to run a single test rather than the entire test\n+   suite.\n+\n+.. _xpcshell: https://developer.mozilla.org/en-US/docs/Mozilla/QA/Writing_xpcshell-based_unit_tests\n+.. _mochitest: https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Mochitest\n+\n+.. _recipe-client-lint:\n+\n+Linting\n+-------\n+The ``./mach lint`` command is used in mozilla-central to lint code, and we use\n+it as well so that we don't get lint errors when syncing code.\n+\n+.. code-block:: bash\n+\n+   cd recipe-client-addon\n+   ./bin/update-mozilla-central.sh /path/to/mozilla-central\n+   cd /path/to/mozilla-central\n+   ./mach lint browser/extensions/shield-recipe-client\n+\n+You can also perform limited linting using eslint_ directly. To do this, you\n+must install the development dependencies from\n+``/recipe-client-addon/package.json`` in the same environment that eslint is\n+installed within to get the eslint plugins we rely on:\n+\n+.. code-block:: bash\n+\n+   cd recipe-client-addon\n+   npm install\n+   ./node_modules/.bin/eslint", "body_text": "I still have the issue of eslint hanging after running the command. Maybe I'm missing a PR that already landed on master or something.", "in_reply_to_id": 112474993, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/701", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/113001495", "created_at": "2017-04-24T17:03:10Z", "author_association": "CONTRIBUTOR", "body": "I still have the issue of eslint hanging after running the command. Maybe I'm missing a PR that already landed on master or something.", "updated_at": "2017-04-27T23:36:02Z", "html_url": "https://github.com/mozilla/normandy/pull/701#discussion_r113001495", "pull_request_review_id": 34357878, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/113001495"}, "html": {"href": "https://github.com/mozilla/normandy/pull/701#discussion_r113001495"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/701"}}, "commit_id": "e8b1dd7557f6539f4e34be180f358fc84f29fee5", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "position": null, "path": "docs/dev/recipe-client-addon/workflow.rst", "body_html": "<p>I still have the issue of eslint hanging after running the command. Maybe I'm missing a PR that already landed on master or something.</p>", "original_commit_id": "3c2bd70f919a42406e6f2294d7a9668b5d7888ee", "id": 113001495}