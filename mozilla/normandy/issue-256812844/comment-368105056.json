{"body": "I was able to reproduce an error like this by running this code in the browser console of a Normandy tab in Firefox:\r\n\r\n```js\r\nfetch('/api/v1/recipe/', {\r\n  method: 'POST',\r\n  credentials: 'same-origin',\r\n  body: JSON.stringify({extra_filter_expression: '\"\\n\"'}),\r\n  headers: {'content-type': 'application/json'},\r\n});\r\n```\r\n\r\nNote that the string sent contains the raw characters \"double quote, newline, double quote\". It seems the problem is having a newline in a Jexl string.", "body_text": "I was able to reproduce an error like this by running this code in the browser console of a Normandy tab in Firefox:\nfetch('/api/v1/recipe/', {\n  method: 'POST',\n  credentials: 'same-origin',\n  body: JSON.stringify({extra_filter_expression: '\"\\n\"'}),\n  headers: {'content-type': 'application/json'},\n});\nNote that the string sent contains the raw characters \"double quote, newline, double quote\". It seems the problem is having a newline in a Jexl string.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/368105056", "created_at": "2018-02-23T18:55:49Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/issues/1059#issuecomment-368105056", "updated_at": "2018-02-23T18:55:49Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "body_html": "<p>I was able to reproduce an error like this by running this code in the browser console of a Normandy tab in Firefox:</p>\n<div class=\"highlight highlight-source-js\"><pre><span class=\"pl-en\">fetch</span>(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>/api/v1/recipe/<span class=\"pl-pds\">'</span></span>, {\n  method<span class=\"pl-k\">:</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>POST<span class=\"pl-pds\">'</span></span>,\n  credentials<span class=\"pl-k\">:</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>same-origin<span class=\"pl-pds\">'</span></span>,\n  body<span class=\"pl-k\">:</span> <span class=\"pl-c1\">JSON</span>.<span class=\"pl-c1\">stringify</span>({extra_filter_expression<span class=\"pl-k\">:</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>\"<span class=\"pl-cce\">\\n</span>\"<span class=\"pl-pds\">'</span></span>}),\n  headers<span class=\"pl-k\">:</span> {<span class=\"pl-s\"><span class=\"pl-pds\">'</span>content-type<span class=\"pl-pds\">'</span></span><span class=\"pl-k\">:</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>application/json<span class=\"pl-pds\">'</span></span>},\n});</pre></div>\n<p>Note that the string sent contains the raw characters \"double quote, newline, double quote\". It seems the problem is having a newline in a Jexl string.</p>", "id": 368105056, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/1059"}