{"body_text": "If you POST an invalid JEXL string like\nextra_filter_expression: '\"invalid string'\nYou can crash the JEXL parser and 500 the response:\nVisitationError at /api/v2/recipe/\nSyntaxError: EOL while scanning string literal (, line 1)\nParse tree:\n<Node called \"string\" matching \"\"TODO - CONVERT TO JEXL\nBrowser: 10% of Firefox 57.0 Nightly\nAdditional: Locales: slovak, en_us, dansk, so_dj\"\">  <-- *** We were here. ***\n<RegexNode matching \"\"TODO - CONVERT TO JEXL\nBrowser: 10% of Firefox 57.0 Nightly\nAdditional: Locales: slovak, en_us, dansk, so_dj\"\">\nRequest Method: POST\nRequest URL: http://localhost:8443/api/v2/recipe/\nDjango Version: 1.10.7\nPython Executable: /usr/local/bin/python3.6\nPython Version: 3.6.0\nThis should probably be handled more gracefully.", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/P1", "color": "ffa32c", "default": false, "id": 821572173, "name": "P1"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/good-first-bug", "color": "5319e7", "default": false, "id": 827771960, "name": "good-first-bug"}], "number": 1059, "assignee": {"following_url": "https://api.github.com/users/glasserc/following{/other_user}", "events_url": "https://api.github.com/users/glasserc/events{/privacy}", "organizations_url": "https://api.github.com/users/glasserc/orgs", "url": "https://api.github.com/users/glasserc", "gists_url": "https://api.github.com/users/glasserc/gists{/gist_id}", "html_url": "https://github.com/glasserc", "subscriptions_url": "https://api.github.com/users/glasserc/subscriptions", "avatar_url": "https://avatars0.githubusercontent.com/u/17006?v=4", "repos_url": "https://api.github.com/users/glasserc/repos", "received_events_url": "https://api.github.com/users/glasserc/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/glasserc/starred{/owner}{/repo}", "site_admin": false, "login": "glasserc", "type": "User", "id": 17006, "followers_url": "https://api.github.com/users/glasserc/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2018-03-14T22:20:48Z", "body_html": "<p>If you POST an invalid JEXL string like</p>\n<p>extra_filter_expression: '\"invalid string'</p>\n<p>You can crash the JEXL parser and 500 the response:</p>\n<p>VisitationError at /api/v2/recipe/<br>\nSyntaxError: EOL while scanning string literal (, line 1)</p>\n<p>Parse tree:<br>\n&lt;Node called \"string\" matching \"\"TODO - CONVERT TO JEXL<br>\nBrowser: 10% of Firefox 57.0 Nightly<br>\nAdditional: Locales: slovak, en_us, dansk, so_dj\"\"&gt;  &lt;-- *** We were here. ***<br>\n&lt;RegexNode matching \"\"TODO - CONVERT TO JEXL<br>\nBrowser: 10% of Firefox 57.0 Nightly<br>\nAdditional: Locales: slovak, en_us, dansk, so_dj\"\"&gt;</p>\n<p>Request Method: POST<br>\nRequest URL: <a href=\"http://localhost:8443/api/v2/recipe/\" rel=\"nofollow\">http://localhost:8443/api/v2/recipe/</a><br>\nDjango Version: 1.10.7<br>\nPython Executable: /usr/local/bin/python3.6<br>\nPython Version: 3.6.0</p>\n<p>This should probably be handled more gracefully.</p>", "id": 256812844, "title": "Crashing the JEXL parser can result in a 500 code in /api/v2/recipe/", "comments": 5, "state": "closed", "body": "If you POST an invalid JEXL string like\r\n\r\nextra_filter_expression: '\"invalid string'\r\n\r\nYou can crash the JEXL parser and 500 the response:\r\n\r\nVisitationError at /api/v2/recipe/\r\nSyntaxError: EOL while scanning string literal (<unknown>, line 1)\r\n\r\nParse tree:\r\n<Node called \"string\" matching \"\"TODO - CONVERT TO JEXL\r\n        Browser: 10% of Firefox 57.0 Nightly\r\n        Additional: Locales: slovak, en_us, dansk, so_dj\"\">  <-- *** We were here. ***\r\n    <RegexNode matching \"\"TODO - CONVERT TO JEXL\r\n            Browser: 10% of Firefox 57.0 Nightly\r\n            Additional: Locales: slovak, en_us, dansk, so_dj\"\">\r\n\r\nRequest Method: POST\r\nRequest URL: http://localhost:8443/api/v2/recipe/\r\nDjango Version: 1.10.7\r\nPython Executable: /usr/local/bin/python3.6\r\nPython Version: 3.6.0\r\n\r\n\r\nThis should probably be handled more gracefully.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/1059/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/1059/labels{/name}", "author_association": "CONTRIBUTOR", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/1059/comments", "html_url": "https://github.com/mozilla/normandy/issues/1059", "updated_at": "2018-03-14T22:20:48Z", "user": {"following_url": "https://api.github.com/users/jaredkerim/following{/other_user}", "events_url": "https://api.github.com/users/jaredkerim/events{/privacy}", "organizations_url": "https://api.github.com/users/jaredkerim/orgs", "url": "https://api.github.com/users/jaredkerim", "gists_url": "https://api.github.com/users/jaredkerim/gists{/gist_id}", "html_url": "https://github.com/jaredkerim", "subscriptions_url": "https://api.github.com/users/jaredkerim/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/119884?v=4", "repos_url": "https://api.github.com/users/jaredkerim/repos", "received_events_url": "https://api.github.com/users/jaredkerim/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/jaredkerim/starred{/owner}{/repo}", "site_admin": false, "login": "jaredkerim", "type": "User", "id": 119884, "followers_url": "https://api.github.com/users/jaredkerim/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/1059", "created_at": "2017-09-11T19:18:09Z", "assignees": [{"following_url": "https://api.github.com/users/glasserc/following{/other_user}", "events_url": "https://api.github.com/users/glasserc/events{/privacy}", "organizations_url": "https://api.github.com/users/glasserc/orgs", "url": "https://api.github.com/users/glasserc", "gists_url": "https://api.github.com/users/glasserc/gists{/gist_id}", "html_url": "https://github.com/glasserc", "subscriptions_url": "https://api.github.com/users/glasserc/subscriptions", "avatar_url": "https://avatars0.githubusercontent.com/u/17006?v=4", "repos_url": "https://api.github.com/users/glasserc/repos", "received_events_url": "https://api.github.com/users/glasserc/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/glasserc/starred{/owner}{/repo}", "site_admin": false, "login": "glasserc", "type": "User", "id": 17006, "followers_url": "https://api.github.com/users/glasserc/followers"}]}