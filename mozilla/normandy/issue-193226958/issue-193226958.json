{"body_text": "We currently validate filter expressions for syntax on the client, but we should probably be doing server-side validation for this as well in case other clients write to the API.\nI wrote PyJEXL specifically for this, but we never got around to integrating it. We also wanted to add some extra validation:\n\nVariable validation. We probably can't get a proper schema for things like the telemetry packet, but we can validate filter context identifiers against what's documented, at least.\n\nSince this is all server validation, it should take the same form as our existing API validation and be displayed on the recipe form post-submission.", "labels": [], "number": 379, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-06-21T18:05:40Z", "body_html": "<p>We currently validate filter expressions for syntax on the client, but we should probably be doing server-side validation for this as well in case other clients write to the API.</p>\n<p>I wrote <a href=\"https://github.com/Osmose/pyjexl\">PyJEXL</a> specifically for this, but we never got around to integrating it. We also wanted to add some extra validation:</p>\n<ul>\n<li>Variable validation. We probably can't get a proper schema for things like the telemetry packet, but we can validate filter context identifiers against what's <a href=\"http://normandy.readthedocs.io/en/latest/user/filter_expressions.html\" rel=\"nofollow\">documented</a>, at least.</li>\n</ul>\n<p>Since this is all server validation, it should take the same form as our existing API validation and be displayed on the recipe form post-submission.</p>", "id": 193226958, "title": "Server-side filter expression validation", "comments": 2, "state": "closed", "body": "We currently validate filter expressions for syntax on the client, but we should probably be doing server-side validation for this as well in case other clients write to the API.\r\n\r\nI wrote [PyJEXL](https://github.com/Osmose/pyjexl) specifically for this, but we never got around to integrating it. We also wanted to add some extra validation:\r\n\r\n- Variable validation. We probably can't get a proper schema for things like the telemetry packet, but we can validate filter context identifiers against what's [documented](http://normandy.readthedocs.io/en/latest/user/filter_expressions.html), at least.\r\n\r\nSince this is all server validation, it should take the same form as our existing API validation and be displayed on the recipe form post-submission.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/379/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/379/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/379/comments", "html_url": "https://github.com/mozilla/normandy/issues/379", "updated_at": "2017-06-21T18:05:40Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/379", "created_at": "2016-12-02T21:53:51Z", "assignees": []}