{"original_position": 27, "diff_hunk": "@@ -0,0 +1,64 @@\n+\"use strict\";\n+// Cu is defined in xpc_head.js\n+\n+Cu.import(\"resource://gre/modules/Task.jsm\", this);\n+Cu.import(\"resource://shield-recipe-client/lib/Sampling.jsm\", this);\n+\n+add_task(function* testStableSample () {\n+  // Absolute samples\n+  equal(yield Sampling.stableSample(\"test\", 1), true, \"stableSample returns true for 100% sample\");\n+  equal(yield Sampling.stableSample(\"test\", 0), false, \"stableSample returns false for 0% sample\");\n+\n+  // Known samples. The numbers are nonces to make the tests pass\n+  equal(yield Sampling.stableSample(\"test-0\", 0.5), true, \"stableSample returns true for known matching sample\");\n+  equal(yield Sampling.stableSample(\"test-1\", 0.5), false, \"stableSample returns false for known non-matching sample\");\n+});\n+\n+add_task(function* testBucketSample () {\n+  // Absolute samples\n+  equal(yield Sampling.bucketSample(\"test\", 0, 10, 10), true, \"bucketSample returns true for 100% sample\");\n+  equal(yield Sampling.bucketSample(\"test\", 0, 0, 10), false, \"bucketSample returns false for 0% sample\");\n+\n+  // Known samples. The numbers are nonces to make the tests pass\n+  equal(yield Sampling.bucketSample(\"test-0\", 0, 5, 10), true, \"bucketSample returns true for known matching sample\");\n+  equal(yield Sampling.bucketSample(\"test-1\", 0, 5, 10), false, \"bucketSample returns false for known non-matching sample\");\n+});\n+\n+add_test(function testFractionToKey() {", "body_text": "Hm, can we use add_task for all the tests instead of the mixture of add_task and add_test?", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/425", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/96886078", "created_at": "2017-01-19T15:38:25Z", "author_association": "CONTRIBUTOR", "body": "Hm, can we use add_task for all the tests instead of the mixture of add_task and add_test?", "updated_at": "2017-01-19T22:59:14Z", "html_url": "https://github.com/mozilla/normandy/pull/425#discussion_r96886078", "pull_request_review_id": 17482766, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/96886078"}, "html": {"href": "https://github.com/mozilla/normandy/pull/425#discussion_r96886078"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/425"}}, "commit_id": "ff4e97b6526c8411c5acc8a9e86ade6ce40ae721", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": null, "path": "recipe-client-addon/test/test_Sampling.js", "body_html": "<p>Hm, can we use add_task for all the tests instead of the mixture of add_task and add_test?</p>", "original_commit_id": "1786a435ffaf0e919d8c5f928371a3c53e5e2fb2", "id": 96886078}