{"original_position": 40, "diff_hunk": "@@ -0,0 +1,190 @@\n+import configureMockStore from 'redux-mock-store';\n+import thunk from 'redux-thunk';\n+import fetchMock from 'fetch-mock';\n+\n+import { initialState } from 'control/tests/fixtures';\n+import { API_REQUEST_SETTINGS } from 'control/actions/ControlActions';\n+import * as filterActions from 'control/actions/FilterActions';\n+import { getFilterParamString } from 'control/selectors/FiltersSelector';\n+\n+const middlewares = [thunk];\n+const mockStore = configureMockStore(middlewares);\n+const store = mockStore({ ...initialState });\n+\n+describe('Filter Actions', () => {\n+  afterEach(() => {\n+    expect(fetchMock.calls().unmatched).toEqual([]);\n+    store.clearActions();\n+    fetchMock.restore();\n+  });\n+\n+  /**\n+   * loadFilters\n+   * - creates an LOAD_FILTERS action\n+   * - should request filters from server\n+   */\n+  describe('loadFilters', () => {\n+    const {\n+      loadFilters,\n+      LOAD_FILTERS,\n+    } = filterActions;\n+\n+    it('creates an LOAD_FILTERS action', () => {\n+      const expectedAction = {\n+        type: LOAD_FILTERS,\n+        filters: [],\n+      };\n+\n+      store.dispatch(loadFilters())\n+      .then(() => {\n+        expect(store.getActions()).toContain({ ...expectedAction });", "body_text": "We should prefer async/await for simple cases like this.\nAlso, why clone the expectedAction? Would expect(store.getActions()).toContain(expectedAction) be different?", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/405", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/94862834", "created_at": "2017-01-05T22:11:44Z", "author_association": "MEMBER", "body": "We should prefer async/await for simple cases like this.\r\n\r\nAlso, why clone the `expectedAction`? Would `expect(store.getActions()).toContain(expectedAction)` be different?", "updated_at": "2017-02-06T18:21:31Z", "html_url": "https://github.com/mozilla/normandy/pull/405#discussion_r94862834", "pull_request_review_id": 15403449, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/94862834"}, "html": {"href": "https://github.com/mozilla/normandy/pull/405#discussion_r94862834"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/405"}}, "commit_id": "3817ad087be7dc4e56a202977ff6d14e66b9d676", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "client/control/tests/actions/test_filterActions.js", "body_html": "<p>We should prefer async/await for simple cases like this.</p>\n<p>Also, why clone the <code>expectedAction</code>? Would <code>expect(store.getActions()).toContain(expectedAction)</code> be different?</p>", "original_commit_id": "532fdf2ced0ce059bd30fa25be624037e8a805b3", "id": 94862834}