{"original_position": 5, "diff_hunk": "@@ -97,7 +97,7 @@ async function markAsEnded(db, study) {\n   study.active = false;\n   study.studyEndDate = new Date();\n   await getStore(db).put(study);\n-  Services.obs.notifyObservers(study, STUDY_ENDED_TOPIC);\n+  Services.obs.notifyObservers(study, STUDY_ENDED_TOPIC, `${study.recipeId}`);", "body_text": "Yeah, the subject is an nsISupports object. You could add a wrappedJSObject property that points to itself (study.wrappedJSObject = study) and that might work to extract it on the other side, but it's possible you'd need to also define a QueryInterface implementation - not sure off-hand.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1002", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/134989700", "created_at": "2017-08-24T11:22:13Z", "author_association": "CONTRIBUTOR", "body": "Yeah, the subject is an nsISupports object. You could add a `wrappedJSObject` property that points to itself (`study.wrappedJSObject = study`) and that might work to extract it on the other side, but it's possible you'd need to also define a `QueryInterface` implementation - not sure off-hand.", "updated_at": "2017-08-25T17:18:53Z", "html_url": "https://github.com/mozilla/normandy/pull/1002#discussion_r134989700", "pull_request_review_id": 58347470, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/134989700"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1002#discussion_r134989700"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1002"}}, "commit_id": "0bf3bac097c3f2b0929a2bbb185258e6f2018e48", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": 5, "path": "recipe-client-addon/lib/AddonStudies.jsm", "body_html": "<p>Yeah, the subject is an nsISupports object. You could add a <code>wrappedJSObject</code> property that points to itself (<code>study.wrappedJSObject = study</code>) and that might work to extract it on the other side, but it's possible you'd need to also define a <code>QueryInterface</code> implementation - not sure off-hand.</p>", "original_commit_id": "27f2204019309b4ceed592351731c7d11d88105d", "id": 134989700}