{"body_text": "Previously, we tried to parse the lastShown date when checking if the\nuser has ever seen a heartbeat prompt. If the parsing failed, we\ntreated the resulting value (NaN) as false, which triggered\nreprompting the user.\nWith this change, we treat any stored value for lastShown as meaning\nthat the user saw the prompt at least once. This avoids reprompting\nusers with buggy storage, as well as issues with our own code writing\nincorrect values to localStorage.", "labels": [], "number": 699, "assignee": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-04-18T23:51:03Z", "body_html": "<p>Previously, we tried to parse the lastShown date when checking if the<br>\nuser has ever seen a heartbeat prompt. If the parsing failed, we<br>\ntreated the resulting value (NaN) as false, which triggered<br>\nreprompting the user.</p>\n<p>With this change, we treat <em>any</em> stored value for lastShown as meaning<br>\nthat the user saw the prompt at least once. This avoids reprompting<br>\nusers with buggy storage, as well as issues with our own code writing<br>\nincorrect values to localStorage.</p>", "id": 222559367, "title": "#698: Treat malformed lastShown dates as valid in show-heartbeat.", "pull_request": {"url": "https://api.github.com/repos/mozilla/normandy/pulls/699", "diff_url": "https://github.com/mozilla/normandy/pull/699.diff", "html_url": "https://github.com/mozilla/normandy/pull/699", "patch_url": "https://github.com/mozilla/normandy/pull/699.patch"}, "comments": 2, "state": "closed", "body": "Previously, we tried to parse the lastShown date when checking if the\r\nuser has ever seen a heartbeat prompt. If the parsing failed, we\r\ntreated the resulting value (NaN) as false, which triggered\r\nreprompting the user.\r\n\r\nWith this change, we treat _any_ stored value for lastShown as meaning\r\nthat the user saw the prompt at least once. This avoids reprompting\r\nusers with buggy storage, as well as issues with our own code writing\r\nincorrect values to localStorage.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/699/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/699/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/699/comments", "html_url": "https://github.com/mozilla/normandy/pull/699", "updated_at": "2017-04-18T23:51:05Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/699", "created_at": "2017-04-18T22:04:42Z", "assignees": [{"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}]}