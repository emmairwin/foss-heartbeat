{"body_text": "If LocaleService::GetAppLocale is unavailable (outside of Nightly\ncurrently), then we fallback to ChromeRegistry::GetSelectedLocale,\nwhich we used previously.\nThis fixes the SHIELD standalone XPI so that it can be used on Aurora, Beta, and Release, which don't have the new API for getting locales yet. Without this fix I get errors running recipes from the missing API on DevEdition.\n@Pike You reviewed bug 1347314, would you be willing to review this? We sync the code in this Github repo to mozilla-central every so often, so we need a Firefox peer on our reviews.\nOnce the new API is available on every channel, we'll remove this fallback.\nI wasn't sure whether we wanted a test for these fallbacks, nor whether mocking with services from the chrome registry was possible, so I omitted them. Feel free to scold me and I'll look into this more. :D", "labels": [], "number": 679, "assignee": {"following_url": "https://api.github.com/users/Pike/following{/other_user}", "events_url": "https://api.github.com/users/Pike/events{/privacy}", "organizations_url": "https://api.github.com/users/Pike/orgs", "url": "https://api.github.com/users/Pike", "gists_url": "https://api.github.com/users/Pike/gists{/gist_id}", "html_url": "https://github.com/Pike", "subscriptions_url": "https://api.github.com/users/Pike/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/43494?v=4", "repos_url": "https://api.github.com/users/Pike/repos", "received_events_url": "https://api.github.com/users/Pike/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Pike/starred{/owner}{/repo}", "site_admin": false, "login": "Pike", "type": "User", "id": 43494, "followers_url": "https://api.github.com/users/Pike/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-04-13T21:02:21Z", "body_html": "<p>If LocaleService::GetAppLocale is unavailable (outside of Nightly<br>\ncurrently), then we fallback to ChromeRegistry::GetSelectedLocale,<br>\nwhich we used previously.</p>\n<p>This fixes the SHIELD standalone XPI so that it can be used on Aurora, Beta, and Release, which don't have the new API for getting locales yet. Without this fix I get errors running recipes from the missing API on DevEdition.</p>\n<p><a class=\"user-mention\" href=\"https://github.com/pike\">@Pike</a> You reviewed <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1347314\" rel=\"nofollow\">bug 1347314</a>, would you be willing to review this? We sync the code in this Github repo to mozilla-central every so often, so we need a Firefox peer on our reviews.</p>\n<p>Once the new API is available on every channel, we'll remove this fallback.</p>\n<p>I wasn't sure whether we wanted a test for these fallbacks, nor whether mocking with services from the chrome registry was possible, so I omitted them. Feel free to scold me and I'll look into this more. :D</p>", "id": 221074722, "title": "Fallback for LocaleService::GetAppLocale.", "pull_request": {"url": "https://api.github.com/repos/mozilla/normandy/pulls/679", "diff_url": "https://github.com/mozilla/normandy/pull/679.diff", "html_url": "https://github.com/mozilla/normandy/pull/679", "patch_url": "https://github.com/mozilla/normandy/pull/679.patch"}, "comments": 1, "state": "closed", "body": "If LocaleService::GetAppLocale is unavailable (outside of Nightly\r\ncurrently), then we fallback to ChromeRegistry::GetSelectedLocale,\r\nwhich we used previously.\r\n\r\nThis fixes the SHIELD standalone XPI so that it can be used on Aurora, Beta, and Release, which don't have the new API for getting locales yet. Without this fix I get errors running recipes from the missing API on DevEdition.\r\n\r\n@Pike You reviewed [bug 1347314](https://bugzilla.mozilla.org/show_bug.cgi?id=1347314), would you be willing to review this? We sync the code in this Github repo to mozilla-central every so often, so we need a Firefox peer on our reviews.\r\n\r\nOnce the new API is available on every channel, we'll remove this fallback.\r\n\r\nI wasn't sure whether we wanted a test for these fallbacks, nor whether mocking with services from the chrome registry was possible, so I omitted them. Feel free to scold me and I'll look into this more. :D", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/679/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/679/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/679/comments", "html_url": "https://github.com/mozilla/normandy/pull/679", "updated_at": "2017-04-13T21:02:24Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/679", "created_at": "2017-04-11T20:42:37Z", "assignees": [{"following_url": "https://api.github.com/users/Pike/following{/other_user}", "events_url": "https://api.github.com/users/Pike/events{/privacy}", "organizations_url": "https://api.github.com/users/Pike/orgs", "url": "https://api.github.com/users/Pike", "gists_url": "https://api.github.com/users/Pike/gists{/gist_id}", "html_url": "https://github.com/Pike", "subscriptions_url": "https://api.github.com/users/Pike/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/43494?v=4", "repos_url": "https://api.github.com/users/Pike/repos", "received_events_url": "https://api.github.com/users/Pike/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Pike/starred{/owner}{/repo}", "site_admin": false, "login": "Pike", "type": "User", "id": 43494, "followers_url": "https://api.github.com/users/Pike/followers"}]}