{"original_position": 177, "diff_hunk": "@@ -611,19 +647,36 @@ decorate_task(\n     Assert.deepEqual(\n       setActiveStub.getCall(0).args,\n       [\"test\", \"branch\", {type: \"normandy-exp\"}],\n-      \"Experiment is registerd by start()\",\n+      \"Experiment is registered by start()\",\n     );\n-    await PreferenceExperiments.stop(\"test\");\n+    await PreferenceExperiments.stop(\"test\", {reason: \"test\"});\n     ok(setInactiveStub.calledWith(\"test\", \"branch\"), \"Experiment is unregistered by stop()\");\n+\n+    Assert.deepEqual(\n+      sendEventStub.getCall(0).args,\n+      [\"enroll\", \"preference-study\", \"test\", {\n+        experimentType: \"exp\",\n+        branch: \"branch\",\n+      }],\n+      \"start should send the correct telemetry event\"", "body_text": "I like to have unique failure messages so I can quickly find out where things failed, but it's up to you.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1154", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/160472156", "created_at": "2018-01-09T17:26:38Z", "author_association": "CONTRIBUTOR", "body": "I like to have unique failure messages so I can quickly find out where things failed, but it's up to you.", "updated_at": "2018-01-10T19:21:20Z", "html_url": "https://github.com/mozilla/normandy/pull/1154#discussion_r160472156", "pull_request_review_id": 87591727, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/160472156"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1154#discussion_r160472156"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1154"}}, "commit_id": "c99552dad03bd2b3d51ba74809410c02dcc93dad", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": null, "path": "recipe-client-addon/test/browser/browser_PreferenceExperiments.js", "body_html": "<p>I like to have unique failure messages so I can quickly find out where things failed, but it's up to you.</p>", "original_commit_id": "32b3682772ca6e8f579e975d185cfdef91f45388", "id": 160472156}