{"body": "I think that the code can help clarify this. In the Django model for a recipe revision, [`extra_filter_expression` is a simple `CharField`](https://github.com/mozilla/normandy/blob/a9260bf30b235e3e6721d5b278e76993683d6096/recipe-server/normandy/recipes/models.py#L321) that is editable in the API.\r\n\r\nOn the other hand, [`filter_expression` is a generated field](https://github.com/mozilla/normandy/blob/a9260bf30b235e3e6721d5b278e76993683d6096/recipe-server/normandy/recipes/models.py#L343-L364), and is not editable in the API. Looking at the code, you can see the \"unused remnants\" of previous simple filters. The fields like `country` and `locales` are rendered into JEXL and combined with `extra_filter_expression` to result in the final value for `filter_expression`.\r\n\r\nAdditionally, you can see in the [signed recipe api](https://normandy.cdn.mozilla.net/api/v1/recipe/signed/) (which only exposes fields needed to verify and execute the recipe), that `extra_filter_expression` and friends aren't exposed, leaving only the combined `filter_expression` field.", "body_text": "I think that the code can help clarify this. In the Django model for a recipe revision, extra_filter_expression is a simple CharField that is editable in the API.\nOn the other hand, filter_expression is a generated field, and is not editable in the API. Looking at the code, you can see the \"unused remnants\" of previous simple filters. The fields like country and locales are rendered into JEXL and combined with extra_filter_expression to result in the final value for filter_expression.\nAdditionally, you can see in the signed recipe api (which only exposes fields needed to verify and execute the recipe), that extra_filter_expression and friends aren't exposed, leaving only the combined filter_expression field.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/365709878", "created_at": "2018-02-14T19:00:31Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/issues/1184#issuecomment-365709878", "updated_at": "2018-02-14T19:00:31Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "body_html": "<p>I think that the code can help clarify this. In the Django model for a recipe revision, <a href=\"https://github.com/mozilla/normandy/blob/a9260bf30b235e3e6721d5b278e76993683d6096/recipe-server/normandy/recipes/models.py#L321\"><code>extra_filter_expression</code> is a simple <code>CharField</code></a> that is editable in the API.</p>\n<p>On the other hand, <a href=\"https://github.com/mozilla/normandy/blob/a9260bf30b235e3e6721d5b278e76993683d6096/recipe-server/normandy/recipes/models.py#L343-L364\"><code>filter_expression</code> is a generated field</a>, and is not editable in the API. Looking at the code, you can see the \"unused remnants\" of previous simple filters. The fields like <code>country</code> and <code>locales</code> are rendered into JEXL and combined with <code>extra_filter_expression</code> to result in the final value for <code>filter_expression</code>.</p>\n<p>Additionally, you can see in the <a href=\"https://normandy.cdn.mozilla.net/api/v1/recipe/signed/\" rel=\"nofollow\">signed recipe api</a> (which only exposes fields needed to verify and execute the recipe), that <code>extra_filter_expression</code> and friends aren't exposed, leaving only the combined <code>filter_expression</code> field.</p>", "id": 365709878, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/1184"}