{"original_position": 98, "diff_hunk": "@@ -79,7 +129,22 @@ let Normandy = {\n                 options.learnMoreMessage,\n                 options.learnMoreUrl\n             );\n+\n+            resolve(emitter);", "body_text": "Returning an event emitter doesn't really help; we still have to call showHeartbeat before returning, so it might emit an event early before we return.\nIf this issue occurs, all that happens is that the timestamp for when the dialog was shown to the user is incorrect. Given that this is unlikely (In all my testing I've never once run into the issue of showHeartbeat emitting an event before the emitter listeners get registered), I think it's acceptable to just not handle this case. It'll be pretty clear from our data whenever this actually becomes an issue.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/96", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/58434408", "created_at": "2016-04-04T19:35:31Z", "author_association": "MEMBER", "body": "Returning an event emitter doesn't really help; we still have to call `showHeartbeat` before returning, so it might emit an event early before we return.\n\nIf this issue occurs, all that happens is that the timestamp for when the dialog was shown to the user is incorrect. Given that this is unlikely (In all my testing I've never once run into the issue of showHeartbeat emitting an event before the emitter listeners get registered), I think it's acceptable to just not handle this case. It'll be pretty clear from our data whenever this actually becomes an issue.\n", "updated_at": "2016-04-04T20:56:48Z", "html_url": "https://github.com/mozilla/normandy/pull/96#discussion_r58434408", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/58434408"}, "html": {"href": "https://github.com/mozilla/normandy/pull/96#discussion_r58434408"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/96"}}, "commit_id": "fbbf9981e77cb9d06947a06eac5389628362071f", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": 98, "path": "normandy/selfrepair/static/js/normandy_driver.js", "body_html": "<p>Returning an event emitter doesn't really help; we still have to call <code>showHeartbeat</code> before returning, so it might emit an event early before we return.</p>\n<p>If this issue occurs, all that happens is that the timestamp for when the dialog was shown to the user is incorrect. Given that this is unlikely (In all my testing I've never once run into the issue of showHeartbeat emitting an event before the emitter listeners get registered), I think it's acceptable to just not handle this case. It'll be pretty clear from our data whenever this actually becomes an issue.</p>", "original_commit_id": "99b084c7c39708960813a97483bd08e66f533080", "id": 58434408}