{"original_position": 93, "diff_hunk": "@@ -0,0 +1,179 @@\n+import React, { PropTypes as pt } from 'react';\n+import { FieldArray, propTypes as reduxFormPropTypes } from 'redux-form';\n+import { connect } from 'react-redux';\n+\n+import {\n+  BooleanRadioControlField,\n+  ControlField,\n+  ErrorMessageField,\n+  IntegerControlField,\n+} from 'control/components/Fields';\n+import { selector } from 'control/components/RecipeForm';\n+import ActionFields from 'control/components/action_fields/ActionFields';\n+\n+const VALUE_FIELDS = {\n+  string: StringPreferenceField,\n+  integer: IntegerPreferenceField,\n+  boolean: BooleanPreferenceField,\n+};\n+const DEFAULT_BRANCH_VALUES = {\n+  slug: '',\n+  ratio: 1,\n+};\n+\n+/**\n+ * Form fields for the preference-experiment action.\n+ */\n+export default class PreferenceExperimentFields extends ActionFields {\n+  static initialValues = {\n+    slug: '',\n+    experimentDocumentUrl: '',\n+    preferenceName: '',\n+    preferenceType: 'boolean',\n+    bucketCount: 10,\n+  }\n+\n+  render() {\n+    return (\n+      <div className=\"arguments-fields\">\n+        <p className=\"info\">Run a feature experiment activated by a preference.</p>\n+        <ControlField\n+          label=\"Slug\"\n+          name=\"arguments.slug\"\n+          component=\"input\"\n+          type=\"text\"\n+        />\n+        <ControlField\n+          label=\"Experiment Document URL\"\n+          name=\"arguments.experimentDocumentUrl\"\n+          component=\"input\"\n+          type=\"url\"\n+        />\n+        <ControlField\n+          label=\"Preference Name\"\n+          name=\"arguments.preferenceName\"\n+          component=\"input\"\n+          type=\"text\"\n+        />\n+        <ControlField\n+          label=\"Preference Type\"\n+          name=\"arguments.preferenceType\"\n+          component=\"select\"\n+        >\n+          <option value=\"boolean\">Boolean</option>\n+          <option value=\"integer\">Integer</option>\n+          <option value=\"string\">String</option>\n+        </ControlField>\n+        <IntegerControlField\n+          label=\"Sample of Total Population (out of 100,000 buckets)\"\n+          name=\"arguments.bucketCount\"\n+        />\n+        <FieldArray name=\"arguments.branches\" component={renderBranches} />\n+      </div>\n+    );\n+  }\n+}\n+\n+export function renderBranches({ fields }) {\n+  return (\n+    <div>\n+      <h4 className=\"branch-header\">Experiment Branches</h4>\n+      <ul className=\"branch-list\">\n+        {fields.map((branch, index) => (\n+          <li key={index} className=\"branch\">\n+            <ConnectedBranchFields\n+              branch={branch}\n+              onClickDelete={() => fields.remove(index)}\n+            />\n+          </li>\n+        ))}\n+        <li>\n+          <a\n+            className=\"button\"\n+            onClick={() => fields.push(Object.assign({}, DEFAULT_BRANCH_VALUES))}", "body_text": "Use spread operator ({ ...DEFAULT_BRANCH_VALUES })", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/603", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/107286651", "created_at": "2017-03-21T21:59:08Z", "author_association": "CONTRIBUTOR", "body": "Use spread operator (`{ ...DEFAULT_BRANCH_VALUES }`)", "updated_at": "2017-03-22T00:19:23Z", "html_url": "https://github.com/mozilla/normandy/pull/603#discussion_r107286651", "pull_request_review_id": 28249529, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/107286651"}, "html": {"href": "https://github.com/mozilla/normandy/pull/603#discussion_r107286651"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/603"}}, "commit_id": "e41088823c8cb9671de9ae79f0eb7b41d1b5801f", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "position": null, "path": "recipe-server/client/control/components/action_fields/PreferenceExperimentFields.js", "body_html": "<p>Use spread operator (<code>{ ...DEFAULT_BRANCH_VALUES }</code>)</p>", "original_commit_id": "aad7fa9dbe90a2f86398f17dacd694afcdb670b7", "id": 107286651}