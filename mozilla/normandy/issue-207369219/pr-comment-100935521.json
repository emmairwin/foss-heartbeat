{"original_position": 23, "diff_hunk": "@@ -0,0 +1,31 @@\n+from django import template\n+from django.utils.safestring import mark_safe\n+\n+from webpack_loader.templatetags.webpack_loader import get_files\n+\n+from normandy.base.utils import sri_hash\n+\n+\n+register = template.Library()\n+\n+\n+@register.simple_tag\n+def render_bundle(bundle_name, extension=None, config='DEFAULT', attrs=''):\n+    \"\"\"\n+    Modified version of webpack_loader's render_bundle that adds hashes\n+    to tags for subresource integrity.\n+    \"\"\"\n+    tags = []\n+    chunks = get_files(bundle_name, extension=extension, config=config)\n+    for chunk in chunks:\n+        with open(chunk['path'], 'rb') as f:\n+            chunk_hash = sri_hash(f.read())\n+        if chunk['name'].endswith(('.js', '.js.gz')):", "body_text": "Yeah, it's leftover from webpack_loader. We should drop it.", "in_reply_to_id": 100928367, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/511", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/100935521", "created_at": "2017-02-14T00:37:45Z", "author_association": "MEMBER", "body": "Yeah, it's leftover from `webpack_loader`. We should drop it.", "updated_at": "2017-03-01T04:25:09Z", "html_url": "https://github.com/mozilla/normandy/pull/511#discussion_r100935521", "pull_request_review_id": 21652248, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/100935521"}, "html": {"href": "https://github.com/mozilla/normandy/pull/511#discussion_r100935521"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/511"}}, "commit_id": "c5c692270b79fec4d334f8154b237826011b9307", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "recipe-server/normandy/base/templatetags/normandy_webpack_loader.py", "body_html": "<p>Yeah, it's leftover from <code>webpack_loader</code>. We should drop it.</p>", "original_commit_id": "af6cb1eb663c174f8cfac0fcf6761f1d8014d21b", "id": 100935521}