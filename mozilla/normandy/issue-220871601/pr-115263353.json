{"deletions": 583, "merge_commit_sha": "f2e277569fd63fdde4611805105ff5c05fa7fad8", "additions": 3747, "labels": [], "number": 676, "assignee": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "mergeable": false, "closed_at": "2017-04-12T17:15:12Z", "requested_reviewers": [], "statuses_url": "https://api.github.com/repos/mozilla/normandy/statuses/f79a4fc1c5f36c4ee0c22d90393f3329e67baa5d", "id": 115263353, "maintainer_can_modify": false, "title": "Merge master into preference-experiments branch", "body_text": "Time for another merge! This one was a little hairy.\nAs before, your best bet for reviewing this is pulling it down and running git show 4350083b963e99442df3a832e12d5808fb6be005. It'll still have some extra stuff beyond the merge fixes I made, but it's better than Github's diff.\nNote that I didn't just make merge changes, but some fixes to stuff in master in order to make my local testing work. I suspect it's easiest to just land these in master when we merge this branch back in, but I'm happy to go through and port them to master sooner if that's preferred.\nInteresting changes from the merge:\n\nI reverted the storage checks merge because I was having issues getting the test to pass (I think it had to do with how the test was creating the driver, but I don't quite remember), noticed that the PR was missing a peer review, and decided to punt on figuring it out myself. This is actually in a commit separate from the merge, in case you want to review it. The revert didn't conflict so I figured it's good.\nThe getAppLocaleAsLangTag change breaks the XPI outside of Nightly, as the API doesn't exist. So I added feature detection for it.\ninstall.rdf.in has a comment of some kind at the top which breaks the RDF parser and causes the add-on to be corrupt. I removed it.\n_common.scss has some CSS styles for <a> tags with the :disabled selector, which is invalid (I think). I needed it for the preference experiment fields, so I changed it to a class selector (.disabled).\nI added the logic for disabling form controls to PreferenceExperimentFields.js.\ntest_models.py needed a small rename of recipe.update() to recipe.revise().\n\nAs far as I can tell, all three recipe types work with the system add-on, the control interface functions as expected, and the tests and lints all pass.", "comments": 5, "merged_at": "2017-04-12T17:15:12Z", "state": "closed", "_links": {"review_comment": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/676/commits"}, "self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/676"}, "review_comments": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/676/comments"}, "html": {"href": "https://github.com/mozilla/normandy/pull/676"}, "comments": {"href": "https://api.github.com/repos/mozilla/normandy/issues/676/comments"}, "issue": {"href": "https://api.github.com/repos/mozilla/normandy/issues/676"}, "statuses": {"href": "https://api.github.com/repos/mozilla/normandy/statuses/f79a4fc1c5f36c4ee0c22d90393f3329e67baa5d"}}, "changed_files": 91, "diff_url": "https://github.com/mozilla/normandy/pull/676.diff", "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/676", "body": "Time for another merge! This one was a little hairy.\r\n\r\nAs before, your best bet for reviewing this is pulling it down and running `git show 4350083b963e99442df3a832e12d5808fb6be005`. It'll still have some extra stuff beyond the merge fixes I made, but it's better than Github's diff.\r\n\r\nNote that I didn't just make merge changes, but some fixes to stuff in master in order to make my local testing work. I suspect it's easiest to just land these in master when we merge this branch back in, but I'm happy to go through and port them to master sooner if that's preferred.\r\n\r\nInteresting changes from the merge:\r\n\r\n- I reverted the [storage checks](https://github.com/mozilla/normandy/pull/633) merge because I was having issues getting the test to pass (I think it had to do with how the test was creating the driver, but I don't quite remember), noticed that the PR was missing a peer review, and decided to punt on figuring it out myself. This is actually in a commit separate from the merge, in case you want to review it. The revert didn't conflict so I figured it's good.\r\n- The [getAppLocaleAsLangTag](https://github.com/mozilla/normandy/pull/662/) change breaks the XPI outside of Nightly, as the API doesn't exist. So I added feature detection for it.\r\n- `install.rdf.in` has [a comment of some kind at the top](https://github.com/mozilla/normandy/blob/master/recipe-client-addon/install.rdf.in#L3) which breaks the RDF parser and causes the add-on to be corrupt. I removed it.\r\n- `_common.scss` has some CSS styles for `<a>` tags with the `:disabled` selector, which is invalid (I think). I needed it for the preference experiment fields, so I changed it to a class selector (`.disabled`).\r\n- I added the logic for disabling form controls to `PreferenceExperimentFields.js`.\r\n- `test_models.py` needed a small rename of `recipe.update()` to `recipe.revise()`.\r\n\r\nAs far as I can tell, all three recipe types work with the system add-on, the control interface functions as expected, and the tests and lints all pass.", "head": {"repo": {"issues_url": "https://api.github.com/repos/Osmose/normandy/issues{/number}", "deployments_url": "https://api.github.com/repos/Osmose/normandy/deployments", "stargazers_count": 0, "forks_url": "https://api.github.com/repos/Osmose/normandy/forks", "mirror_url": null, "subscription_url": "https://api.github.com/repos/Osmose/normandy/subscription", "notifications_url": "https://api.github.com/repos/Osmose/normandy/notifications{?since,all,participating}", "collaborators_url": "https://api.github.com/repos/Osmose/normandy/collaborators{/collaborator}", "updated_at": "2017-01-07T01:53:48Z", "private": false, "pulls_url": "https://api.github.com/repos/Osmose/normandy/pulls{/number}", "issue_comment_url": "https://api.github.com/repos/Osmose/normandy/issues/comments{/number}", "labels_url": "https://api.github.com/repos/Osmose/normandy/labels{/name}", "has_wiki": true, "full_name": "Osmose/normandy", "owner": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "statuses_url": "https://api.github.com/repos/Osmose/normandy/statuses/{sha}", "id": 48456654, "keys_url": "https://api.github.com/repos/Osmose/normandy/keys{/key_id}", "description": "Self-Repair 2", "tags_url": "https://api.github.com/repos/Osmose/normandy/tags", "archived": false, "downloads_url": "https://api.github.com/repos/Osmose/normandy/downloads", "assignees_url": "https://api.github.com/repos/Osmose/normandy/assignees{/user}", "contents_url": "https://api.github.com/repos/Osmose/normandy/contents/{+path}", "has_pages": false, "git_refs_url": "https://api.github.com/repos/Osmose/normandy/git/refs{/sha}", "open_issues_count": 0, "has_projects": true, "clone_url": "https://github.com/Osmose/normandy.git", "watchers_count": 0, "git_tags_url": "https://api.github.com/repos/Osmose/normandy/git/tags{/sha}", "milestones_url": "https://api.github.com/repos/Osmose/normandy/milestones{/number}", "languages_url": "https://api.github.com/repos/Osmose/normandy/languages", "size": 5331, "homepage": null, "fork": true, "commits_url": "https://api.github.com/repos/Osmose/normandy/commits{/sha}", "releases_url": "https://api.github.com/repos/Osmose/normandy/releases{/id}", "issue_events_url": "https://api.github.com/repos/Osmose/normandy/issues/events{/number}", "archive_url": "https://api.github.com/repos/Osmose/normandy/{archive_format}{/ref}", "comments_url": "https://api.github.com/repos/Osmose/normandy/comments{/number}", "events_url": "https://api.github.com/repos/Osmose/normandy/events", "contributors_url": "https://api.github.com/repos/Osmose/normandy/contributors", "html_url": "https://github.com/Osmose/normandy", "forks": 0, "compare_url": "https://api.github.com/repos/Osmose/normandy/compare/{base}...{head}", "open_issues": 0, "watchers": 0, "git_url": "git://github.com/Osmose/normandy.git", "svn_url": "https://github.com/Osmose/normandy", "merges_url": "https://api.github.com/repos/Osmose/normandy/merges", "has_issues": false, "ssh_url": "git@github.com:Osmose/normandy.git", "blobs_url": "https://api.github.com/repos/Osmose/normandy/git/blobs{/sha}", "git_commits_url": "https://api.github.com/repos/Osmose/normandy/git/commits{/sha}", "hooks_url": "https://api.github.com/repos/Osmose/normandy/hooks", "has_downloads": true, "license": null, "name": "normandy", "language": "JavaScript", "url": "https://api.github.com/repos/Osmose/normandy", "created_at": "2015-12-22T22:18:41Z", "pushed_at": "2017-10-04T15:41:24Z", "forks_count": 0, "default_branch": "master", "teams_url": "https://api.github.com/repos/Osmose/normandy/teams", "trees_url": "https://api.github.com/repos/Osmose/normandy/git/trees{/sha}", "branches_url": "https://api.github.com/repos/Osmose/normandy/branches{/branch}", "subscribers_url": "https://api.github.com/repos/Osmose/normandy/subscribers", "stargazers_url": "https://api.github.com/repos/Osmose/normandy/stargazers"}, "sha": "f79a4fc1c5f36c4ee0c22d90393f3329e67baa5d", "ref": "preference-experiment-merge-master", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "label": "Osmose:preference-experiment-merge-master"}, "commits_url": "https://api.github.com/repos/mozilla/normandy/pulls/676/commits", "commits": 130, "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/676/comments", "html_url": "https://github.com/mozilla/normandy/pull/676", "rebaseable": false, "updated_at": "2017-04-12T17:15:15Z", "base": {"repo": {"issues_url": "https://api.github.com/repos/mozilla/normandy/issues{/number}", "deployments_url": "https://api.github.com/repos/mozilla/normandy/deployments", "stargazers_count": 24, "forks_url": "https://api.github.com/repos/mozilla/normandy/forks", "mirror_url": null, "subscription_url": "https://api.github.com/repos/mozilla/normandy/subscription", "notifications_url": "https://api.github.com/repos/mozilla/normandy/notifications{?since,all,participating}", "collaborators_url": "https://api.github.com/repos/mozilla/normandy/collaborators{/collaborator}", "updated_at": "2018-03-14T22:20:49Z", "private": false, "pulls_url": "https://api.github.com/repos/mozilla/normandy/pulls{/number}", "issue_comment_url": "https://api.github.com/repos/mozilla/normandy/issues/comments{/number}", "labels_url": "https://api.github.com/repos/mozilla/normandy/labels{/name}", "has_wiki": false, "full_name": "mozilla/normandy", "owner": {"following_url": "https://api.github.com/users/mozilla/following{/other_user}", "events_url": "https://api.github.com/users/mozilla/events{/privacy}", "organizations_url": "https://api.github.com/users/mozilla/orgs", "url": "https://api.github.com/users/mozilla", "gists_url": "https://api.github.com/users/mozilla/gists{/gist_id}", "html_url": "https://github.com/mozilla", "subscriptions_url": "https://api.github.com/users/mozilla/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/131524?v=4", "repos_url": "https://api.github.com/users/mozilla/repos", "received_events_url": "https://api.github.com/users/mozilla/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mozilla/starred{/owner}{/repo}", "site_admin": false, "login": "mozilla", "type": "Organization", "id": 131524, "followers_url": "https://api.github.com/users/mozilla/followers"}, "statuses_url": "https://api.github.com/repos/mozilla/normandy/statuses/{sha}", "id": 48456638, "keys_url": "https://api.github.com/repos/mozilla/normandy/keys{/key_id}", "description": "Firefox recipe server", "tags_url": "https://api.github.com/repos/mozilla/normandy/tags", "archived": false, "downloads_url": "https://api.github.com/repos/mozilla/normandy/downloads", "assignees_url": "https://api.github.com/repos/mozilla/normandy/assignees{/user}", "contents_url": "https://api.github.com/repos/mozilla/normandy/contents/{+path}", "has_pages": false, "git_refs_url": "https://api.github.com/repos/mozilla/normandy/git/refs{/sha}", "open_issues_count": 73, "has_projects": true, "clone_url": "https://github.com/mozilla/normandy.git", "watchers_count": 24, "git_tags_url": "https://api.github.com/repos/mozilla/normandy/git/tags{/sha}", "milestones_url": "https://api.github.com/repos/mozilla/normandy/milestones{/number}", "languages_url": "https://api.github.com/repos/mozilla/normandy/languages", "size": 6015, "homepage": "https://wiki.mozilla.org/Firefox/Recipe_Server", "fork": false, "commits_url": "https://api.github.com/repos/mozilla/normandy/commits{/sha}", "releases_url": "https://api.github.com/repos/mozilla/normandy/releases{/id}", "issue_events_url": "https://api.github.com/repos/mozilla/normandy/issues/events{/number}", "archive_url": "https://api.github.com/repos/mozilla/normandy/{archive_format}{/ref}", "comments_url": "https://api.github.com/repos/mozilla/normandy/comments{/number}", "events_url": "https://api.github.com/repos/mozilla/normandy/events", "contributors_url": "https://api.github.com/repos/mozilla/normandy/contributors", "html_url": "https://github.com/mozilla/normandy", "forks": 39, "compare_url": "https://api.github.com/repos/mozilla/normandy/compare/{base}...{head}", "open_issues": 73, "watchers": 24, "git_url": "git://github.com/mozilla/normandy.git", "svn_url": "https://github.com/mozilla/normandy", "merges_url": "https://api.github.com/repos/mozilla/normandy/merges", "has_issues": true, "ssh_url": "git@github.com:mozilla/normandy.git", "blobs_url": "https://api.github.com/repos/mozilla/normandy/git/blobs{/sha}", "git_commits_url": "https://api.github.com/repos/mozilla/normandy/git/commits{/sha}", "hooks_url": "https://api.github.com/repos/mozilla/normandy/hooks", "has_downloads": true, "license": null, "name": "normandy", "language": "Python", "url": "https://api.github.com/repos/mozilla/normandy", "created_at": "2015-12-22T22:18:19Z", "pushed_at": "2018-03-14T22:20:47Z", "forks_count": 39, "default_branch": "master", "teams_url": "https://api.github.com/repos/mozilla/normandy/teams", "trees_url": "https://api.github.com/repos/mozilla/normandy/git/trees{/sha}", "branches_url": "https://api.github.com/repos/mozilla/normandy/branches{/branch}", "subscribers_url": "https://api.github.com/repos/mozilla/normandy/subscribers", "stargazers_url": "https://api.github.com/repos/mozilla/normandy/stargazers"}, "sha": "68dce0e38de3dc818fec44d17372c7e9d58da597", "ref": "preference-experiment", "user": {"following_url": "https://api.github.com/users/mozilla/following{/other_user}", "events_url": "https://api.github.com/users/mozilla/events{/privacy}", "organizations_url": "https://api.github.com/users/mozilla/orgs", "url": "https://api.github.com/users/mozilla", "gists_url": "https://api.github.com/users/mozilla/gists{/gist_id}", "html_url": "https://github.com/mozilla", "subscriptions_url": "https://api.github.com/users/mozilla/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/131524?v=4", "repos_url": "https://api.github.com/users/mozilla/repos", "received_events_url": "https://api.github.com/users/mozilla/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mozilla/starred{/owner}{/repo}", "site_admin": false, "login": "mozilla", "type": "Organization", "id": 131524, "followers_url": "https://api.github.com/users/mozilla/followers"}, "label": "mozilla:preference-experiment"}, "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "requested_teams": [], "locked": false, "merged_by": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "url": "https://api.github.com/repos/mozilla/normandy/pulls/676", "mergeable_state": "dirty", "created_at": "2017-04-11T08:10:37Z", "merged": true, "review_comments_url": "https://api.github.com/repos/mozilla/normandy/pulls/676/comments", "review_comments": 0, "assignees": [{"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}], "review_comment_url": "https://api.github.com/repos/mozilla/normandy/pulls/comments{/number}", "patch_url": "https://github.com/mozilla/normandy/pull/676.patch", "body_html": "<p>Time for another merge! This one was a little hairy.</p>\n<p>As before, your best bet for reviewing this is pulling it down and running <code>git show 4350083b963e99442df3a832e12d5808fb6be005</code>. It'll still have some extra stuff beyond the merge fixes I made, but it's better than Github's diff.</p>\n<p>Note that I didn't just make merge changes, but some fixes to stuff in master in order to make my local testing work. I suspect it's easiest to just land these in master when we merge this branch back in, but I'm happy to go through and port them to master sooner if that's preferred.</p>\n<p>Interesting changes from the merge:</p>\n<ul>\n<li>I reverted the <a href=\"https://github.com/mozilla/normandy/pull/633\">storage checks</a> merge because I was having issues getting the test to pass (I think it had to do with how the test was creating the driver, but I don't quite remember), noticed that the PR was missing a peer review, and decided to punt on figuring it out myself. This is actually in a commit separate from the merge, in case you want to review it. The revert didn't conflict so I figured it's good.</li>\n<li>The <a href=\"https://github.com/mozilla/normandy/pull/662/\">getAppLocaleAsLangTag</a> change breaks the XPI outside of Nightly, as the API doesn't exist. So I added feature detection for it.</li>\n<li><code>install.rdf.in</code> has <a href=\"https://github.com/mozilla/normandy/blob/master/recipe-client-addon/install.rdf.in#L3\">a comment of some kind at the top</a> which breaks the RDF parser and causes the add-on to be corrupt. I removed it.</li>\n<li><code>_common.scss</code> has some CSS styles for <code>&lt;a&gt;</code> tags with the <code>:disabled</code> selector, which is invalid (I think). I needed it for the preference experiment fields, so I changed it to a class selector (<code>.disabled</code>).</li>\n<li>I added the logic for disabling form controls to <code>PreferenceExperimentFields.js</code>.</li>\n<li><code>test_models.py</code> needed a small rename of <code>recipe.update()</code> to <code>recipe.revise()</code>.</li>\n</ul>\n<p>As far as I can tell, all three recipe types work with the system add-on, the control interface functions as expected, and the tests and lints all pass.</p>"}