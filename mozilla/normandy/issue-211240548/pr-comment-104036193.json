{"original_position": 54, "diff_hunk": "@@ -192,19 +192,63 @@ in other Django projects.\n \n .. envvar:: DJANGO_CDN_URL\n \n-  :default: ``None``\n+   :default: ``None``\n \n-  The URL of a CDN that is backed by Normandy, if one is in use. This is used to\n-  enforce that immutable content is routed through the CDN. Must end with a\n-  slash (``/``).\n+   The URL of a CDN that is backed by Normandy, if one is in use. This is used to\n+   enforce that immutable content is routed through the CDN. Must end with a\n+   slash (``/``).\n \n .. envvar:: DJANGO_APP_SERVER_URL\n \n-  :default: ``None``\n+   :default: ``None``\n+\n+   The URL that allows direct access to Normandy, bypassing any CDNs. This\n+   is used for content that cannot be cached. If not specified, Normandy will\n+   assume direct access. Must end with a slash (``/``).\n+\n+.. envvar:: DJANGO_USE_OIDC\n+\n+   :default: ``False``\n+\n+   If enabled, Normandy will authenticate users by reading a header in requests.\n+   The expectation is that a proxy server, such as Nginx, will perform\n+   authentication using Open ID Connect, and then pass the unique ID of the user\n+   in a header.\n+\n+   .. seealso::\n+\n+      :envvar:`DJANGO_OIDC_REMOTE_AUTH_HEADER` for which header Normandy\n+      reads this value from.\n+\n+   .. warning::\n+\n+      If this feature is enabled, the proxy server providing authentcation\n+      *must* sanitize the headers passed along to Normandy. Specifcially, the\n+      header defined in :envvar:`DJANGO_OIDC_REMOTE_AUTH_HEADER` must not be\n+      passed on from the user.\n+\n+      Failing to do this will result from any client being able to authenticate\n+      as any user, with no checks.\n+\n+.. envvar:: DJANGO_OIDC_REMOTE_AUTH_HEADER\n+\n+   :default: ``HTTP_REMOTE_USER``\n+\n+   If :envvar:`DJANGO_USE_OIDC` is ``True``, this is the source of the user to\n+   authenticate. This is subject to the Django header normalization, i.e.\n+   the header will be capitalized, dashes replaced with underscores, and it will\n+   be prefixed with ``HTTP_``.", "body_text": "The wording \"This is subject to\" makes it sound like those changes will be automatically applied to the setting value, not that the setting must abide by those rules.\nAlthough actually I think those changes should be automatically applied.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/569", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/104036193", "created_at": "2017-03-02T21:38:09Z", "author_association": "MEMBER", "body": "The wording \"This is subject to\" makes it sound like those changes will be automatically applied to the setting value, not that the setting must abide by those rules. \r\n\r\nAlthough actually I think those changes _should_ be automatically applied.", "updated_at": "2017-03-06T17:37:00Z", "html_url": "https://github.com/mozilla/normandy/pull/569#discussion_r104036193", "pull_request_review_id": 24850112, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/104036193"}, "html": {"href": "https://github.com/mozilla/normandy/pull/569#discussion_r104036193"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/569"}}, "commit_id": "c9c28ce65b5a2c3d074f3b9ebe75cb4f2f17243d", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "docs/ops/config.rst", "body_html": "<p>The wording \"This is subject to\" makes it sound like those changes will be automatically applied to the setting value, not that the setting must abide by those rules.</p>\n<p>Although actually I think those changes <em>should</em> be automatically applied.</p>", "original_commit_id": "2163cbbb9484b6b077855b5e9c2322f730960a6e", "id": 104036193}