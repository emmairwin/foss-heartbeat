{"original_position": 103, "diff_hunk": "@@ -116,57 +121,66 @@ compose_task(\n     await storage.create(study3);\n \n     await BrowserTestUtils.withNewTab(\"about:studies\", async browser => {\n-      const doc = browser.contentDocument;\n-\n-      await BrowserTestUtils.waitForCondition(() => doc.querySelectorAll(\".study-list .study\").length);\n-      const studyRows = doc.querySelectorAll(\".study-list .study\");\n-\n-      const names = Array.from(studyRows).map(row => row.querySelector(\".study-name\").textContent);\n-      Assert.deepEqual(\n-        names,\n-        [study3.name, study1.name, study2.name],\n-        \"Studies are sorted first by enabled status, and then by descending start date.\"\n-      );\n-\n-      const study1Row = getStudyRow(doc, study1.name);\n-      ok(\n-        study1Row.querySelector(\".study-description\").textContent.includes(study1.description),\n-        \"Study descriptions are shown in about:studies.\"\n-      );\n-      is(\n-        study1Row.querySelector(\".study-status\").textContent,\n-        \"Active\",\n-        \"Active studies show an 'Active' indicator.\"\n-      );\n-      ok(\n-        study1Row.querySelector(\".remove-button\"),\n-        \"Active studies show a remove button\"\n-      );\n-      is(\n-        study1Row.querySelector(\".study-icon\").textContent.toLowerCase(),\n-        \"a\",\n-        \"Study icons use the first letter of the study name.\"\n-      );\n+      await ContentTask.spawn(browser, [study1, study2, study3], async ([cStudy1, cStudy2, cStudy3]) => {\n+        Components.utils.import(\"resource://testing-common/ContentTaskUtils.jsm\");", "body_text": "You shouldn't need to import this either, I think.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/902", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/129658015", "created_at": "2017-07-26T18:28:08Z", "author_association": "CONTRIBUTOR", "body": "You shouldn't need to import this either, I think.", "updated_at": "2017-07-27T19:03:51Z", "html_url": "https://github.com/mozilla/normandy/pull/902#discussion_r129658015", "pull_request_review_id": 52454498, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/129658015"}, "html": {"href": "https://github.com/mozilla/normandy/pull/902#discussion_r129658015"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/902"}}, "commit_id": "237c17d02485073a007bad37482bf9ce3a8123e7", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": null, "path": "recipe-client-addon/test/browser/browser_about_studies.js", "body_html": "<p>You shouldn't need to import this either, I think.</p>", "original_commit_id": "977f487399f05a13160a03c7d6e3545812fdf5a9", "id": 129658015}