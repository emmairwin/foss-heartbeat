{"original_position": 67, "diff_hunk": "@@ -33,33 +38,53 @@ XPCOMUtils.defineLazyGetter(this, \"jexl\", () => {\n   return jexl;\n });\n \n-const getLatestTelemetry = Task.async(function *() {\n-  const pings = yield TelemetryArchive.promiseArchivedPingList();\n+this.EnvExpressions = {\n+  getLatestTelemetry: Task.async(function *() {\n+    const pings = yield TelemetryArchive.promiseArchivedPingList();\n \n-  // get most recent ping per type\n-  const mostRecentPings = {};\n-  for (const ping of pings) {\n-    if (ping.type in mostRecentPings) {\n-      if (mostRecentPings[ping.type].timeStampCreated < ping.timeStampCreated) {\n+    // get most recent ping per type\n+    const mostRecentPings = {};\n+    for (const ping of pings) {\n+      if (ping.type in mostRecentPings) {\n+        if (mostRecentPings[ping.type].timeStampCreated < ping.timeStampCreated) {\n+          mostRecentPings[ping.type] = ping;\n+        }\n+      } else {\n         mostRecentPings[ping.type] = ping;\n       }\n-    } else {\n-      mostRecentPings[ping.type] = ping;\n     }\n-  }\n \n-  const telemetry = {};\n-  for (const key in mostRecentPings) {\n-    const ping = mostRecentPings[key];\n-    telemetry[ping.type] = yield TelemetryArchive.promiseArchivedPingById(ping.id);\n-  }\n-  return telemetry;\n-});\n+    const telemetry = {};\n+    for (const key in mostRecentPings) {\n+      const ping = mostRecentPings[key];\n+      telemetry[ping.type] = yield TelemetryArchive.promiseArchivedPingById(ping.id);\n+    }\n+    return telemetry;\n+  }),\n+\n+  getUserId() {\n+    let id = prefs.getCharPref(\"user_id\");\n+    console.log(\"pref user_id\", id);\n+    if (id === \"\") {", "body_text": "Nit: Firefox style is: if (!id) {.", "in_reply_to_id": 97192788, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/441", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/97203556", "created_at": "2017-01-21T18:24:25Z", "author_association": "CONTRIBUTOR", "body": "Nit: Firefox style is: `if (!id) {`.", "updated_at": "2017-01-25T18:37:30Z", "html_url": "https://github.com/mozilla/normandy/pull/441#discussion_r97203556", "pull_request_review_id": 17811868, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/97203556"}, "html": {"href": "https://github.com/mozilla/normandy/pull/441#discussion_r97203556"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/441"}}, "commit_id": "910227d94b0b381ab52a5e9ddb6c672d9bf7f9a1", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": null, "path": "recipe-client-addon/lib/EnvExpressions.jsm", "body_html": "<p>Nit: Firefox style is: <code>if (!id) {</code>.</p>", "original_commit_id": "8a4301c4e749e80a3646a5abedbadc0abafde08e", "id": 97203556}