{"original_position": 25, "diff_hunk": "@@ -0,0 +1,37 @@\n+from django.utils.http import urlquote\n+\n+import pytest\n+from rest_framework.serializers import ModelSerializer\n+\n+from normandy.base.api.relations import CDNHyperlinkedIdentityField\n+from normandy.recipes.models import Action\n+from normandy.recipes.tests import ActionFactory\n+\n+\n+@pytest.mark.django_db\n+class TestCDNHyperlinkedIdentityField:\n+\n+    # TODO: It would be good to not rely on outside models, but for now this is easier.\n+\n+    class DummySerializer(ModelSerializer):\n+        class Meta:\n+            model = Action\n+\n+        self_url = CDNHyperlinkedIdentityField(view_name='action-detail', lookup_field='name')\n+\n+    def test_no_setting(self, settings, rf):\n+        settings.CDN_URL = None\n+        request = rf.get('/')\n+        obj = ActionFactory()", "body_text": "Call an action an action.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/77", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/56604281", "created_at": "2016-03-18T01:48:20Z", "author_association": "MEMBER", "body": "Call an action an action.\n", "updated_at": "2016-03-24T22:53:05Z", "html_url": "https://github.com/mozilla/normandy/pull/77#discussion_r56604281", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/56604281"}, "html": {"href": "https://github.com/mozilla/normandy/pull/77#discussion_r56604281"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/77"}}, "commit_id": "3c9221aef4b5d9bad48aca31e1dd5f0b1a218a9b", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "normandy/base/tests/test_api_relations.py", "body_html": "<p>Call an action an action.</p>", "original_commit_id": "bc627438859a531da3db30840eacb5ee42f4309a", "id": 56604281}