{"original_position": 48, "diff_hunk": "@@ -36,4 +36,42 @@ describe('<ExtensionSelect>', () => {\n     const placeholderStyle = placeholderElement.get(0).style;\n     expect(placeholderStyle.display).toBe('block');\n   });\n+\n+  it('should display its inherited value prop', () => {\n+    const wrapper = mount(wrapMockStore(\n+      <ExtensionSelect\n+        {...props}\n+        extensions={fromJS([{ xpi: '1', name: 'one' }, { xpi: '2', name: 'two' }])}\n+        value=\"2\"\n+      />,\n+    ));\n+\n+    expect(wrapper.find('.ant-select-selection-selected-value').text()).toBe('two');\n+  });\n+\n+  it('should fire an onChange event appropriately', async () => {\n+    let selected;\n+    const wrapper = mount(wrapMockStore(\n+      <ExtensionSelect\n+        {...props}\n+        extensions={\n+          fromJS([{ xpi: '1', name: 'one' }, { xpi: '2', name: 'two' }])\n+        }\n+        onChange={val => {\n+          selected = val;\n+        }}\n+      />,\n+    ));\n+\n+    wrapper.find('.ant-select-selection__placeholder').simulate('click');\n+    expect(wrapper.find(Select).props().children.size).toBe(2);", "body_text": "After playing with this a bit, I'm still at a wall.\n\nThe 'children' reflect the options passed in, however selecting one (.get(0)) returns some sort of wrapper which does not allow simulateing events\nThe children have title and value props, but searching the wrapper (wrapper.find(\"[type='whatever']\") turns up empty\n\nI suspect this is because Ant is rendering the dropdown menu someplace else on the page. For instance, if you look at the DOM, the dropdown menu is not nested under the actual select box.\n\n\nSearching for the exact Option class names (wrapper.find('.ant-select-dropdown-menu-item')) also turns up nothing\n\nAt this point, I think I will have to dig into how Ant/rc-select performs their tests on this component.", "in_reply_to_id": 140885998, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1072", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/143826445", "created_at": "2017-10-10T19:18:44Z", "author_association": "CONTRIBUTOR", "body": "After playing with this a bit, I'm still at a wall.\r\n\r\n- The 'children' reflect the options passed in, however selecting one (`.get(0)`) returns some sort of wrapper which does _not_ allow `simulate`ing events\r\n- The children have `title` and `value` props, but searching the wrapper (`wrapper.find(\"[type='whatever']\")` turns up empty\r\n  - I suspect this is because Ant is rendering the dropdown menu someplace else on the page. For instance, if you look at the DOM, the dropdown menu is _not_ nested under the actual select box.\r\n- Searching for the exact Option class names (`wrapper.find('.ant-select-dropdown-menu-item')`) also turns up nothing\r\n\r\nAt this point, I think I will have to dig into how Ant/rc-select performs their tests on this component.", "updated_at": "2017-10-18T16:54:48Z", "html_url": "https://github.com/mozilla/normandy/pull/1072#discussion_r143826445", "pull_request_review_id": 68396225, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/143826445"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1072#discussion_r143826445"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1072"}}, "commit_id": "896c1d32f657d07c875fa8cad3047724888ed2f4", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "position": null, "path": "recipe-server/client/control/tests/components/extensions/test_ExtensionSelect.js", "body_html": "<p>After playing with this a bit, I'm still at a wall.</p>\n<ul>\n<li>The 'children' reflect the options passed in, however selecting one (<code>.get(0)</code>) returns some sort of wrapper which does <em>not</em> allow <code>simulate</code>ing events</li>\n<li>The children have <code>title</code> and <code>value</code> props, but searching the wrapper (<code>wrapper.find(\"[type='whatever']\")</code> turns up empty\n<ul>\n<li>I suspect this is because Ant is rendering the dropdown menu someplace else on the page. For instance, if you look at the DOM, the dropdown menu is <em>not</em> nested under the actual select box.</li>\n</ul>\n</li>\n<li>Searching for the exact Option class names (<code>wrapper.find('.ant-select-dropdown-menu-item')</code>) also turns up nothing</li>\n</ul>\n<p>At this point, I think I will have to dig into how Ant/rc-select performs their tests on this component.</p>", "original_commit_id": "880cfc71b77e9ee67231c25173f1a1b6cdaf12ad", "id": 143826445}