{"original_position": 16, "diff_hunk": "@@ -36,21 +39,106 @@ describe('Normandy Driver', () => {\n     });\n   });\n \n+  describe('saveHeartbeatFlow', () => {\n+    const driver = new NormandyDriver();\n+\n+    afterEach(() => {\n+      fetchMock.restore();", "body_text": "Hmmm I think it actually makes more sense in afterEach. Moving it to beforeEach would look weird because we still want to call fetchMock.get(url) there.  (In the other example you linked to, it didn't matter as much because our fetchMock.get calls varied for each test and had to be defined separately in each it block.)\nI'll switch the other test case to also use restore() in afterEach.", "in_reply_to_id": 79666402, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/265", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/79853334", "created_at": "2016-09-21T14:55:41Z", "author_association": "CONTRIBUTOR", "body": "Hmmm I think it actually makes more sense in `afterEach`. Moving it to `beforeEach` would look weird because we still want to call `fetchMock.get(url)` there.  (In the other example you linked to, it didn't matter as much because our `fetchMock.get` calls varied for each test and had to be defined separately in each `it` block.)\n\nI'll switch the other test case to also use `restore()` in `afterEach`. \n", "updated_at": "2016-09-21T17:12:34Z", "html_url": "https://github.com/mozilla/normandy/pull/265#discussion_r79853334", "pull_request_review_id": 969662, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/79853334"}, "html": {"href": "https://github.com/mozilla/normandy/pull/265#discussion_r79853334"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/265"}}, "commit_id": "0f32d5e37a85c306be57350a6cc006f74cc471d8", "user": {"following_url": "https://api.github.com/users/brittanystoroz/following{/other_user}", "events_url": "https://api.github.com/users/brittanystoroz/events{/privacy}", "organizations_url": "https://api.github.com/users/brittanystoroz/orgs", "url": "https://api.github.com/users/brittanystoroz", "gists_url": "https://api.github.com/users/brittanystoroz/gists{/gist_id}", "html_url": "https://github.com/brittanystoroz", "subscriptions_url": "https://api.github.com/users/brittanystoroz/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/856935?v=4", "repos_url": "https://api.github.com/users/brittanystoroz/repos", "received_events_url": "https://api.github.com/users/brittanystoroz/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/brittanystoroz/starred{/owner}{/repo}", "site_admin": false, "login": "brittanystoroz", "type": "User", "id": 856935, "followers_url": "https://api.github.com/users/brittanystoroz/followers"}, "position": null, "path": "client/selfrepair/tests/test_normandy_driver.js", "body_html": "<p>Hmmm I think it actually makes more sense in <code>afterEach</code>. Moving it to <code>beforeEach</code> would look weird because we still want to call <code>fetchMock.get(url)</code> there.  (In the other example you linked to, it didn't matter as much because our <code>fetchMock.get</code> calls varied for each test and had to be defined separately in each <code>it</code> block.)</p>\n<p>I'll switch the other test case to also use <code>restore()</code> in <code>afterEach</code>.</p>", "original_commit_id": "149c63c7afb47268c723f0fbbf0bffa2699c5814", "id": 79853334}