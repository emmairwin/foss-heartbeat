{"body": "Okay. So the karma tests use the same webpack config that we use for building the site now, which fixes the issues with `DEVELOPMENT` not being defined. It's a little janky because it doesn't use the action config for building and testing the actions, but that was true before this PR anyway so whatever. Getting webpack and karma to play nicely is a bit rough.\n\nOnce I got that done, I got test failures from fetch 404ing. Webpack was injecting `isomorphic-fetch` by surrounding the module in a closure, which means that `fetch-mock`'s changes to `window.fetch` weren't visible to the code under test.\n\nWe're not running our tests in Node anymore, and the control interface probably doesn't need to support Firefox versions old enough to not support fetch, so I removed `isomorphic-fetch`.\n\nThe build keeps failing to download dependencies, not entirely sure why. Will look into this, but I think the code is ready.  \n", "body_text": "Okay. So the karma tests use the same webpack config that we use for building the site now, which fixes the issues with DEVELOPMENT not being defined. It's a little janky because it doesn't use the action config for building and testing the actions, but that was true before this PR anyway so whatever. Getting webpack and karma to play nicely is a bit rough.\nOnce I got that done, I got test failures from fetch 404ing. Webpack was injecting isomorphic-fetch by surrounding the module in a closure, which means that fetch-mock's changes to window.fetch weren't visible to the code under test.\nWe're not running our tests in Node anymore, and the control interface probably doesn't need to support Firefox versions old enough to not support fetch, so I removed isomorphic-fetch.\nThe build keeps failing to download dependencies, not entirely sure why. Will look into this, but I think the code is ready.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/242900913", "created_at": "2016-08-27T07:00:38Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/pull/229#issuecomment-242900913", "updated_at": "2016-08-27T07:00:38Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "body_html": "<p>Okay. So the karma tests use the same webpack config that we use for building the site now, which fixes the issues with <code>DEVELOPMENT</code> not being defined. It's a little janky because it doesn't use the action config for building and testing the actions, but that was true before this PR anyway so whatever. Getting webpack and karma to play nicely is a bit rough.</p>\n<p>Once I got that done, I got test failures from fetch 404ing. Webpack was injecting <code>isomorphic-fetch</code> by surrounding the module in a closure, which means that <code>fetch-mock</code>'s changes to <code>window.fetch</code> weren't visible to the code under test.</p>\n<p>We're not running our tests in Node anymore, and the control interface probably doesn't need to support Firefox versions old enough to not support fetch, so I removed <code>isomorphic-fetch</code>.</p>\n<p>The build keeps failing to download dependencies, not entirely sure why. Will look into this, but I think the code is ready.</p>", "id": 242900913, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/229"}