{"original_position": 24, "diff_hunk": "@@ -61,105 +61,21 @@ XPCOMUtils.defineLazyModuleGetter(this, \"LogManager\", \"resource://shield-recipe-\n XPCOMUtils.defineLazyModuleGetter(this, \"Preferences\", \"resource://gre/modules/Preferences.jsm\");\n XPCOMUtils.defineLazyModuleGetter(this, \"TelemetryEnvironment\", \"resource://gre/modules/TelemetryEnvironment.jsm\");\n \n-this.EXPORTED_SYMBOLS = [\"PreferenceExperiments\"];\n-\n-const EXPERIMENT_FILE = \"shield-preference-experiments.json\";\n-\n-const PREFERENCE_TYPE_MAP = {\n-  boolean: Services.prefs.PREF_BOOL,\n-  string: Services.prefs.PREF_STRING,\n-  integer: Services.prefs.PREF_INT,\n-};\n-\n-const DefaultPreferences = new Preferences({defaultBranch: true});\n-\n-/**\n- * Enum storing Preference modules for each type of preference branch.\n- * @enum {Object}\n- */\n-const PreferenceBranchType = {\n-  user: Preferences,\n-  default: DefaultPreferences,\n-};\n+XPCOMUtils.defineLazyModuleGetter(this, \"PreferenceManagement\", \"resource://shield-recipe-client/lib/PreferenceManagement.jsm\");", "body_text": "You're making this lazy but then you use it 3 lines down. Not sure there's any point. Have you checked that we call into this module as lazily as we can? There's some push to make sure we don't initialize the entire world immediately on startup these days, because it turns out the costs of all our jsms do add up.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/724", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/118450148", "created_at": "2017-05-25T09:27:35Z", "author_association": "CONTRIBUTOR", "body": "You're making this lazy but then you use it 3 lines down. Not sure there's any point. Have you checked that we call into this module as lazily as we can? There's some push to make sure we don't initialize the entire world immediately on startup these days, because it turns out the costs of all our jsms do add up.", "updated_at": "2017-06-12T21:44:43Z", "html_url": "https://github.com/mozilla/normandy/pull/724#discussion_r118450148", "pull_request_review_id": 40240947, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/118450148"}, "html": {"href": "https://github.com/mozilla/normandy/pull/724#discussion_r118450148"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/724"}}, "commit_id": "46651e36e3771d2c4d90f6529a28ef814e4d9e4b", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": null, "path": "recipe-client-addon/lib/PreferenceExperiments.jsm", "body_html": "<p>You're making this lazy but then you use it 3 lines down. Not sure there's any point. Have you checked that we call into this module as lazily as we can? There's some push to make sure we don't initialize the entire world immediately on startup these days, because it turns out the costs of all our jsms do add up.</p>", "original_commit_id": "56b772323bbfb68cf5f7771579c1c1d213fe33f0", "id": 118450148}