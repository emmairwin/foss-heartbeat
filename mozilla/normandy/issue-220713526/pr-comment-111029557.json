{"original_position": 6, "diff_hunk": "@@ -142,6 +142,16 @@ this.PreferenceExperiments = {\n       previousPreferenceValue: Preferences.get(preferenceName, undefined),\n     };\n \n+    if (experiment.previousPreferenceValue) {\n+      const previousType = typeof experiment.previousPreferenceValue;\n+      const givenType = typeof preferenceValue;", "body_text": "@Osmose It doesn't seem that I can just give the method a value and have it spit the type of out; it takes a pref name and checks the current value of that pref.\nDoes that mean that in order to test the new given value, it needs to first set the pref, then check the type, then revert the value if necessary?\nI looked through the docs and didn't see anything that would help cut out this weird set-then-reset business, but maybe I missed something. Thoughts?", "in_reply_to_id": 110723540, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/673", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/111029557", "created_at": "2017-04-11T22:34:10Z", "author_association": "CONTRIBUTOR", "body": "@Osmose It doesn't seem that I can just give the method a value and have it spit the type of out; it takes a pref name and checks the current value of that pref.\r\n\r\nDoes that mean that in order to test the new given value, it needs to first set the pref, then check the type, then revert the value if necessary?\r\n\r\nI looked through the docs and didn't see anything that would help cut out this weird set-then-reset business, but maybe I missed something. Thoughts?", "updated_at": "2017-04-20T14:39:26Z", "html_url": "https://github.com/mozilla/normandy/pull/673#discussion_r111029557", "pull_request_review_id": 32245058, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/111029557"}, "html": {"href": "https://github.com/mozilla/normandy/pull/673#discussion_r111029557"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/673"}}, "commit_id": "0481af5b14c3a214840bcb56387fdf293f7386a8", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "position": null, "path": "recipe-client-addon/lib/PreferenceExperiments.jsm", "body_html": "<p><a class=\"user-mention\" href=\"https://github.com/osmose\">@Osmose</a> It doesn't seem that I can just give the method a value and have it spit the type of out; it takes a pref name and checks the current value of that pref.</p>\n<p>Does that mean that in order to test the new given value, it needs to first set the pref, then check the type, then revert the value if necessary?</p>\n<p>I looked through the docs and didn't see anything that would help cut out this weird set-then-reset business, but maybe I missed something. Thoughts?</p>", "original_commit_id": "59b34a0bd0988370ab5f18c166bce5efd7feba5d", "id": 111029557}