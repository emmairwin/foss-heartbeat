{"body": "Huh, super weird. Few things:\r\n\r\n- The linter doesn't appear to be working for me at all locally - Therapist just marks it as [SKIPPED] (it may only be looking for `.js` files and not `.jsm`), and running it manually doesn't seem to use the local `.eslintrc` file. I'll continue to investigate.\r\n\r\n- The `make-xpi` script was failing for me, but I found the issue and have committed the fix (a command flag was in the wrong spot)\r\n\r\n- After finally getting the XPI to build and all that, I encountered the same error you did, however with this warning above it:\r\n\r\n`\r\nXrayWrapper denied access to property \"getItem\" (reason: value is callable). See https://developer.mozilla.org/en-US/docs/Xray_vision for more information. Note that only the first denied property access from a given global object will be reported.\r\n`\r\n\r\nLooking into it, it seems like a sandboxing issue, though I have no idea why it thinks that object is global (removing the 'global' part of the variable name did not do anything, either). @mythmon Any thoughts?\r\n\r\nedit:\r\n\r\nWe may be able to use `Cu.waiveXrays`, though it seems strange to me that we need to patch this particular function when it doesn't immediately look like it's doing anything globally.", "body_text": "Huh, super weird. Few things:\n\n\nThe linter doesn't appear to be working for me at all locally - Therapist just marks it as [SKIPPED] (it may only be looking for .js files and not .jsm), and running it manually doesn't seem to use the local .eslintrc file. I'll continue to investigate.\n\n\nThe make-xpi script was failing for me, but I found the issue and have committed the fix (a command flag was in the wrong spot)\n\n\nAfter finally getting the XPI to build and all that, I encountered the same error you did, however with this warning above it:\n\n\nXrayWrapper denied access to property \"getItem\" (reason: value is callable). See https://developer.mozilla.org/en-US/docs/Xray_vision for more information. Note that only the first denied property access from a given global object will be reported.\nLooking into it, it seems like a sandboxing issue, though I have no idea why it thinks that object is global (removing the 'global' part of the variable name did not do anything, either). @mythmon Any thoughts?\nedit:\nWe may be able to use Cu.waiveXrays, though it seems strange to me that we need to patch this particular function when it doesn't immediately look like it's doing anything globally.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/290761361", "created_at": "2017-03-31T16:27:57Z", "author_association": "CONTRIBUTOR", "html_url": "https://github.com/mozilla/normandy/pull/633#issuecomment-290761361", "updated_at": "2017-03-31T16:31:25Z", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "body_html": "<p>Huh, super weird. Few things:</p>\n<ul>\n<li>\n<p>The linter doesn't appear to be working for me at all locally - Therapist just marks it as [SKIPPED] (it may only be looking for <code>.js</code> files and not <code>.jsm</code>), and running it manually doesn't seem to use the local <code>.eslintrc</code> file. I'll continue to investigate.</p>\n</li>\n<li>\n<p>The <code>make-xpi</code> script was failing for me, but I found the issue and have committed the fix (a command flag was in the wrong spot)</p>\n</li>\n<li>\n<p>After finally getting the XPI to build and all that, I encountered the same error you did, however with this warning above it:</p>\n</li>\n</ul>\n<p><code>XrayWrapper denied access to property \"getItem\" (reason: value is callable). See https://developer.mozilla.org/en-US/docs/Xray_vision for more information. Note that only the first denied property access from a given global object will be reported.</code></p>\n<p>Looking into it, it seems like a sandboxing issue, though I have no idea why it thinks that object is global (removing the 'global' part of the variable name did not do anything, either). <a class=\"user-mention\" href=\"https://github.com/mythmon\">@mythmon</a> Any thoughts?</p>\n<p>edit:</p>\n<p>We may be able to use <code>Cu.waiveXrays</code>, though it seems strange to me that we need to patch this particular function when it doesn't immediately look like it's doing anything globally.</p>", "id": 290761361, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/633"}