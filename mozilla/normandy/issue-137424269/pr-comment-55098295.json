{"original_position": 2, "diff_hunk": "@@ -0,0 +1,2 @@\n+# Import views so that admin autodiscover picks them up.\n+import normandy.classifier.admin.views", "body_text": "Sort've. The problem is whether AppConfig.ready runs before the main urlconf is constructed, because that's when the admin URLs are generated and all ModelAdmins need to be registered before that point. autodiscover simply imports all the app.admin modules it can find, and which includes this __init__ file.\nEven if we had an AppConfig running autodiscover we'd have to do this import anyway. It's the one downside to having admin be a package instead of a module, and I think it's fine.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/55", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/55098295", "created_at": "2016-03-04T22:23:21Z", "author_association": "MEMBER", "body": "Sort've. The problem is whether `AppConfig.ready` runs before the main urlconf is constructed, because that's when the admin URLs are generated and all ModelAdmins need to be registered before that point. `autodiscover` simply imports all the `app.admin` modules it can find, and which includes this `__init__` file.\n\nEven if we had an `AppConfig` running `autodiscover` we'd have to do this import anyway. It's the one downside to having `admin` be a package instead of a module, and I think it's fine.\n", "updated_at": "2016-03-05T04:17:18Z", "html_url": "https://github.com/mozilla/normandy/pull/55#discussion_r55098295", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/55098295"}, "html": {"href": "https://github.com/mozilla/normandy/pull/55#discussion_r55098295"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/55"}}, "commit_id": "934b31cc217e2d66c0fcf405efdff5fd87bb3a23", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": 2, "path": "normandy/classifier/admin/__init__.py", "body_html": "<p>Sort've. The problem is whether <code>AppConfig.ready</code> runs before the main urlconf is constructed, because that's when the admin URLs are generated and all ModelAdmins need to be registered before that point. <code>autodiscover</code> simply imports all the <code>app.admin</code> modules it can find, and which includes this <code>__init__</code> file.</p>\n<p>Even if we had an <code>AppConfig</code> running <code>autodiscover</code> we'd have to do this import anyway. It's the one downside to having <code>admin</code> be a package instead of a module, and I think it's fine.</p>", "original_commit_id": "83861a0717726e36d0436622d31e051b7b147037", "id": 55098295}