{"body_text": "The geolocation mock tests weren't working when run from the browser console, because the classification (which geolocates the user using our service) was being cached, but the geolocation testcases provide their own mock classifications. They still work fine when manually restarting the browser, though.\nThe right solution is still to not globally cache this stuff for the entire session, but I'm deferring that refactor to a later time.\nThis is so minor I claim only one reviewer is necessary. :P", "labels": [], "number": 614, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-03-15T22:39:43Z", "body_html": "<p>The geolocation mock tests weren't working when run from the browser console, because the classification (which geolocates the user using our service) was being cached, but the geolocation testcases provide their own mock classifications. They still work fine when manually restarting the browser, though.</p>\n<p>The right solution is still to not globally cache this stuff for the entire session, but I'm deferring that refactor to a later time.</p>\n<p>This is so minor I claim only one reviewer is necessary. :P</p>", "id": 214457296, "title": "Clear client classification cache during mock-server test runs.", "pull_request": {"url": "https://api.github.com/repos/mozilla/normandy/pulls/614", "diff_url": "https://github.com/mozilla/normandy/pull/614.diff", "html_url": "https://github.com/mozilla/normandy/pull/614", "patch_url": "https://github.com/mozilla/normandy/pull/614.patch"}, "comments": 0, "state": "closed", "body": "The geolocation mock tests weren't working when run from the browser console, because the classification (which geolocates the user using our service) was being cached, but the geolocation testcases provide their own mock classifications. They still work fine when manually restarting the browser, though.\r\n\r\nThe right solution is still to not globally cache this stuff for the entire session, but I'm deferring that refactor to a later time.\r\n\r\nThis is so minor I claim only one reviewer is necessary. :P", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/614/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/614/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/614/comments", "html_url": "https://github.com/mozilla/normandy/pull/614", "updated_at": "2017-03-15T22:39:45Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/614", "created_at": "2017-03-15T16:56:52Z", "assignees": []}