{"original_position": 11, "diff_hunk": "@@ -10,14 +10,18 @@ XPCOMUtils.defineLazyModuleGetter(this, \"LogManager\",\n   \"resource://shield-recipe-client/lib/LogManager.jsm\");\n XPCOMUtils.defineLazyModuleGetter(this, \"ShieldRecipeClient\",\n   \"resource://shield-recipe-client/lib/ShieldRecipeClient.jsm\");\n+XPCOMUtils.defineLazyModuleGetter(this, \"AboutStudiesProtocol\",\n+  \"resource://shield-recipe-client/lib/AboutStudiesProtocol.jsm\");\n \n this.install = function() {};\n \n this.startup = async function() {\n   await ShieldRecipeClient.startup();\n+  AboutStudiesProtocol.register();", "body_text": "We shouldn't be modifying bootstrap.js if we can avoid it. We should treat ShieldRecipeClient as the entrypoint for anything in the add-on. This is because it is very hard to control when bootstrap runs in tests, and putting everything in another file makes that a lot easier.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/801", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/121003218", "created_at": "2017-06-08T21:28:11Z", "author_association": "MEMBER", "body": "We shouldn't be modifying `bootstrap.js` if we can avoid it. We should treat `ShieldRecipeClient` as the entrypoint for anything in the add-on. This is because it is very hard to control when bootstrap runs in tests, and putting everything in another file makes that a lot easier.", "updated_at": "2017-06-13T20:40:24Z", "html_url": "https://github.com/mozilla/normandy/pull/801#discussion_r121003218", "pull_request_review_id": 43018632, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/121003218"}, "html": {"href": "https://github.com/mozilla/normandy/pull/801#discussion_r121003218"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/801"}}, "commit_id": "7da24d0c71e0f963a6abb0cf65931453775f0801", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "recipe-client-addon/bootstrap.js", "body_html": "<p>We shouldn't be modifying <code>bootstrap.js</code> if we can avoid it. We should treat <code>ShieldRecipeClient</code> as the entrypoint for anything in the add-on. This is because it is very hard to control when bootstrap runs in tests, and putting everything in another file makes that a lot easier.</p>", "original_commit_id": "bc167ffe8d5ebe7fd383d7ed8b8f48853c9a8fd9", "id": 121003218}