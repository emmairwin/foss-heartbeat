{"body_text": "We're planning to run several experiments in the form of Firefox features hidden behind a preference. Normandy's job is to store the experiments we want to run as recipes, filter users by eligibility, flip the preferences on the client, and notify telemetry when users are or aren't enrolled in specific experiments.\nThe spec for changes we need to make to Normandy is at https://docs.google.com/document/d/1_ZAvAHK_weun8sp0tiwF4IE_7dwL2vKkjdI-QgI0GR4/edit#heading=h.rjz7v8qx2ryy.\nArguments\n\nExperiment slug\nLink to experiment doc\nPreference name\nPreference type\nFeature Branches\n\nPreference value\nNumber of buckets to apply to\n\n\n\nAction Behavior\nWhen executed:\n\nIf the user has never participated in the experiment, assign the user to a feature branch and register a new preference-change experiment.\n\nSee #592 for the preference experiment API.\nSee #586 for how feature branch bucketing works.\n\n\nIf the user is currently participating in the experiment, update the last-checked date of the experiment.\nStore the experiment slug in the \u201ccurrent run\u201d list (shared among all preference-experiment recipes)\n\nAlso, the action should register a cleanup function (#590):\n\nFor any experiment slugs in the active experiment list that are not in the current run list, expire them.\nEmpty the current run list.", "labels": [], "number": 587, "assignee": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-03-28T22:35:36Z", "body_html": "<p>We're planning to run several experiments in the form of Firefox features hidden behind a preference. Normandy's job is to store the experiments we want to run as recipes, filter users by eligibility, flip the preferences on the client, and notify telemetry when users are or aren't enrolled in specific experiments.</p>\n<p>The spec for changes we need to make to Normandy is at <a href=\"https://docs.google.com/document/d/1_ZAvAHK_weun8sp0tiwF4IE_7dwL2vKkjdI-QgI0GR4/edit#heading=h.rjz7v8qx2ryy\" rel=\"nofollow\">https://docs.google.com/document/d/1_ZAvAHK_weun8sp0tiwF4IE_7dwL2vKkjdI-QgI0GR4/edit#heading=h.rjz7v8qx2ryy</a>.</p>\n<h2>Arguments</h2>\n<ul>\n<li>Experiment slug</li>\n<li>Link to experiment doc</li>\n<li>Preference name</li>\n<li>Preference type</li>\n<li>Feature Branches\n<ul>\n<li>Preference value</li>\n<li>Number of buckets to apply to</li>\n</ul>\n</li>\n</ul>\n<h2>Action Behavior</h2>\n<p>When executed:</p>\n<ol>\n<li>If the user has never participated in the experiment, assign the user to a feature branch and register a new preference-change experiment.\n<ul>\n<li>See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"212299898\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/592\" href=\"https://github.com/mozilla/normandy/issues/592\">#592</a> for the preference experiment API.</li>\n<li>See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"212294981\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/586\" href=\"https://github.com/mozilla/normandy/issues/586\">#586</a> for how feature branch bucketing works.</li>\n</ul>\n</li>\n<li>If the user is currently participating in the experiment, update the last-checked date of the experiment.</li>\n<li>Store the experiment slug in the \u201ccurrent run\u201d list (shared among all <code>preference-experiment</code> recipes)</li>\n</ol>\n<p>Also, the action should register a cleanup function (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"212298477\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/590\" href=\"https://github.com/mozilla/normandy/issues/590\">#590</a>):</p>\n<ol>\n<li>For any experiment slugs in the active experiment list that are not in the current run list, expire them.</li>\n<li>Empty the current run list.</li>\n</ol>", "id": 212296579, "title": "Preference Experiments Action", "comments": 1, "state": "closed", "body": "We're planning to run several experiments in the form of Firefox features hidden behind a preference. Normandy's job is to store the experiments we want to run as recipes, filter users by eligibility, flip the preferences on the client, and notify telemetry when users are or aren't enrolled in specific experiments.\r\n\r\nThe spec for changes we need to make to Normandy is at https://docs.google.com/document/d/1_ZAvAHK_weun8sp0tiwF4IE_7dwL2vKkjdI-QgI0GR4/edit#heading=h.rjz7v8qx2ryy.\r\n\r\n## Arguments\r\n- Experiment slug\r\n- Link to experiment doc\r\n- Preference name\r\n- Preference type\r\n- Feature Branches\r\n  - Preference value\r\n  - Number of buckets to apply to\r\n\r\n## Action Behavior\r\nWhen executed: \r\n1. If the user has never participated in the experiment, assign the user to a feature branch and register a new preference-change experiment.\r\n   - See #592 for the preference experiment API.\r\n   - See #586 for how feature branch bucketing works.\r\n2. If the user is currently participating in the experiment, update the last-checked date of the experiment.\r\n3. Store the experiment slug in the \u201ccurrent run\u201d list (shared among all `preference-experiment` recipes)\r\n\r\nAlso, the action should register a cleanup function (#590):\r\n   1. For any experiment slugs in the active experiment list that are not in the current run list, expire them.\r\n   2. Empty the current run list.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/587/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/587/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/587/comments", "html_url": "https://github.com/mozilla/normandy/issues/587", "updated_at": "2018-01-30T17:40:32Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/587", "created_at": "2017-03-07T00:47:29Z", "assignees": [{"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}]}