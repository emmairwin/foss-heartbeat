{"body_text": "Below is a profile of running ./manage.py check on stage. It shows that recipe_signatures_are_correct is taking 415 second to execute, which is not ok. Short term we are going to disable this check, but long term we should come up with something better. This could mean making this check faster, or possibly we could change the way we run checks to not run this in the request/response cycle of /__heartbeat__.\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   1072/1    0.038    0.000  424.332  424.332 {built-in method builtins.exec}\n        1    0.000    0.000  424.332  424.332 manage.py:2(<module>)\n        1    0.000    0.000  422.955  422.955 __init__.py:362(execute_from_command_line)\n        1    0.000    0.000  422.955  422.955 __init__.py:286(execute)\n        1    0.000    0.000  418.192  418.192 base.py:277(run_from_argv)\n        1    0.000    0.000  418.188  418.188 __init__.py:38(new_execute)\n        1    0.000    0.000  418.188  418.188 base.py:308(execute)\n        1    0.000    0.000  418.180  418.180 registry.py:64(run_checks)\n        1    0.000    0.000  418.180  418.180 check.py:40(handle)\n        1    0.000    0.000  418.180  418.180 base.py:363(check)\n        1    0.000    0.000  418.180  418.180 base.py:360(_run_checks)\n        1    0.032    0.032  415.497  415.497 checks.py:36(recipe_signatures_are_correct)\n      179    0.005    0.000  401.481    2.243 signing.py:92(verify_signature)\n      716    0.003    0.000  400.737    0.560 ellipticcurve.py:140(__rmul__)\n 1259/901    2.027    0.002  400.735    0.445 ellipticcurve.py:109(__mul__)\n   263608  222.149    0.001  382.215    0.001 numbertheory.py:185(inverse_mod)\n   205710    7.816    0.000  310.590    0.002 ellipticcurve.py:149(double)\n      179    0.044    0.000  278.231    1.554 keys.py:98(verify)\n      179    0.012    0.000  278.183    1.554 keys.py:103(verify_digest)\n      179    0.004    0.000  278.160    1.554 ecdsa.py:93(verifies)\n\nCC @relud", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/P3", "color": "ffa32c", "default": false, "id": 821572185, "name": "P3"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/techdebt", "color": "5319e7", "default": false, "id": 680928120, "name": "techdebt"}], "number": 900, "assignee": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": null, "body_html": "<p>Below is a profile of running <code>./manage.py check</code> on stage. It shows that <code>recipe_signatures_are_correct</code> is taking 415 second to execute, which is not ok. Short term we are going to disable this check, but long term we should come up with something better. This could mean making this check faster, or possibly we could change the way we run checks to not run this in the request/response cycle of <code>/__heartbeat__</code>.</p>\n<pre><code>   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   1072/1    0.038    0.000  424.332  424.332 {built-in method builtins.exec}\n        1    0.000    0.000  424.332  424.332 manage.py:2(&lt;module&gt;)\n        1    0.000    0.000  422.955  422.955 __init__.py:362(execute_from_command_line)\n        1    0.000    0.000  422.955  422.955 __init__.py:286(execute)\n        1    0.000    0.000  418.192  418.192 base.py:277(run_from_argv)\n        1    0.000    0.000  418.188  418.188 __init__.py:38(new_execute)\n        1    0.000    0.000  418.188  418.188 base.py:308(execute)\n        1    0.000    0.000  418.180  418.180 registry.py:64(run_checks)\n        1    0.000    0.000  418.180  418.180 check.py:40(handle)\n        1    0.000    0.000  418.180  418.180 base.py:363(check)\n        1    0.000    0.000  418.180  418.180 base.py:360(_run_checks)\n        1    0.032    0.032  415.497  415.497 checks.py:36(recipe_signatures_are_correct)\n      179    0.005    0.000  401.481    2.243 signing.py:92(verify_signature)\n      716    0.003    0.000  400.737    0.560 ellipticcurve.py:140(__rmul__)\n 1259/901    2.027    0.002  400.735    0.445 ellipticcurve.py:109(__mul__)\n   263608  222.149    0.001  382.215    0.001 numbertheory.py:185(inverse_mod)\n   205710    7.816    0.000  310.590    0.002 ellipticcurve.py:149(double)\n      179    0.044    0.000  278.231    1.554 keys.py:98(verify)\n      179    0.012    0.000  278.183    1.554 keys.py:103(verify_digest)\n      179    0.004    0.000  278.160    1.554 ecdsa.py:93(verifies)\n</code></pre>\n<p>CC <a class=\"user-mention\" href=\"https://github.com/relud\">@relud</a></p>", "id": 244498588, "title": "recipe_signatures_are_correct check is very slow", "comments": 1, "state": "open", "body": "Below is a profile of running `./manage.py check` on stage. It shows that `recipe_signatures_are_correct` is taking 415 second to execute, which is not ok. Short term we are going to disable this check, but long term we should come up with something better. This could mean making this check faster, or possibly we could change the way we run checks to not run this in the request/response cycle of `/__heartbeat__`.\r\n\r\n```\r\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n   1072/1    0.038    0.000  424.332  424.332 {built-in method builtins.exec}\r\n        1    0.000    0.000  424.332  424.332 manage.py:2(<module>)\r\n        1    0.000    0.000  422.955  422.955 __init__.py:362(execute_from_command_line)\r\n        1    0.000    0.000  422.955  422.955 __init__.py:286(execute)\r\n        1    0.000    0.000  418.192  418.192 base.py:277(run_from_argv)\r\n        1    0.000    0.000  418.188  418.188 __init__.py:38(new_execute)\r\n        1    0.000    0.000  418.188  418.188 base.py:308(execute)\r\n        1    0.000    0.000  418.180  418.180 registry.py:64(run_checks)\r\n        1    0.000    0.000  418.180  418.180 check.py:40(handle)\r\n        1    0.000    0.000  418.180  418.180 base.py:363(check)\r\n        1    0.000    0.000  418.180  418.180 base.py:360(_run_checks)\r\n        1    0.032    0.032  415.497  415.497 checks.py:36(recipe_signatures_are_correct)\r\n      179    0.005    0.000  401.481    2.243 signing.py:92(verify_signature)\r\n      716    0.003    0.000  400.737    0.560 ellipticcurve.py:140(__rmul__)\r\n 1259/901    2.027    0.002  400.735    0.445 ellipticcurve.py:109(__mul__)\r\n   263608  222.149    0.001  382.215    0.001 numbertheory.py:185(inverse_mod)\r\n   205710    7.816    0.000  310.590    0.002 ellipticcurve.py:149(double)\r\n      179    0.044    0.000  278.231    1.554 keys.py:98(verify)\r\n      179    0.012    0.000  278.183    1.554 keys.py:103(verify_digest)\r\n      179    0.004    0.000  278.160    1.554 ecdsa.py:93(verifies)\r\n```\r\n\r\nCC @relud", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/900/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/900/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/900/comments", "html_url": "https://github.com/mozilla/normandy/issues/900", "updated_at": "2018-01-30T20:02:26Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/900", "created_at": "2017-07-20T21:13:21Z", "assignees": [{"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}]}