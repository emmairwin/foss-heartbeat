{"body_text": "This is related to #584 in that we require per-action server logic. In this case, we need to make the server compute a custom filter expression for recipes that are a certain type of action, and append it to the other filters on the recipe already.\npreference-experiment actions will use this to filter by sampling buckets. Users will choose the number of buckets they want, and the server will compute a filter expression that:\n\nSplits the userbase into 100,000 buckets, and reserve even chunks of that space for each branch.\nUses the user's unique ID and the experiment slug for the hash\nAt each of those start points, matches users for X buckets, where X is defined in the recipe's arguments per-branch.", "labels": [], "number": 586, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-06-16T20:52:49Z", "body_html": "<p>This is related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"212294246\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/584\" href=\"https://github.com/mozilla/normandy/issues/584\">#584</a> in that we require per-action server logic. In this case, we need to make the server compute a custom filter expression for recipes that are a certain type of action, and append it to the other filters on the recipe already.</p>\n<p><code>preference-experiment</code> actions will use this to filter by sampling buckets. Users will choose the number of buckets they want, and the server will compute a filter expression that:</p>\n<ul>\n<li>Splits the userbase into 100,000 buckets, and reserve even chunks of that space for each branch.</li>\n<li>Uses the user's unique ID and the experiment slug for the hash</li>\n<li>At each of those start points, matches users for X buckets, where X is defined in the recipe's arguments per-branch.</li>\n</ul>", "id": 212294981, "title": "Bucket sampling for preference experiments", "comments": 3, "state": "closed", "body": "This is related to #584 in that we require per-action server logic. In this case, we need to make the server compute a custom filter expression for recipes that are a certain type of action, and append it to the other filters on the recipe already.\r\n\r\n`preference-experiment` actions will use this to filter by sampling buckets. Users will choose the number of buckets they want, and the server will compute a filter expression that:\r\n\r\n- Splits the userbase into 100,000 buckets, and reserve even chunks of that space for each branch.\r\n- Uses the user's unique ID and the experiment slug for the hash\r\n- At each of those start points, matches users for X buckets, where X is defined in the recipe's arguments per-branch.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/586/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/586/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/586/comments", "html_url": "https://github.com/mozilla/normandy/issues/586", "updated_at": "2018-01-30T17:40:31Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/586", "created_at": "2017-03-07T00:37:08Z", "assignees": []}