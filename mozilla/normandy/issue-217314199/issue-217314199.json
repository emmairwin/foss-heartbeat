{"body_text": "Sometimes we get non-ascii headers, and DRF doesn't like that. We should handle this more gracefully, and not raise a 500.\nhttps://sentry.prod.mozaws.net/operations/normandy-prod/issues/333793/\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)\n(8 additional frame(s) were not displayed)\n...\n  File \"rest_framework/views.py\", line 381, in initial\n    neg = self.perform_content_negotiation(request)\n  File \"rest_framework/views.py\", line 296, in perform_content_negotiation\n    return conneg.select_renderer(request, renderers, self.format_kwarg)\n  File \"rest_framework/negotiation.py\", line 55, in select_renderer\n    for media_type_set in order_by_precedence(accepts):\n  File \"rest_framework/utils/mediatypes.py\", line 44, in order_by_precedence\n    precedence = _MediaType(media_type).precedence\n  File \"rest_framework/utils/mediatypes.py\", line 55, in __init__\n    self.full_type, self.params = parse_header(media_type_str.encode(HTTP_HEADER_ENCODING))\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/P3", "color": "ffa32c", "default": false, "id": 821572185, "name": "P3"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/traceback", "color": "5319e7", "default": false, "id": 844334767, "name": "traceback"}], "number": 638, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": null, "body_html": "<p>Sometimes we get non-ascii headers, and DRF doesn't like that. We should handle this more gracefully, and not raise a 500.</p>\n<p><a href=\"https://sentry.prod.mozaws.net/operations/normandy-prod/issues/333793/\" rel=\"nofollow\">https://sentry.prod.mozaws.net/operations/normandy-prod/issues/333793/</a></p>\n<pre><code>UnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)\n(8 additional frame(s) were not displayed)\n...\n  File \"rest_framework/views.py\", line 381, in initial\n    neg = self.perform_content_negotiation(request)\n  File \"rest_framework/views.py\", line 296, in perform_content_negotiation\n    return conneg.select_renderer(request, renderers, self.format_kwarg)\n  File \"rest_framework/negotiation.py\", line 55, in select_renderer\n    for media_type_set in order_by_precedence(accepts):\n  File \"rest_framework/utils/mediatypes.py\", line 44, in order_by_precedence\n    precedence = _MediaType(media_type).precedence\n  File \"rest_framework/utils/mediatypes.py\", line 55, in __init__\n    self.full_type, self.params = parse_header(media_type_str.encode(HTTP_HEADER_ENCODING))\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)\n</code></pre>", "id": 217314199, "title": "UnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)", "comments": 3, "state": "open", "body": "Sometimes we get non-ascii headers, and DRF doesn't like that. We should handle this more gracefully, and not raise a 500.\n\nhttps://sentry.prod.mozaws.net/operations/normandy-prod/issues/333793/\n\n```\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)\n(8 additional frame(s) were not displayed)\n...\n  File \"rest_framework/views.py\", line 381, in initial\n    neg = self.perform_content_negotiation(request)\n  File \"rest_framework/views.py\", line 296, in perform_content_negotiation\n    return conneg.select_renderer(request, renderers, self.format_kwarg)\n  File \"rest_framework/negotiation.py\", line 55, in select_renderer\n    for media_type_set in order_by_precedence(accepts):\n  File \"rest_framework/utils/mediatypes.py\", line 44, in order_by_precedence\n    precedence = _MediaType(media_type).precedence\n  File \"rest_framework/utils/mediatypes.py\", line 55, in __init__\n    self.full_type, self.params = parse_header(media_type_str.encode(HTTP_HEADER_ENCODING))\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb9 in position 0: ordinal not in range(128)\n```", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/638/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/638/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/638/comments", "html_url": "https://github.com/mozilla/normandy/issues/638", "updated_at": "2018-03-07T21:36:03Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/638", "created_at": "2017-03-27T17:13:08Z", "assignees": []}