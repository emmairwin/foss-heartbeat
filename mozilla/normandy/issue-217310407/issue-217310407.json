{"body_text": "It looks like some requests have an undefined method, which is weird. DRF crashes on that. We should  handle this more gracefully.\nhttps://sentry.prod.mozaws.net/operations/normandy-prod/issues/385353/\nKeyError: 'UNDEFINED'\n(7 additional frame(s) were not displayed)\n...\n  File \"rest_framework/views.py\", line 465, in dispatch\n    self.initial(request, *args, **kwargs)\n  File \"rest_framework/views.py\", line 388, in initial\n    self.check_permissions(request)\n  File \"rest_framework/views.py\", line 321, in check_permissions\n    if not permission.has_permission(request, self):\n  File \"rest_framework/permissions.py\", line 129, in has_permission\n    perms = self.get_required_permissions(request.method, queryset.model)\n  File \"rest_framework/permissions.py\", line 111, in get_required_permissions\n    return [perm % kwargs for perm in self.perms_map[method]]\n\nKeyError: 'UNDEFINED'", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}], "number": 636, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-05-17T21:20:37Z", "body_html": "<p>It looks like some requests have an undefined method, which is weird. DRF crashes on that. We should  handle this more gracefully.</p>\n<p><a href=\"https://sentry.prod.mozaws.net/operations/normandy-prod/issues/385353/\" rel=\"nofollow\">https://sentry.prod.mozaws.net/operations/normandy-prod/issues/385353/</a></p>\n<pre><code>KeyError: 'UNDEFINED'\n(7 additional frame(s) were not displayed)\n...\n  File \"rest_framework/views.py\", line 465, in dispatch\n    self.initial(request, *args, **kwargs)\n  File \"rest_framework/views.py\", line 388, in initial\n    self.check_permissions(request)\n  File \"rest_framework/views.py\", line 321, in check_permissions\n    if not permission.has_permission(request, self):\n  File \"rest_framework/permissions.py\", line 129, in has_permission\n    perms = self.get_required_permissions(request.method, queryset.model)\n  File \"rest_framework/permissions.py\", line 111, in get_required_permissions\n    return [perm % kwargs for perm in self.perms_map[method]]\n\nKeyError: 'UNDEFINED'\n</code></pre>", "id": 217310407, "title": "[traceback] DRF crashes when request method is UNDEFINED", "comments": 2, "state": "closed", "body": "It looks like some requests have an undefined method, which is weird. DRF crashes on that. We should  handle this more gracefully.\n\nhttps://sentry.prod.mozaws.net/operations/normandy-prod/issues/385353/\n\n```\nKeyError: 'UNDEFINED'\n(7 additional frame(s) were not displayed)\n...\n  File \"rest_framework/views.py\", line 465, in dispatch\n    self.initial(request, *args, **kwargs)\n  File \"rest_framework/views.py\", line 388, in initial\n    self.check_permissions(request)\n  File \"rest_framework/views.py\", line 321, in check_permissions\n    if not permission.has_permission(request, self):\n  File \"rest_framework/permissions.py\", line 129, in has_permission\n    perms = self.get_required_permissions(request.method, queryset.model)\n  File \"rest_framework/permissions.py\", line 111, in get_required_permissions\n    return [perm % kwargs for perm in self.perms_map[method]]\n\nKeyError: 'UNDEFINED'\n```", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/636/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/636/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/636/comments", "html_url": "https://github.com/mozilla/normandy/issues/636", "updated_at": "2017-05-17T21:20:37Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/636", "created_at": "2017-03-27T16:59:05Z", "assignees": []}