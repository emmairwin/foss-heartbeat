{"body_text": "The API docs offer a way to try out the API by making in the browser, but those requests are blocked by CSP.\nThe CSP error report sent to the server is:\n{\n  \"csp-report\": {\n    \"blocked-uri\": \"self\",\n    \"document-uri\": \"https://normandy.cdn.mozilla.net/api/docs/\",\n    \"original-policy\": \"worker-src 'none'; frame-src 'none'; block-all-mixed-content; object-src 'none'; form-action https://normandy.cdn.mozilla.net; default-src https://normandy.cdn.mozilla.net https://normandy-cloudfront.cdn.mozilla.net/; base-uri 'none'; report-uri https://normandy.cdn.mozilla.net/__cspreport__\",\n    \"referrer\": \"\",\n    \"source-file\": \"https://normandy.cdn.mozilla.net/api/docs/\",\n    \"violated-directive\": \"default-src\"\n  }\n}\nThe violated directive (default-src) is default-src https://normandy.cdn.mozilla.net https://normandy-cloudfront.cdn.mozilla.net/. I'm not sure why that blocked the request. Maybe self needs to be added?", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/P3", "color": "ffa32c", "default": false, "id": 821572185, "name": "P3"}, {"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}], "number": 1206, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": null, "body_html": "<p>The <a href=\"https://normandy.cdn.mozilla.net/api/docs/\" rel=\"nofollow\">API docs</a> offer a way to try out the API by making in the browser, but those requests are blocked by CSP.</p>\n<p>The CSP error report sent to the server is:</p>\n<div class=\"highlight highlight-source-json\"><pre>{\n  <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>csp-report<span class=\"pl-pds\">\"</span></span>: {\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blocked-uri<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>self<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>document-uri<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://normandy.cdn.mozilla.net/api/docs/<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>original-policy<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>worker-src 'none'; frame-src 'none'; block-all-mixed-content; object-src 'none'; form-action https://normandy.cdn.mozilla.net; default-src https://normandy.cdn.mozilla.net https://normandy-cloudfront.cdn.mozilla.net/; base-uri 'none'; report-uri https://normandy.cdn.mozilla.net/__cspreport__<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrer<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>source-file<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://normandy.cdn.mozilla.net/api/docs/<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>violated-directive<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>default-src<span class=\"pl-pds\">\"</span></span>\n  }\n}</pre></div>\n<p>The violated directive (<code>default-src</code>) is <code>default-src https://normandy.cdn.mozilla.net https://normandy-cloudfront.cdn.mozilla.net/</code>. I'm not sure why that blocked the request. Maybe <code>self</code> needs to be added?</p>", "id": 303669900, "title": "CSP blocks \"Try it out\" in API docs", "comments": 0, "state": "open", "body": "The [API docs](https://normandy.cdn.mozilla.net/api/docs/) offer a way to try out the API by making in the browser, but those requests are blocked by CSP. \r\n\r\nThe CSP error report sent to the server is:\r\n\r\n```json\r\n{\r\n  \"csp-report\": {\r\n    \"blocked-uri\": \"self\",\r\n    \"document-uri\": \"https://normandy.cdn.mozilla.net/api/docs/\",\r\n    \"original-policy\": \"worker-src 'none'; frame-src 'none'; block-all-mixed-content; object-src 'none'; form-action https://normandy.cdn.mozilla.net; default-src https://normandy.cdn.mozilla.net https://normandy-cloudfront.cdn.mozilla.net/; base-uri 'none'; report-uri https://normandy.cdn.mozilla.net/__cspreport__\",\r\n    \"referrer\": \"\",\r\n    \"source-file\": \"https://normandy.cdn.mozilla.net/api/docs/\",\r\n    \"violated-directive\": \"default-src\"\r\n  }\r\n}\r\n```\r\n\r\nThe violated directive (`default-src`) is `default-src https://normandy.cdn.mozilla.net https://normandy-cloudfront.cdn.mozilla.net/`. I'm not sure why that blocked the request. Maybe `self` needs to be added?", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/1206/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/1206/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/1206/comments", "html_url": "https://github.com/mozilla/normandy/issues/1206", "updated_at": "2018-03-08T23:28:15Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/1206", "created_at": "2018-03-08T23:25:56Z", "assignees": []}