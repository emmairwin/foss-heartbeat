{"original_position": 5, "diff_hunk": "@@ -11,16 +11,16 @@ RUN curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add -\n     echo 'deb https://deb.nodesource.com/node_8.x jessie main' > /etc/apt/sources.list.d/nodesource.list && \\\n     echo 'deb-src https://deb.nodesource.com/node_8.x jessie main' >> /etc/apt/sources.list.d/nodesource.list && \\\n     apt-get update && apt-get install -y nodejs\n-RUN npm install -g npm@5\n+RUN npm install -g npm@5 && npm install -g yarn@1.0.0", "body_text": "Also, to quote the Yarn website:\n\nInstallation of Yarn via npm is generally not recommended. When installing Yarn with Node-based package managers, the package is not signed, and the only integrity check performed is a basic SHA1 hash, which is a security risk when installing system-wide apps.\nFor these reasons, it is highly recommended that you install Yarn through the installation method best suited to your operating system.\n\nWe can probably install via apt, just like we do for nodejs, using the instructions here (CI runs on Debian-based images).", "in_reply_to_id": 150663014, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1132", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/150665257", "created_at": "2017-11-13T21:08:39Z", "author_association": "MEMBER", "body": "Also, to quote [the Yarn website](https://yarnpkg.com/en/docs/install#alternatives-tab):\r\n\r\n> Installation of Yarn via npm is generally not recommended. When installing Yarn with Node-based package managers, the package is not signed, and the only integrity check performed is a basic SHA1 hash, which is a security risk when installing system-wide apps.\r\n>\r\n> For these reasons, it is highly recommended that you install Yarn through the installation method best suited to your operating system.\r\n\r\nWe can probably install via apt, just like we do for nodejs, using the [instructions here](https://yarnpkg.com/en/docs/install#linux-tab) (CI runs on Debian-based images).", "updated_at": "2017-11-20T19:09:20Z", "html_url": "https://github.com/mozilla/normandy/pull/1132#discussion_r150665257", "pull_request_review_id": 76247022, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/150665257"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1132#discussion_r150665257"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1132"}}, "commit_id": "6a62deef78f3d67bd32938ca57655f0f9151cc76", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "recipe-server/Dockerfile", "body_html": "<p>Also, to quote <a href=\"https://yarnpkg.com/en/docs/install#alternatives-tab\" rel=\"nofollow\">the Yarn website</a>:</p>\n<blockquote>\n<p>Installation of Yarn via npm is generally not recommended. When installing Yarn with Node-based package managers, the package is not signed, and the only integrity check performed is a basic SHA1 hash, which is a security risk when installing system-wide apps.</p>\n<p>For these reasons, it is highly recommended that you install Yarn through the installation method best suited to your operating system.</p>\n</blockquote>\n<p>We can probably install via apt, just like we do for nodejs, using the <a href=\"https://yarnpkg.com/en/docs/install#linux-tab\" rel=\"nofollow\">instructions here</a> (CI runs on Debian-based images).</p>", "original_commit_id": "efc328811a8814fe8570e8e19f3ca0a8c88e95ef", "id": 150665257}