{"original_position": 5, "diff_hunk": "@@ -13,14 +13,18 @@ RUN curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add -\n     apt-get update && apt-get install -y nodejs\n RUN npm install -g npm@5\n \n+RUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n+    echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list", "body_text": "The usage of tee in the docs was likely to make sudo usage possible. Since we don't need sudo, it would probably be best to do this the same way we do the nodesource repositories above, with simple shell redirection.\nIt would also be good to add this to the RUN command on line 10, so we don't add more steps to the docker file (which makes builds slower and the Docker image's file size larger)", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1132", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/151202203", "created_at": "2017-11-15T17:49:15Z", "author_association": "MEMBER", "body": "The usage of `tee` in the docs was likely to make sudo usage possible. Since we don't need sudo, it would probably be best to do this the same way we do the nodesource repositories above, with simple shell redirection.\r\n\r\nIt would also be good to add this to the `RUN` command on line 10, so we don't add more steps to the docker file (which makes builds slower and the Docker image's file size larger)", "updated_at": "2017-11-20T19:09:20Z", "html_url": "https://github.com/mozilla/normandy/pull/1132#discussion_r151202203", "pull_request_review_id": 76872151, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/151202203"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1132#discussion_r151202203"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1132"}}, "commit_id": "6a62deef78f3d67bd32938ca57655f0f9151cc76", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "recipe-server/Dockerfile", "body_html": "<p>The usage of <code>tee</code> in the docs was likely to make sudo usage possible. Since we don't need sudo, it would probably be best to do this the same way we do the nodesource repositories above, with simple shell redirection.</p>\n<p>It would also be good to add this to the <code>RUN</code> command on line 10, so we don't add more steps to the docker file (which makes builds slower and the Docker image's file size larger)</p>", "original_commit_id": "28b0901f6d54e4bc5a2a38eb412ffe0ca594e305", "id": 151202203}