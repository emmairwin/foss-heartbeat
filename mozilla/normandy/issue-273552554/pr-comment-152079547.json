{"original_position": 13, "diff_hunk": "@@ -10,17 +10,17 @@ RUN apt-get update && \\\n RUN curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add - && \\\n     echo 'deb https://deb.nodesource.com/node_8.x jessie main' > /etc/apt/sources.list.d/nodesource.list && \\\n     echo 'deb-src https://deb.nodesource.com/node_8.x jessie main' >> /etc/apt/sources.list.d/nodesource.list && \\\n-    apt-get update && apt-get install -y nodejs\n-RUN npm install -g npm@5\n+    apt-get update && apt-get install -y nodejs && \\\n+    curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - && \\\n+    echo 'deb https://dl.yarnpkg.com/debian/ stable main' > /etc/apt/sources.list.d/yarn.list && \\\n+    apt-get update && apt-get install yarn\n \n-COPY ./requirements /app/requirements\n-COPY ./package.json /app/package.json\n+COPY . /app", "body_text": "Do we need to keep the vendor post-install step?\n\nNot really. I had envisioned it being useful as we add new packages, but it indeed has become more of a hassle than anything. I've removed it from the package.json and reverted the COPY stuff in the Dockerfile. I also removed an errant yarn dependency I found in the package.json.", "in_reply_to_id": 152071924, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1132", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/152079547", "created_at": "2017-11-20T18:55:37Z", "author_association": "CONTRIBUTOR", "body": "> Do we need to keep the vendor post-install step?\r\n\r\nNot really. I had envisioned it being useful as we add new packages, but it indeed has become more of a hassle than anything. I've removed it from the `package.json` and reverted the `COPY` stuff in the Dockerfile. I also removed an errant `yarn` dependency I found in the `package.json`.", "updated_at": "2017-11-20T19:09:20Z", "html_url": "https://github.com/mozilla/normandy/pull/1132#discussion_r152079547", "pull_request_review_id": 77886041, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/152079547"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1132#discussion_r152079547"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1132"}}, "commit_id": "6a62deef78f3d67bd32938ca57655f0f9151cc76", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "position": null, "path": "recipe-server/Dockerfile", "body_html": "<blockquote>\n<p>Do we need to keep the vendor post-install step?</p>\n</blockquote>\n<p>Not really. I had envisioned it being useful as we add new packages, but it indeed has become more of a hassle than anything. I've removed it from the <code>package.json</code> and reverted the <code>COPY</code> stuff in the Dockerfile. I also removed an errant <code>yarn</code> dependency I found in the <code>package.json</code>.</p>", "original_commit_id": "980e64e4fbd49cef9e1c3d2186cf308d273236de", "id": 152079547}