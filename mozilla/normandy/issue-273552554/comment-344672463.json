{"body": "Errors like `Error removing intermediate container 0323957910e5...` aren't concerning, they are due to a limitation in CircleCI's docker configuration.\r\n\r\nThere isn't a perfect way to run CI locally, but executing the scripts in `bin/ci/` can get pretty close. In this case you'd probably only need to run `bin/ci/dependencies`.\r\n\r\nAs for what the actual error is: it is buried in the rest of the output, and my usual strategy is to search for the string \"fail:\" (with the colon, it almost always matches our failures). With that, I found this:\r\n\r\n```\r\nStep 8 : RUN apt-get update && apt-get install yarn\r\n ---> Running in 3cb55cc0c75c\r\nE: Type 'OK' is not known on line 1 in source list /etc/apt/sources.list.d/yarn.list\r\nE: The list of sources could not be read.\r\nThe command '/bin/sh -c apt-get update && apt-get install yarn' returned a non-zero code: 100\r\nFAIL: dependencies for recipe-server\r\n```\r\n\r\nwhich looks to me like something went wrong adding the yarn sources. You should be able to reproduce this failure just by building the docker container by running `docker build .` in the `normandy/recipe-server` directory.", "body_text": "Errors like Error removing intermediate container 0323957910e5... aren't concerning, they are due to a limitation in CircleCI's docker configuration.\nThere isn't a perfect way to run CI locally, but executing the scripts in bin/ci/ can get pretty close. In this case you'd probably only need to run bin/ci/dependencies.\nAs for what the actual error is: it is buried in the rest of the output, and my usual strategy is to search for the string \"fail:\" (with the colon, it almost always matches our failures). With that, I found this:\nStep 8 : RUN apt-get update && apt-get install yarn\n ---> Running in 3cb55cc0c75c\nE: Type 'OK' is not known on line 1 in source list /etc/apt/sources.list.d/yarn.list\nE: The list of sources could not be read.\nThe command '/bin/sh -c apt-get update && apt-get install yarn' returned a non-zero code: 100\nFAIL: dependencies for recipe-server\n\nwhich looks to me like something went wrong adding the yarn sources. You should be able to reproduce this failure just by building the docker container by running docker build . in the normandy/recipe-server directory.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/344672463", "created_at": "2017-11-15T17:46:59Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/pull/1132#issuecomment-344672463", "updated_at": "2017-11-15T17:46:59Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "body_html": "<p>Errors like <code>Error removing intermediate container 0323957910e5...</code> aren't concerning, they are due to a limitation in CircleCI's docker configuration.</p>\n<p>There isn't a perfect way to run CI locally, but executing the scripts in <code>bin/ci/</code> can get pretty close. In this case you'd probably only need to run <code>bin/ci/dependencies</code>.</p>\n<p>As for what the actual error is: it is buried in the rest of the output, and my usual strategy is to search for the string \"fail:\" (with the colon, it almost always matches our failures). With that, I found this:</p>\n<pre><code>Step 8 : RUN apt-get update &amp;&amp; apt-get install yarn\n ---&gt; Running in 3cb55cc0c75c\nE: Type 'OK' is not known on line 1 in source list /etc/apt/sources.list.d/yarn.list\nE: The list of sources could not be read.\nThe command '/bin/sh -c apt-get update &amp;&amp; apt-get install yarn' returned a non-zero code: 100\nFAIL: dependencies for recipe-server\n</code></pre>\n<p>which looks to me like something went wrong adding the yarn sources. You should be able to reproduce this failure just by building the docker container by running <code>docker build .</code> in the <code>normandy/recipe-server</code> directory.</p>", "id": 344672463, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/1132"}