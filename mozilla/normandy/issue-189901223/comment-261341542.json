{"body": "> Plan for this is to use a least-recently-used map (link) that tracks when heartbeats were last run. In theory, we can use this to pull the ID of the heartbeat that should run next, and store the state in localStorage.\n\nHuh, why do you need to store the heartbeats locally? The intent was to have show-heartbeat just abort early if they can't run (if another show-heartbeat has run recently). It's not important that we log that heartbeat and show it later; if a heartbeat action fails on Monday due to collision, and isn't being sent out on Tuesday, then the user in question just shouldn't see it. No need to guarantee display.\n", "body_text": "Plan for this is to use a least-recently-used map (link) that tracks when heartbeats were last run. In theory, we can use this to pull the ID of the heartbeat that should run next, and store the state in localStorage.\n\nHuh, why do you need to store the heartbeats locally? The intent was to have show-heartbeat just abort early if they can't run (if another show-heartbeat has run recently). It's not important that we log that heartbeat and show it later; if a heartbeat action fails on Monday due to collision, and isn't being sent out on Tuesday, then the user in question just shouldn't see it. No need to guarantee display.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/261341542", "created_at": "2016-11-17T19:18:44Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/issues/348#issuecomment-261341542", "updated_at": "2016-11-17T19:18:44Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "body_html": "<blockquote>\n<p>Plan for this is to use a least-recently-used map (link) that tracks when heartbeats were last run. In theory, we can use this to pull the ID of the heartbeat that should run next, and store the state in localStorage.</p>\n</blockquote>\n<p>Huh, why do you need to store the heartbeats locally? The intent was to have show-heartbeat just abort early if they can't run (if another show-heartbeat has run recently). It's not important that we log that heartbeat and show it later; if a heartbeat action fails on Monday due to collision, and isn't being sent out on Tuesday, then the user in question just shouldn't see it. No need to guarantee display.</p>", "id": 261341542, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/348"}