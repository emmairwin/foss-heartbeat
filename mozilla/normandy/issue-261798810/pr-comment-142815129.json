{"original_position": 32, "diff_hunk": "@@ -39,88 +39,144 @@ Cu.importGlobalProperties([\"fetch\"]);\n this.EXPORTED_SYMBOLS = [\"RecipeRunner\"];\n \n const log = LogManager.getLogger(\"recipe-runner\");\n-const prefs = Services.prefs.getBranch(\"extensions.shield-recipe-client.\");\n const TIMER_NAME = \"recipe-client-addon-run\";\n-const RUN_INTERVAL_PREF = \"run_interval_seconds\";\n-const FIRST_RUN_PREF = \"first_run\";\n const PREF_CHANGED_TOPIC = \"nsPref:changed\";\n \n+const TELEMETRY_ENABLED_PREF = \"toolkit.telemetry.unified\";\n+\n+const SHIELD_PREF_PREFIX = \"extensions.shield-recipe-client\";\n+const RUN_INTERVAL_PREF = `${SHIELD_PREF_PREFIX}.run_interval_seconds`;\n+const FIRST_RUN_PREF = `${SHIELD_PREF_PREFIX}.first_run`;\n+const SHIELD_ENABLED_PREF = `${SHIELD_PREF_PREFIX}.enabled`;\n+const DEV_MODE_PREF = `${SHIELD_PREF_PREFIX}.dev_mode`;\n+const API_URL_PREF = `${SHIELD_PREF_PREFIX}.api_url`;\n+const LAZY_CLASSIFY_PREF = `${SHIELD_PREF_PREFIX}.experiments.lazy_classify`;\n+\n+const PREFS_TO_WATCH = [\n+  RUN_INTERVAL_PREF,\n+  TELEMETRY_ENABLED_PREF,\n+  SHIELD_ENABLED_PREF,\n+  API_URL_PREF,\n+];\n+\n this.RecipeRunner = {\n   async init() {\n-    if (!this.checkPrefs()) {\n-      return;\n-    }\n+    this.enabled = null;", "body_text": "I think the changes we want to enable and disable below necessitates keeping this bit of state. Sorry 'bout your mantra.", "in_reply_to_id": 142549060, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/1080", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/142815129", "created_at": "2017-10-04T23:03:14Z", "author_association": "MEMBER", "body": "I think the changes we want to enable and disable below necessitates keeping this bit of state. Sorry 'bout your mantra.", "updated_at": "2017-10-17T23:40:17Z", "html_url": "https://github.com/mozilla/normandy/pull/1080#discussion_r142815129", "pull_request_review_id": 67232487, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/142815129"}, "html": {"href": "https://github.com/mozilla/normandy/pull/1080#discussion_r142815129"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/1080"}}, "commit_id": "256f439bd54cc922e7ccf6f536b1c271191953a7", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": 32, "path": "recipe-client-addon/lib/RecipeRunner.jsm", "body_html": "<p>I think the changes we want to enable and disable below necessitates keeping this bit of state. Sorry 'bout your mantra.</p>", "original_commit_id": "cb52c6f500dbe6a01a5bee8dc1af3e7b753ab7d7", "id": 142815129}