{"body": "After discussing this a bit, I think it is better to simply assert that the signatures are correct, instead of asserting the entire object is the same every time. I've update the test, and the test errors are below.\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n_________ normandy/recipes/tests/test_api.py::test_full_approval_flow __________\r\nnormandy/recipes/tests/test_api.py:750: in test_full_approval_flow\r\n    mocked_autograph.verify_api_pair(signed_data_3[0])\r\nnormandy/conftest.py:49: in verify_api_pair\r\n    assert actual_signature == expected_signature\r\nE   assert 'f24374d6da17...2919c6c5bf69d' == 'bd2015b9e91c0...291c217c75ea0'\r\nE     - f24374d6da1782716ca2a2ff0e8bed767f0659b18ac7c65f87a2919c6c5bf69d\r\nE     + bd2015b9e91c0dc838960a90e5c1e6b0d486b4f2491edff433b291c217c75ea0\r\n----------------------------- Captured stderr call -----------------------------\r\nINFO 2017-04-11 23:35:22,816 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\r\nINFO 2017-04-11 23:35:22,819 normandy.recipes.models Creating new revision for recipe ID [190]\r\nINFO 2017-04-11 23:35:22,822 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\r\nINFO 2017-04-11 23:35:22,835 request.summary \r\nINFO 2017-04-11 23:35:22,838 request.summary \r\nINFO 2017-04-11 23:35:22,841 request.summary \r\nINFO 2017-04-11 23:35:22,846 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\r\nINFO 2017-04-11 23:35:22,860 request.summary \r\nINFO 2017-04-11 23:35:22,874 request.summary \r\nINFO 2017-04-11 23:35:22,889 request.summary \r\nINFO 2017-04-11 23:35:22,911 normandy.recipes.models Creating new revision for recipe ID [190]\r\nINFO 2017-04-11 23:35:22,916 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\r\nINFO 2017-04-11 23:35:22,932 request.summary \r\nINFO 2017-04-11 23:35:22,944 request.summary \r\nINFO 2017-04-11 23:35:22,958 request.summary \r\nINFO 2017-04-11 23:35:22,962 request.summary \r\nINFO 2017-04-11 23:35:22,976 request.summary \r\nINFO 2017-04-11 23:35:22,991 request.summary \r\n!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!\r\n```", "body_text": "After discussing this a bit, I think it is better to simply assert that the signatures are correct, instead of asserting the entire object is the same every time. I've update the test, and the test errors are below.\n=================================== FAILURES ===================================\n_________ normandy/recipes/tests/test_api.py::test_full_approval_flow __________\nnormandy/recipes/tests/test_api.py:750: in test_full_approval_flow\n    mocked_autograph.verify_api_pair(signed_data_3[0])\nnormandy/conftest.py:49: in verify_api_pair\n    assert actual_signature == expected_signature\nE   assert 'f24374d6da17...2919c6c5bf69d' == 'bd2015b9e91c0...291c217c75ea0'\nE     - f24374d6da1782716ca2a2ff0e8bed767f0659b18ac7c65f87a2919c6c5bf69d\nE     + bd2015b9e91c0dc838960a90e5c1e6b0d486b4f2491edff433b291c217c75ea0\n----------------------------- Captured stderr call -----------------------------\nINFO 2017-04-11 23:35:22,816 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,819 normandy.recipes.models Creating new revision for recipe ID [190]\nINFO 2017-04-11 23:35:22,822 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,835 request.summary \nINFO 2017-04-11 23:35:22,838 request.summary \nINFO 2017-04-11 23:35:22,841 request.summary \nINFO 2017-04-11 23:35:22,846 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,860 request.summary \nINFO 2017-04-11 23:35:22,874 request.summary \nINFO 2017-04-11 23:35:22,889 request.summary \nINFO 2017-04-11 23:35:22,911 normandy.recipes.models Creating new revision for recipe ID [190]\nINFO 2017-04-11 23:35:22,916 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,932 request.summary \nINFO 2017-04-11 23:35:22,944 request.summary \nINFO 2017-04-11 23:35:22,958 request.summary \nINFO 2017-04-11 23:35:22,962 request.summary \nINFO 2017-04-11 23:35:22,976 request.summary \nINFO 2017-04-11 23:35:22,991 request.summary \n!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/293430787", "created_at": "2017-04-11T23:37:52Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/pull/682#issuecomment-293430787", "updated_at": "2017-04-11T23:37:52Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "body_html": "<p>After discussing this a bit, I think it is better to simply assert that the signatures are correct, instead of asserting the entire object is the same every time. I've update the test, and the test errors are below.</p>\n<pre><code>=================================== FAILURES ===================================\n_________ normandy/recipes/tests/test_api.py::test_full_approval_flow __________\nnormandy/recipes/tests/test_api.py:750: in test_full_approval_flow\n    mocked_autograph.verify_api_pair(signed_data_3[0])\nnormandy/conftest.py:49: in verify_api_pair\n    assert actual_signature == expected_signature\nE   assert 'f24374d6da17...2919c6c5bf69d' == 'bd2015b9e91c0...291c217c75ea0'\nE     - f24374d6da1782716ca2a2ff0e8bed767f0659b18ac7c65f87a2919c6c5bf69d\nE     + bd2015b9e91c0dc838960a90e5c1e6b0d486b4f2491edff433b291c217c75ea0\n----------------------------- Captured stderr call -----------------------------\nINFO 2017-04-11 23:35:22,816 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,819 normandy.recipes.models Creating new revision for recipe ID [190]\nINFO 2017-04-11 23:35:22,822 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,835 request.summary \nINFO 2017-04-11 23:35:22,838 request.summary \nINFO 2017-04-11 23:35:22,841 request.summary \nINFO 2017-04-11 23:35:22,846 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,860 request.summary \nINFO 2017-04-11 23:35:22,874 request.summary \nINFO 2017-04-11 23:35:22,889 request.summary \nINFO 2017-04-11 23:35:22,911 normandy.recipes.models Creating new revision for recipe ID [190]\nINFO 2017-04-11 23:35:22,916 normandy.recipes.models Requesting signatures for recipes with ids [190] from Autograph\nINFO 2017-04-11 23:35:22,932 request.summary \nINFO 2017-04-11 23:35:22,944 request.summary \nINFO 2017-04-11 23:35:22,958 request.summary \nINFO 2017-04-11 23:35:22,962 request.summary \nINFO 2017-04-11 23:35:22,976 request.summary \nINFO 2017-04-11 23:35:22,991 request.summary \n!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!\n</code></pre>", "id": 293430787, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/682"}