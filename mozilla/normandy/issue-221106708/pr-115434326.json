{"deletions": 12, "merge_commit_sha": "a4015a039e2567b2ac1e054c5e7fdcf266d2bb58", "additions": 81, "labels": [], "number": 682, "assignee": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "mergeable": null, "closed_at": "2017-04-12T02:51:31Z", "requested_reviewers": [], "statuses_url": "https://api.github.com/repos/mozilla/normandy/statuses/c2045410c9221a6aadae9c20c9dfe0d75dd3720b", "id": 115434326, "maintainer_can_modify": false, "title": "recipe-server: Add test for signing consistency during approval.", "body_text": "This test is currently failing with the below traceback. @Osmose, @rehandalal does this looks like a correct test? If so, we can start in on fixing it.\n_________ normandy/recipes/tests/test_api.py::test_full_approval_flow __________\nnormandy/recipes/tests/test_api.py:730: in test_full_approval_flow\n    assert res.json() == signed_data_1\nE   assert [{'recipe': {...'x5u': None}}] == [{'recipe': {'...'x5u': None}}]\nE     At index 0 diff: {'recipe': {'action': '\u0111PjUlwrrgnTAY', 'approval_request': None, 'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'arguments': {}, 'channels': [], 'countries': [], 'enabled': False, 'extra_filter_expression': 'counter == 0', 'filter_expression': 'counter == 0', 'id': 94, 'is_approved': True, 'last_updated': '2017-04-11T23:11:21.300314Z', 'latest_revision_id': 'c6c6e466e8c551c7ed8f4b3e021433164ea195d159d414e0dead92620b7a099a', 'locales': [], 'name': 'test recipe', 'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'}, 'signature': {'public_key': '', 'signature': '343230392a94cbf7f237eaf631240a6c506f4f23e40273c9be0529870c7b1bb3', 'timestamp': '2017-04-11T23:11:21.403831Z', 'x5u': None}} != {'recipe': {'action': '\u0111PjUlwrrgnTAY', 'approval_request': {'approved': True, 'approver': {'email': 'test73@example.com', 'first_name': '', 'id': 152, 'last_name': ''}, 'comment': 'r+', 'created': '2017-04-11T23:11:21.317127Z', 'creator': {'email': 'test72@example.com', 'first_name': '', 'id': 151, 'last_name': ''}, 'id': 30}, 'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'arguments': {}, 'channels': [], 'countries': [], 'enabled': False, 'extra_filter_expression': 'counter == 0', 'filter_expression': 'counter == 0', 'id': 94, 'is_approved': True, 'last_updated': '2017-04-11T23:11:21.300314Z', 'latest_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'locales': [], 'name': 'test recipe', 'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'}, 'signature': {'public_key': '', 'signature': '0d60a6d4776cfa6a6c4135d1c14d4dc552b9b1745228379bdfa0f94941773696', 'timestamp': '2017-04-11T23:11:21.336857Z', 'x5u': None}}\nE     Full diff:\nE     [{'recipe': {'action': '\u0111PjUlwrrgnTAY',\nE     -              'approval_request': None,\nE     ?                                  ^ ^\nE     +              'approval_request': {'approved': True,\nE     ?                                  ^^^^^^ ^^^^^^^^^\nE     +                                   'approver': {'email': 'test73@example.com',\nE     +                                                'first_name': '',\nE     +                                                'id': 152,\nE     +                                                'last_name': ''},\nE     +                                   'comment': 'r+',\nE     +                                   'created': '2017-04-11T23:11:21.317127Z',\nE     +                                   'creator': {'email': 'test72@example.com',\nE     +                                               'first_name': '',\nE     +                                               'id': 151,\nE     +                                               'last_name': ''},\nE     +                                   'id': 30},\nE     'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4',\nE     'arguments': {},\nE     'channels': [],\nE     'countries': [],\nE     'enabled': False,\nE     'extra_filter_expression': 'counter == 0',\nE     'filter_expression': 'counter == 0',\nE     'id': 94,\nE     'is_approved': True,\nE     'last_updated': '2017-04-11T23:11:21.300314Z',\nE     -              'latest_revision_id': 'c6c6e466e8c551c7ed8f4b3e021433164ea195d159d414e0dead92620b7a099a',\nE     +              'latest_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4',\nE     'locales': [],\nE     'name': 'test recipe',\nE     'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'},\nE     'signature': {'public_key': '',\nE     -                 'signature': '343230392a94cbf7f237eaf631240a6c506f4f23e40273c9be0529870c7b1bb3',\nE     +                 'signature': '0d60a6d4776cfa6a6c4135d1c14d4dc552b9b1745228379bdfa0f94941773696',\nE     -                 'timestamp': '2017-04-11T23:11:21.403831Z',\nE     ?                                                   --  ^^\nE     +                 'timestamp': '2017-04-11T23:11:21.336857Z',\nE     ?                                                    ++ ^^\nE     'x5u': None}}]\n----------------------------- Captured stderr call -----------------------------\nINFO 2017-04-11 23:11:21,294 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,297 normandy.recipes.models Creating new revision for recipe ID [94]\nINFO 2017-04-11 23:11:21,301 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,314 request.summary \nINFO 2017-04-11 23:11:21,318 request.summary \nINFO 2017-04-11 23:11:21,321 request.summary \nINFO 2017-04-11 23:11:21,326 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,339 request.summary \nINFO 2017-04-11 23:11:21,352 request.summary \nINFO 2017-04-11 23:11:21,367 request.summary \nINFO 2017-04-11 23:11:21,390 normandy.recipes.models Creating new revision for recipe ID [94]\nINFO 2017-04-11 23:11:21,395 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,410 request.summary \nINFO 2017-04-11 23:11:21,423 request.summary \nINFO 2017-04-11 23:11:21,436 request.summary \n!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!", "comments": 5, "merged_at": "2017-04-12T02:51:31Z", "state": "closed", "_links": {"review_comment": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/682/commits"}, "self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/682"}, "review_comments": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/682/comments"}, "html": {"href": "https://github.com/mozilla/normandy/pull/682"}, "comments": {"href": "https://api.github.com/repos/mozilla/normandy/issues/682/comments"}, "issue": {"href": "https://api.github.com/repos/mozilla/normandy/issues/682"}, "statuses": {"href": "https://api.github.com/repos/mozilla/normandy/statuses/c2045410c9221a6aadae9c20c9dfe0d75dd3720b"}}, "changed_files": 5, "diff_url": "https://github.com/mozilla/normandy/pull/682.diff", "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/682", "body": "This test is currently failing with the below traceback. @Osmose, @rehandalal does this looks like a correct test? If so, we can start in on fixing it.\r\n\r\n```\r\n_________ normandy/recipes/tests/test_api.py::test_full_approval_flow __________\r\nnormandy/recipes/tests/test_api.py:730: in test_full_approval_flow\r\n    assert res.json() == signed_data_1\r\nE   assert [{'recipe': {...'x5u': None}}] == [{'recipe': {'...'x5u': None}}]\r\nE     At index 0 diff: {'recipe': {'action': '\u0111PjUlwrrgnTAY', 'approval_request': None, 'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'arguments': {}, 'channels': [], 'countries': [], 'enabled': False, 'extra_filter_expression': 'counter == 0', 'filter_expression': 'counter == 0', 'id': 94, 'is_approved': True, 'last_updated': '2017-04-11T23:11:21.300314Z', 'latest_revision_id': 'c6c6e466e8c551c7ed8f4b3e021433164ea195d159d414e0dead92620b7a099a', 'locales': [], 'name': 'test recipe', 'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'}, 'signature': {'public_key': '', 'signature': '343230392a94cbf7f237eaf631240a6c506f4f23e40273c9be0529870c7b1bb3', 'timestamp': '2017-04-11T23:11:21.403831Z', 'x5u': None}} != {'recipe': {'action': '\u0111PjUlwrrgnTAY', 'approval_request': {'approved': True, 'approver': {'email': 'test73@example.com', 'first_name': '', 'id': 152, 'last_name': ''}, 'comment': 'r+', 'created': '2017-04-11T23:11:21.317127Z', 'creator': {'email': 'test72@example.com', 'first_name': '', 'id': 151, 'last_name': ''}, 'id': 30}, 'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'arguments': {}, 'channels': [], 'countries': [], 'enabled': False, 'extra_filter_expression': 'counter == 0', 'filter_expression': 'counter == 0', 'id': 94, 'is_approved': True, 'last_updated': '2017-04-11T23:11:21.300314Z', 'latest_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'locales': [], 'name': 'test recipe', 'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'}, 'signature': {'public_key': '', 'signature': '0d60a6d4776cfa6a6c4135d1c14d4dc552b9b1745228379bdfa0f94941773696', 'timestamp': '2017-04-11T23:11:21.336857Z', 'x5u': None}}\r\nE     Full diff:\r\nE     [{'recipe': {'action': '\u0111PjUlwrrgnTAY',\r\nE     -              'approval_request': None,\r\nE     ?                                  ^ ^\r\nE     +              'approval_request': {'approved': True,\r\nE     ?                                  ^^^^^^ ^^^^^^^^^\r\nE     +                                   'approver': {'email': 'test73@example.com',\r\nE     +                                                'first_name': '',\r\nE     +                                                'id': 152,\r\nE     +                                                'last_name': ''},\r\nE     +                                   'comment': 'r+',\r\nE     +                                   'created': '2017-04-11T23:11:21.317127Z',\r\nE     +                                   'creator': {'email': 'test72@example.com',\r\nE     +                                               'first_name': '',\r\nE     +                                               'id': 151,\r\nE     +                                               'last_name': ''},\r\nE     +                                   'id': 30},\r\nE     'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4',\r\nE     'arguments': {},\r\nE     'channels': [],\r\nE     'countries': [],\r\nE     'enabled': False,\r\nE     'extra_filter_expression': 'counter == 0',\r\nE     'filter_expression': 'counter == 0',\r\nE     'id': 94,\r\nE     'is_approved': True,\r\nE     'last_updated': '2017-04-11T23:11:21.300314Z',\r\nE     -              'latest_revision_id': 'c6c6e466e8c551c7ed8f4b3e021433164ea195d159d414e0dead92620b7a099a',\r\nE     +              'latest_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4',\r\nE     'locales': [],\r\nE     'name': 'test recipe',\r\nE     'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'},\r\nE     'signature': {'public_key': '',\r\nE     -                 'signature': '343230392a94cbf7f237eaf631240a6c506f4f23e40273c9be0529870c7b1bb3',\r\nE     +                 'signature': '0d60a6d4776cfa6a6c4135d1c14d4dc552b9b1745228379bdfa0f94941773696',\r\nE     -                 'timestamp': '2017-04-11T23:11:21.403831Z',\r\nE     ?                                                   --  ^^\r\nE     +                 'timestamp': '2017-04-11T23:11:21.336857Z',\r\nE     ?                                                    ++ ^^\r\nE     'x5u': None}}]\r\n----------------------------- Captured stderr call -----------------------------\r\nINFO 2017-04-11 23:11:21,294 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\r\nINFO 2017-04-11 23:11:21,297 normandy.recipes.models Creating new revision for recipe ID [94]\r\nINFO 2017-04-11 23:11:21,301 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\r\nINFO 2017-04-11 23:11:21,314 request.summary \r\nINFO 2017-04-11 23:11:21,318 request.summary \r\nINFO 2017-04-11 23:11:21,321 request.summary \r\nINFO 2017-04-11 23:11:21,326 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\r\nINFO 2017-04-11 23:11:21,339 request.summary \r\nINFO 2017-04-11 23:11:21,352 request.summary \r\nINFO 2017-04-11 23:11:21,367 request.summary \r\nINFO 2017-04-11 23:11:21,390 normandy.recipes.models Creating new revision for recipe ID [94]\r\nINFO 2017-04-11 23:11:21,395 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\r\nINFO 2017-04-11 23:11:21,410 request.summary \r\nINFO 2017-04-11 23:11:21,423 request.summary \r\nINFO 2017-04-11 23:11:21,436 request.summary \r\n!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!\r\n```", "head": {"repo": {"issues_url": "https://api.github.com/repos/mythmon/normandy/issues{/number}", "deployments_url": "https://api.github.com/repos/mythmon/normandy/deployments", "stargazers_count": 0, "forks_url": "https://api.github.com/repos/mythmon/normandy/forks", "mirror_url": null, "subscription_url": "https://api.github.com/repos/mythmon/normandy/subscription", "notifications_url": "https://api.github.com/repos/mythmon/normandy/notifications{?since,all,participating}", "collaborators_url": "https://api.github.com/repos/mythmon/normandy/collaborators{/collaborator}", "updated_at": "2018-02-06T20:23:52Z", "private": false, "pulls_url": "https://api.github.com/repos/mythmon/normandy/pulls{/number}", "issue_comment_url": "https://api.github.com/repos/mythmon/normandy/issues/comments{/number}", "labels_url": "https://api.github.com/repos/mythmon/normandy/labels{/name}", "has_wiki": false, "full_name": "mythmon/normandy", "owner": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "statuses_url": "https://api.github.com/repos/mythmon/normandy/statuses/{sha}", "id": 49591352, "keys_url": "https://api.github.com/repos/mythmon/normandy/keys{/key_id}", "description": "Firefox recipe server", "tags_url": "https://api.github.com/repos/mythmon/normandy/tags", "archived": false, "downloads_url": "https://api.github.com/repos/mythmon/normandy/downloads", "assignees_url": "https://api.github.com/repos/mythmon/normandy/assignees{/user}", "contents_url": "https://api.github.com/repos/mythmon/normandy/contents/{+path}", "has_pages": false, "git_refs_url": "https://api.github.com/repos/mythmon/normandy/git/refs{/sha}", "open_issues_count": 0, "has_projects": false, "clone_url": "https://github.com/mythmon/normandy.git", "watchers_count": 0, "git_tags_url": "https://api.github.com/repos/mythmon/normandy/git/tags{/sha}", "milestones_url": "https://api.github.com/repos/mythmon/normandy/milestones{/number}", "languages_url": "https://api.github.com/repos/mythmon/normandy/languages", "size": 5979, "homepage": "http://normandy.readthedocs.org/", "fork": true, "commits_url": "https://api.github.com/repos/mythmon/normandy/commits{/sha}", "releases_url": "https://api.github.com/repos/mythmon/normandy/releases{/id}", "issue_events_url": "https://api.github.com/repos/mythmon/normandy/issues/events{/number}", "archive_url": "https://api.github.com/repos/mythmon/normandy/{archive_format}{/ref}", "comments_url": "https://api.github.com/repos/mythmon/normandy/comments{/number}", "events_url": "https://api.github.com/repos/mythmon/normandy/events", "contributors_url": "https://api.github.com/repos/mythmon/normandy/contributors", "html_url": "https://github.com/mythmon/normandy", "forks": 0, "compare_url": "https://api.github.com/repos/mythmon/normandy/compare/{base}...{head}", "open_issues": 0, "watchers": 0, "git_url": "git://github.com/mythmon/normandy.git", "svn_url": "https://github.com/mythmon/normandy", "merges_url": "https://api.github.com/repos/mythmon/normandy/merges", "has_issues": false, "ssh_url": "git@github.com:mythmon/normandy.git", "blobs_url": "https://api.github.com/repos/mythmon/normandy/git/blobs{/sha}", "git_commits_url": "https://api.github.com/repos/mythmon/normandy/git/commits{/sha}", "hooks_url": "https://api.github.com/repos/mythmon/normandy/hooks", "has_downloads": true, "license": null, "name": "normandy", "language": "Python", "url": "https://api.github.com/repos/mythmon/normandy", "created_at": "2016-01-13T17:54:36Z", "pushed_at": "2018-02-26T23:18:12Z", "forks_count": 0, "default_branch": "master", "teams_url": "https://api.github.com/repos/mythmon/normandy/teams", "trees_url": "https://api.github.com/repos/mythmon/normandy/git/trees{/sha}", "branches_url": "https://api.github.com/repos/mythmon/normandy/branches{/branch}", "subscribers_url": "https://api.github.com/repos/mythmon/normandy/subscribers", "stargazers_url": "https://api.github.com/repos/mythmon/normandy/stargazers"}, "sha": "c2045410c9221a6aadae9c20c9dfe0d75dd3720b", "ref": "draft-signing", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "label": "mythmon:draft-signing"}, "commits_url": "https://api.github.com/repos/mozilla/normandy/pulls/682/commits", "commits": 3, "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/682/comments", "html_url": "https://github.com/mozilla/normandy/pull/682", "rebaseable": null, "updated_at": "2017-04-12T07:31:52Z", "base": {"repo": {"issues_url": "https://api.github.com/repos/mozilla/normandy/issues{/number}", "deployments_url": "https://api.github.com/repos/mozilla/normandy/deployments", "stargazers_count": 24, "forks_url": "https://api.github.com/repos/mozilla/normandy/forks", "mirror_url": null, "subscription_url": "https://api.github.com/repos/mozilla/normandy/subscription", "notifications_url": "https://api.github.com/repos/mozilla/normandy/notifications{?since,all,participating}", "collaborators_url": "https://api.github.com/repos/mozilla/normandy/collaborators{/collaborator}", "updated_at": "2018-03-14T22:20:49Z", "private": false, "pulls_url": "https://api.github.com/repos/mozilla/normandy/pulls{/number}", "issue_comment_url": "https://api.github.com/repos/mozilla/normandy/issues/comments{/number}", "labels_url": "https://api.github.com/repos/mozilla/normandy/labels{/name}", "has_wiki": false, "full_name": "mozilla/normandy", "owner": {"following_url": "https://api.github.com/users/mozilla/following{/other_user}", "events_url": "https://api.github.com/users/mozilla/events{/privacy}", "organizations_url": "https://api.github.com/users/mozilla/orgs", "url": "https://api.github.com/users/mozilla", "gists_url": "https://api.github.com/users/mozilla/gists{/gist_id}", "html_url": "https://github.com/mozilla", "subscriptions_url": "https://api.github.com/users/mozilla/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/131524?v=4", "repos_url": "https://api.github.com/users/mozilla/repos", "received_events_url": "https://api.github.com/users/mozilla/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mozilla/starred{/owner}{/repo}", "site_admin": false, "login": "mozilla", "type": "Organization", "id": 131524, "followers_url": "https://api.github.com/users/mozilla/followers"}, "statuses_url": "https://api.github.com/repos/mozilla/normandy/statuses/{sha}", "id": 48456638, "keys_url": "https://api.github.com/repos/mozilla/normandy/keys{/key_id}", "description": "Firefox recipe server", "tags_url": "https://api.github.com/repos/mozilla/normandy/tags", "archived": false, "downloads_url": "https://api.github.com/repos/mozilla/normandy/downloads", "assignees_url": "https://api.github.com/repos/mozilla/normandy/assignees{/user}", "contents_url": "https://api.github.com/repos/mozilla/normandy/contents/{+path}", "has_pages": false, "git_refs_url": "https://api.github.com/repos/mozilla/normandy/git/refs{/sha}", "open_issues_count": 73, "has_projects": true, "clone_url": "https://github.com/mozilla/normandy.git", "watchers_count": 24, "git_tags_url": "https://api.github.com/repos/mozilla/normandy/git/tags{/sha}", "milestones_url": "https://api.github.com/repos/mozilla/normandy/milestones{/number}", "languages_url": "https://api.github.com/repos/mozilla/normandy/languages", "size": 6015, "homepage": "https://wiki.mozilla.org/Firefox/Recipe_Server", "fork": false, "commits_url": "https://api.github.com/repos/mozilla/normandy/commits{/sha}", "releases_url": "https://api.github.com/repos/mozilla/normandy/releases{/id}", "issue_events_url": "https://api.github.com/repos/mozilla/normandy/issues/events{/number}", "archive_url": "https://api.github.com/repos/mozilla/normandy/{archive_format}{/ref}", "comments_url": "https://api.github.com/repos/mozilla/normandy/comments{/number}", "events_url": "https://api.github.com/repos/mozilla/normandy/events", "contributors_url": "https://api.github.com/repos/mozilla/normandy/contributors", "html_url": "https://github.com/mozilla/normandy", "forks": 39, "compare_url": "https://api.github.com/repos/mozilla/normandy/compare/{base}...{head}", "open_issues": 73, "watchers": 24, "git_url": "git://github.com/mozilla/normandy.git", "svn_url": "https://github.com/mozilla/normandy", "merges_url": "https://api.github.com/repos/mozilla/normandy/merges", "has_issues": true, "ssh_url": "git@github.com:mozilla/normandy.git", "blobs_url": "https://api.github.com/repos/mozilla/normandy/git/blobs{/sha}", "git_commits_url": "https://api.github.com/repos/mozilla/normandy/git/commits{/sha}", "hooks_url": "https://api.github.com/repos/mozilla/normandy/hooks", "has_downloads": true, "license": null, "name": "normandy", "language": "Python", "url": "https://api.github.com/repos/mozilla/normandy", "created_at": "2015-12-22T22:18:19Z", "pushed_at": "2018-03-14T22:20:47Z", "forks_count": 39, "default_branch": "master", "teams_url": "https://api.github.com/repos/mozilla/normandy/teams", "trees_url": "https://api.github.com/repos/mozilla/normandy/git/trees{/sha}", "branches_url": "https://api.github.com/repos/mozilla/normandy/branches{/branch}", "subscribers_url": "https://api.github.com/repos/mozilla/normandy/subscribers", "stargazers_url": "https://api.github.com/repos/mozilla/normandy/stargazers"}, "sha": "cfb2e456fb61759c1d3ef5621e47d081e242394f", "ref": "master", "user": {"following_url": "https://api.github.com/users/mozilla/following{/other_user}", "events_url": "https://api.github.com/users/mozilla/events{/privacy}", "organizations_url": "https://api.github.com/users/mozilla/orgs", "url": "https://api.github.com/users/mozilla", "gists_url": "https://api.github.com/users/mozilla/gists{/gist_id}", "html_url": "https://github.com/mozilla", "subscriptions_url": "https://api.github.com/users/mozilla/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/131524?v=4", "repos_url": "https://api.github.com/users/mozilla/repos", "received_events_url": "https://api.github.com/users/mozilla/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mozilla/starred{/owner}{/repo}", "site_admin": false, "login": "mozilla", "type": "Organization", "id": 131524, "followers_url": "https://api.github.com/users/mozilla/followers"}, "label": "mozilla:master"}, "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "requested_teams": [], "locked": false, "merged_by": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "url": "https://api.github.com/repos/mozilla/normandy/pulls/682", "mergeable_state": "unknown", "created_at": "2017-04-11T23:12:35Z", "merged": true, "review_comments_url": "https://api.github.com/repos/mozilla/normandy/pulls/682/comments", "review_comments": 4, "assignees": [{"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}], "review_comment_url": "https://api.github.com/repos/mozilla/normandy/pulls/comments{/number}", "patch_url": "https://github.com/mozilla/normandy/pull/682.patch", "body_html": "<p>This test is currently failing with the below traceback. <a class=\"user-mention\" href=\"https://github.com/osmose\">@Osmose</a>, <a class=\"user-mention\" href=\"https://github.com/rehandalal\">@rehandalal</a> does this looks like a correct test? If so, we can start in on fixing it.</p>\n<pre><code>_________ normandy/recipes/tests/test_api.py::test_full_approval_flow __________\nnormandy/recipes/tests/test_api.py:730: in test_full_approval_flow\n    assert res.json() == signed_data_1\nE   assert [{'recipe': {...'x5u': None}}] == [{'recipe': {'...'x5u': None}}]\nE     At index 0 diff: {'recipe': {'action': '\u0111PjUlwrrgnTAY', 'approval_request': None, 'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'arguments': {}, 'channels': [], 'countries': [], 'enabled': False, 'extra_filter_expression': 'counter == 0', 'filter_expression': 'counter == 0', 'id': 94, 'is_approved': True, 'last_updated': '2017-04-11T23:11:21.300314Z', 'latest_revision_id': 'c6c6e466e8c551c7ed8f4b3e021433164ea195d159d414e0dead92620b7a099a', 'locales': [], 'name': 'test recipe', 'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'}, 'signature': {'public_key': '', 'signature': '343230392a94cbf7f237eaf631240a6c506f4f23e40273c9be0529870c7b1bb3', 'timestamp': '2017-04-11T23:11:21.403831Z', 'x5u': None}} != {'recipe': {'action': '\u0111PjUlwrrgnTAY', 'approval_request': {'approved': True, 'approver': {'email': 'test73@example.com', 'first_name': '', 'id': 152, 'last_name': ''}, 'comment': 'r+', 'created': '2017-04-11T23:11:21.317127Z', 'creator': {'email': 'test72@example.com', 'first_name': '', 'id': 151, 'last_name': ''}, 'id': 30}, 'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'arguments': {}, 'channels': [], 'countries': [], 'enabled': False, 'extra_filter_expression': 'counter == 0', 'filter_expression': 'counter == 0', 'id': 94, 'is_approved': True, 'last_updated': '2017-04-11T23:11:21.300314Z', 'latest_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4', 'locales': [], 'name': 'test recipe', 'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'}, 'signature': {'public_key': '', 'signature': '0d60a6d4776cfa6a6c4135d1c14d4dc552b9b1745228379bdfa0f94941773696', 'timestamp': '2017-04-11T23:11:21.336857Z', 'x5u': None}}\nE     Full diff:\nE     [{'recipe': {'action': '\u0111PjUlwrrgnTAY',\nE     -              'approval_request': None,\nE     ?                                  ^ ^\nE     +              'approval_request': {'approved': True,\nE     ?                                  ^^^^^^ ^^^^^^^^^\nE     +                                   'approver': {'email': 'test73@example.com',\nE     +                                                'first_name': '',\nE     +                                                'id': 152,\nE     +                                                'last_name': ''},\nE     +                                   'comment': 'r+',\nE     +                                   'created': '2017-04-11T23:11:21.317127Z',\nE     +                                   'creator': {'email': 'test72@example.com',\nE     +                                               'first_name': '',\nE     +                                               'id': 151,\nE     +                                               'last_name': ''},\nE     +                                   'id': 30},\nE     'approved_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4',\nE     'arguments': {},\nE     'channels': [],\nE     'countries': [],\nE     'enabled': False,\nE     'extra_filter_expression': 'counter == 0',\nE     'filter_expression': 'counter == 0',\nE     'id': 94,\nE     'is_approved': True,\nE     'last_updated': '2017-04-11T23:11:21.300314Z',\nE     -              'latest_revision_id': 'c6c6e466e8c551c7ed8f4b3e021433164ea195d159d414e0dead92620b7a099a',\nE     +              'latest_revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4',\nE     'locales': [],\nE     'name': 'test recipe',\nE     'revision_id': '4f415737bb0f7b350e546b1bd569917481ceb33f520f91749e42ea303aa2ddf4'},\nE     'signature': {'public_key': '',\nE     -                 'signature': '343230392a94cbf7f237eaf631240a6c506f4f23e40273c9be0529870c7b1bb3',\nE     +                 'signature': '0d60a6d4776cfa6a6c4135d1c14d4dc552b9b1745228379bdfa0f94941773696',\nE     -                 'timestamp': '2017-04-11T23:11:21.403831Z',\nE     ?                                                   --  ^^\nE     +                 'timestamp': '2017-04-11T23:11:21.336857Z',\nE     ?                                                    ++ ^^\nE     'x5u': None}}]\n----------------------------- Captured stderr call -----------------------------\nINFO 2017-04-11 23:11:21,294 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,297 normandy.recipes.models Creating new revision for recipe ID [94]\nINFO 2017-04-11 23:11:21,301 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,314 request.summary \nINFO 2017-04-11 23:11:21,318 request.summary \nINFO 2017-04-11 23:11:21,321 request.summary \nINFO 2017-04-11 23:11:21,326 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,339 request.summary \nINFO 2017-04-11 23:11:21,352 request.summary \nINFO 2017-04-11 23:11:21,367 request.summary \nINFO 2017-04-11 23:11:21,390 normandy.recipes.models Creating new revision for recipe ID [94]\nINFO 2017-04-11 23:11:21,395 normandy.recipes.models Requesting signatures for recipes with ids [94] from Autograph\nINFO 2017-04-11 23:11:21,410 request.summary \nINFO 2017-04-11 23:11:21,423 request.summary \nINFO 2017-04-11 23:11:21,436 request.summary \n!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!\n</code></pre>"}