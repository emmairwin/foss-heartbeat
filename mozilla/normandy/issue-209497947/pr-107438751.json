{"deletions": 150, "merge_commit_sha": "c7f1c20aa835678faa44865ccd3d3b4076a43970", "additions": 1100, "labels": [], "number": 531, "assignee": null, "mergeable": false, "closed_at": "2017-02-24T14:57:48Z", "requested_reviewers": [], "statuses_url": "https://api.github.com/repos/mozilla/normandy/statuses/27e79f8d91d238dbed11ce7992f193d4ffde2ff6", "id": 107438751, "maintainer_can_modify": false, "title": "Primitive History, Request/Approve/Reject UIs", "body_text": "This has pieces of #492 (comment UI), #491 (revision history), #490 (revision status indicator), and #489 (ui for approval requests).\nThis branch still requires some refactoring. Specifically, I'm not thrilled with RecipeForm#renderFormActionButtons, though there are some other pieces that could be abstracted or simplified (thinking HistoryItem in particular).\nAt this point, the basic 'flow' should work:\n\nUser can navigate revision history via new UI component\n\nDiffs between revisions are visible on the \"new\" Change Log page\n\n\nForm buttons update based on the currently viewed revision/approval status.\nApprove/Reject buttons show comment fields on click\nAPI calls are actually made so users can request/close/approve/reject, with comments.\n\nThere are a handful of things I'm running into or need to be addressed:\n\nThe revision navigator does not correctly show which revision the user is currently viewing\nThe way the buttons are created/shown (in renderFormActionButtons) feels really gross, but I've already refactored it down froms omething worse. Any thoughts on cleaning that up would be greatly appreciated.\n\nAlso in this PR:\n\nSplit up RecipeHistory so its pieces are in separate files (e.g. HistoryList, HistoryItem)\ncolor- classes are generated in _colors.scss", "comments": 1, "merged_at": null, "state": "closed", "_links": {"review_comment": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/531/commits"}, "self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/531"}, "review_comments": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/531/comments"}, "html": {"href": "https://github.com/mozilla/normandy/pull/531"}, "comments": {"href": "https://api.github.com/repos/mozilla/normandy/issues/531/comments"}, "issue": {"href": "https://api.github.com/repos/mozilla/normandy/issues/531"}, "statuses": {"href": "https://api.github.com/repos/mozilla/normandy/statuses/27e79f8d91d238dbed11ce7992f193d4ffde2ff6"}}, "changed_files": 17, "diff_url": "https://github.com/mozilla/normandy/pull/531.diff", "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/531", "body": "This has pieces of #492 (comment UI), #491 (revision history), #490 (revision status indicator), and #489 (ui for approval requests).\r\n\r\n**This branch still requires some refactoring.** Specifically, I'm not thrilled with `RecipeForm#renderFormActionButtons`, though there are some other pieces that could be abstracted or simplified (thinking `HistoryItem` in particular).\r\n\r\nAt this point, the basic 'flow' should work:\r\n- User can navigate revision history via new [UI component](https://cloud.githubusercontent.com/assets/2767162/23218888/c12f2010-f8da-11e6-93f3-5e64868aa655.png)\r\n  - Diffs between revisions are visible on the \"new\" `Change Log` page\r\n- Form buttons update based on the currently viewed revision/approval status.\r\n- Approve/Reject buttons show comment fields on click\r\n- API calls are actually made so users can request/close/approve/reject, with comments.\r\n\r\nThere are a handful of things I'm running into or need to be addressed:\r\n- The revision navigator does _not_ correctly show which revision the user is currently viewing\r\n- The way the buttons are created/shown (in `renderFormActionButtons`) feels really gross, but I've already refactored it down froms omething worse. Any thoughts on cleaning that up would be greatly appreciated.\r\n\r\nAlso in this PR:\r\n- Split up `RecipeHistory` so its pieces are in separate files (e.g. `HistoryList`, `HistoryItem`)\r\n- `color-` classes are generated in `_colors.scss`", "head": {"repo": {"issues_url": "https://api.github.com/repos/andymikulski/normandy/issues{/number}", "deployments_url": "https://api.github.com/repos/andymikulski/normandy/deployments", "stargazers_count": 0, "forks_url": "https://api.github.com/repos/andymikulski/normandy/forks", "mirror_url": null, "subscription_url": "https://api.github.com/repos/andymikulski/normandy/subscription", "notifications_url": "https://api.github.com/repos/andymikulski/normandy/notifications{?since,all,participating}", "collaborators_url": "https://api.github.com/repos/andymikulski/normandy/collaborators{/collaborator}", "updated_at": "2017-01-28T19:56:13Z", "private": false, "pulls_url": "https://api.github.com/repos/andymikulski/normandy/pulls{/number}", "issue_comment_url": "https://api.github.com/repos/andymikulski/normandy/issues/comments{/number}", "labels_url": "https://api.github.com/repos/andymikulski/normandy/labels{/name}", "has_wiki": false, "full_name": "andymikulski/normandy", "owner": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "statuses_url": "https://api.github.com/repos/andymikulski/normandy/statuses/{sha}", "id": 73124724, "keys_url": "https://api.github.com/repos/andymikulski/normandy/keys{/key_id}", "description": "Firefox recipe server", "tags_url": "https://api.github.com/repos/andymikulski/normandy/tags", "archived": false, "downloads_url": "https://api.github.com/repos/andymikulski/normandy/downloads", "assignees_url": "https://api.github.com/repos/andymikulski/normandy/assignees{/user}", "contents_url": "https://api.github.com/repos/andymikulski/normandy/contents/{+path}", "has_pages": false, "git_refs_url": "https://api.github.com/repos/andymikulski/normandy/git/refs{/sha}", "open_issues_count": 0, "has_projects": true, "clone_url": "https://github.com/andymikulski/normandy.git", "watchers_count": 0, "git_tags_url": "https://api.github.com/repos/andymikulski/normandy/git/tags{/sha}", "milestones_url": "https://api.github.com/repos/andymikulski/normandy/milestones{/number}", "languages_url": "https://api.github.com/repos/andymikulski/normandy/languages", "size": 18101, "homepage": "https://wiki.mozilla.org/Firefox/Recipe_Server", "fork": true, "commits_url": "https://api.github.com/repos/andymikulski/normandy/commits{/sha}", "releases_url": "https://api.github.com/repos/andymikulski/normandy/releases{/id}", "issue_events_url": "https://api.github.com/repos/andymikulski/normandy/issues/events{/number}", "archive_url": "https://api.github.com/repos/andymikulski/normandy/{archive_format}{/ref}", "comments_url": "https://api.github.com/repos/andymikulski/normandy/comments{/number}", "events_url": "https://api.github.com/repos/andymikulski/normandy/events", "contributors_url": "https://api.github.com/repos/andymikulski/normandy/contributors", "html_url": "https://github.com/andymikulski/normandy", "forks": 0, "compare_url": "https://api.github.com/repos/andymikulski/normandy/compare/{base}...{head}", "open_issues": 0, "watchers": 0, "git_url": "git://github.com/andymikulski/normandy.git", "svn_url": "https://github.com/andymikulski/normandy", "merges_url": "https://api.github.com/repos/andymikulski/normandy/merges", "has_issues": false, "ssh_url": "git@github.com:andymikulski/normandy.git", "blobs_url": "https://api.github.com/repos/andymikulski/normandy/git/blobs{/sha}", "git_commits_url": "https://api.github.com/repos/andymikulski/normandy/git/commits{/sha}", "hooks_url": "https://api.github.com/repos/andymikulski/normandy/hooks", "has_downloads": true, "license": null, "name": "normandy", "language": "JavaScript", "url": "https://api.github.com/repos/andymikulski/normandy", "created_at": "2016-11-07T21:59:21Z", "pushed_at": "2018-01-29T21:07:08Z", "forks_count": 0, "default_branch": "master", "teams_url": "https://api.github.com/repos/andymikulski/normandy/teams", "trees_url": "https://api.github.com/repos/andymikulski/normandy/git/trees{/sha}", "branches_url": "https://api.github.com/repos/andymikulski/normandy/branches{/branch}", "subscribers_url": "https://api.github.com/repos/andymikulski/normandy/subscribers", "stargazers_url": "https://api.github.com/repos/andymikulski/normandy/stargazers"}, "sha": "27e79f8d91d238dbed11ce7992f193d4ffde2ff6", "ref": "peer-signing-ui", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "label": "andymikulski:peer-signing-ui"}, "commits_url": "https://api.github.com/repos/mozilla/normandy/pulls/531/commits", "commits": 1, "author_association": "CONTRIBUTOR", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/531/comments", "html_url": "https://github.com/mozilla/normandy/pull/531", "rebaseable": false, "updated_at": "2017-09-11T15:37:20Z", "base": {"repo": {"issues_url": "https://api.github.com/repos/mozilla/normandy/issues{/number}", "deployments_url": "https://api.github.com/repos/mozilla/normandy/deployments", "stargazers_count": 24, "forks_url": "https://api.github.com/repos/mozilla/normandy/forks", "mirror_url": null, "subscription_url": "https://api.github.com/repos/mozilla/normandy/subscription", "notifications_url": "https://api.github.com/repos/mozilla/normandy/notifications{?since,all,participating}", "collaborators_url": "https://api.github.com/repos/mozilla/normandy/collaborators{/collaborator}", "updated_at": "2018-03-14T22:20:49Z", "private": false, "pulls_url": "https://api.github.com/repos/mozilla/normandy/pulls{/number}", "issue_comment_url": "https://api.github.com/repos/mozilla/normandy/issues/comments{/number}", "labels_url": "https://api.github.com/repos/mozilla/normandy/labels{/name}", "has_wiki": false, "full_name": "mozilla/normandy", "owner": {"following_url": "https://api.github.com/users/mozilla/following{/other_user}", "events_url": "https://api.github.com/users/mozilla/events{/privacy}", "organizations_url": "https://api.github.com/users/mozilla/orgs", "url": "https://api.github.com/users/mozilla", "gists_url": "https://api.github.com/users/mozilla/gists{/gist_id}", "html_url": "https://github.com/mozilla", "subscriptions_url": "https://api.github.com/users/mozilla/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/131524?v=4", "repos_url": "https://api.github.com/users/mozilla/repos", "received_events_url": "https://api.github.com/users/mozilla/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mozilla/starred{/owner}{/repo}", "site_admin": false, "login": "mozilla", "type": "Organization", "id": 131524, "followers_url": "https://api.github.com/users/mozilla/followers"}, "statuses_url": "https://api.github.com/repos/mozilla/normandy/statuses/{sha}", "id": 48456638, "keys_url": "https://api.github.com/repos/mozilla/normandy/keys{/key_id}", "description": "Firefox recipe server", "tags_url": "https://api.github.com/repos/mozilla/normandy/tags", "archived": false, "downloads_url": "https://api.github.com/repos/mozilla/normandy/downloads", "assignees_url": "https://api.github.com/repos/mozilla/normandy/assignees{/user}", "contents_url": "https://api.github.com/repos/mozilla/normandy/contents/{+path}", "has_pages": false, "git_refs_url": "https://api.github.com/repos/mozilla/normandy/git/refs{/sha}", "open_issues_count": 73, "has_projects": true, "clone_url": "https://github.com/mozilla/normandy.git", "watchers_count": 24, "git_tags_url": "https://api.github.com/repos/mozilla/normandy/git/tags{/sha}", "milestones_url": "https://api.github.com/repos/mozilla/normandy/milestones{/number}", "languages_url": "https://api.github.com/repos/mozilla/normandy/languages", "size": 6015, "homepage": "https://wiki.mozilla.org/Firefox/Recipe_Server", "fork": false, "commits_url": "https://api.github.com/repos/mozilla/normandy/commits{/sha}", "releases_url": "https://api.github.com/repos/mozilla/normandy/releases{/id}", "issue_events_url": "https://api.github.com/repos/mozilla/normandy/issues/events{/number}", "archive_url": "https://api.github.com/repos/mozilla/normandy/{archive_format}{/ref}", "comments_url": "https://api.github.com/repos/mozilla/normandy/comments{/number}", "events_url": "https://api.github.com/repos/mozilla/normandy/events", "contributors_url": "https://api.github.com/repos/mozilla/normandy/contributors", "html_url": "https://github.com/mozilla/normandy", "forks": 39, "compare_url": "https://api.github.com/repos/mozilla/normandy/compare/{base}...{head}", "open_issues": 73, "watchers": 24, "git_url": "git://github.com/mozilla/normandy.git", "svn_url": "https://github.com/mozilla/normandy", "merges_url": "https://api.github.com/repos/mozilla/normandy/merges", "has_issues": true, "ssh_url": "git@github.com:mozilla/normandy.git", "blobs_url": "https://api.github.com/repos/mozilla/normandy/git/blobs{/sha}", "git_commits_url": "https://api.github.com/repos/mozilla/normandy/git/commits{/sha}", "hooks_url": "https://api.github.com/repos/mozilla/normandy/hooks", "has_downloads": true, "license": null, "name": "normandy", "language": "Python", "url": "https://api.github.com/repos/mozilla/normandy", "created_at": "2015-12-22T22:18:19Z", "pushed_at": "2018-03-14T22:20:47Z", "forks_count": 39, "default_branch": "master", "teams_url": "https://api.github.com/repos/mozilla/normandy/teams", "trees_url": "https://api.github.com/repos/mozilla/normandy/git/trees{/sha}", "branches_url": "https://api.github.com/repos/mozilla/normandy/branches{/branch}", "subscribers_url": "https://api.github.com/repos/mozilla/normandy/subscribers", "stargazers_url": "https://api.github.com/repos/mozilla/normandy/stargazers"}, "sha": "b954377446e6560b68984bf4ea76190fd23f7e68", "ref": "peer-signing", "user": {"following_url": "https://api.github.com/users/mozilla/following{/other_user}", "events_url": "https://api.github.com/users/mozilla/events{/privacy}", "organizations_url": "https://api.github.com/users/mozilla/orgs", "url": "https://api.github.com/users/mozilla", "gists_url": "https://api.github.com/users/mozilla/gists{/gist_id}", "html_url": "https://github.com/mozilla", "subscriptions_url": "https://api.github.com/users/mozilla/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/131524?v=4", "repos_url": "https://api.github.com/users/mozilla/repos", "received_events_url": "https://api.github.com/users/mozilla/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mozilla/starred{/owner}{/repo}", "site_admin": false, "login": "mozilla", "type": "Organization", "id": 131524, "followers_url": "https://api.github.com/users/mozilla/followers"}, "label": "mozilla:peer-signing"}, "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "milestone": null, "requested_teams": [], "locked": false, "merged_by": null, "url": "https://api.github.com/repos/mozilla/normandy/pulls/531", "mergeable_state": "dirty", "created_at": "2017-02-22T16:01:36Z", "merged": false, "review_comments_url": "https://api.github.com/repos/mozilla/normandy/pulls/531/comments", "review_comments": 0, "assignees": [], "review_comment_url": "https://api.github.com/repos/mozilla/normandy/pulls/comments{/number}", "patch_url": "https://github.com/mozilla/normandy/pull/531.patch", "body_html": "<p>This has pieces of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"206047978\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/492\" href=\"https://github.com/mozilla/normandy/issues/492\">#492</a> (comment UI), <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"206047089\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/491\" href=\"https://github.com/mozilla/normandy/issues/491\">#491</a> (revision history), <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"206045666\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/490\" href=\"https://github.com/mozilla/normandy/issues/490\">#490</a> (revision status indicator), and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"206044777\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/489\" href=\"https://github.com/mozilla/normandy/issues/489\">#489</a> (ui for approval requests).</p>\n<p><strong>This branch still requires some refactoring.</strong> Specifically, I'm not thrilled with <code>RecipeForm#renderFormActionButtons</code>, though there are some other pieces that could be abstracted or simplified (thinking <code>HistoryItem</code> in particular).</p>\n<p>At this point, the basic 'flow' should work:</p>\n<ul>\n<li>User can navigate revision history via new <a href=\"https://cloud.githubusercontent.com/assets/2767162/23218888/c12f2010-f8da-11e6-93f3-5e64868aa655.png\" rel=\"nofollow\">UI component</a>\n<ul>\n<li>Diffs between revisions are visible on the \"new\" <code>Change Log</code> page</li>\n</ul>\n</li>\n<li>Form buttons update based on the currently viewed revision/approval status.</li>\n<li>Approve/Reject buttons show comment fields on click</li>\n<li>API calls are actually made so users can request/close/approve/reject, with comments.</li>\n</ul>\n<p>There are a handful of things I'm running into or need to be addressed:</p>\n<ul>\n<li>The revision navigator does <em>not</em> correctly show which revision the user is currently viewing</li>\n<li>The way the buttons are created/shown (in <code>renderFormActionButtons</code>) feels really gross, but I've already refactored it down froms omething worse. Any thoughts on cleaning that up would be greatly appreciated.</li>\n</ul>\n<p>Also in this PR:</p>\n<ul>\n<li>Split up <code>RecipeHistory</code> so its pieces are in separate files (e.g. <code>HistoryList</code>, <code>HistoryItem</code>)</li>\n<li><code>color-</code> classes are generated in <code>_colors.scss</code></li>\n</ul>"}