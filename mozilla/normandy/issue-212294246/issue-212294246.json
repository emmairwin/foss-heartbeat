{"body_text": "The preference-experiment action will be splitting the userbase into 100,000 buckets, and will have arguments specifying the number of buckets to use for experiment branches. We want these buckets to be determined on the server-side by taking the least-recently-used buckets and assigning them to the experiment.\nThis means:\n\nThe server needs to track buckets in use, probably by storing the last-used index and taking subsequent buckets when needed. If we wrap the index at 100,000, then we get roughly the effect of manually tracking the least-recently-used buckets.\nThe server needs to then make the bucket indexes available to the action by inserting them into the recipe arguments.\nThe server only needs to do this for a specific type of action, which means we need per-action customization.", "labels": [], "number": 584, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-03-07T23:07:42Z", "body_html": "<p>The <code>preference-experiment</code> action will be splitting the userbase into 100,000 buckets, and will have arguments specifying the number of buckets to use for experiment branches. We want these buckets to be determined on the server-side by taking the least-recently-used buckets and assigning them to the experiment.</p>\n<p>This means:</p>\n<ul>\n<li>The server needs to track buckets in use, probably by storing the last-used index and taking subsequent buckets when needed. If we wrap the index at 100,000, then we get roughly the effect of manually tracking the least-recently-used buckets.</li>\n<li>The server needs to then make the bucket indexes available to the action by inserting them into the recipe arguments.</li>\n<li>The server only needs to do this for a specific type of action, which means we need per-action customization.</li>\n</ul>", "id": 212294246, "title": "Per-action server-computed arguments", "comments": 1, "state": "closed", "body": "The `preference-experiment` action will be splitting the userbase into 100,000 buckets, and will have arguments specifying the number of buckets to use for experiment branches. We want these buckets to be determined on the server-side by taking the least-recently-used buckets and assigning them to the experiment.\r\n\r\nThis means:\r\n- The server needs to track buckets in use, probably by storing the last-used index and taking subsequent buckets when needed. If we wrap the index at 100,000, then we get roughly the effect of manually tracking the least-recently-used buckets.\r\n- The server needs to then make the bucket indexes available to the action by inserting them into the recipe arguments.\r\n- The server only needs to do this for a specific type of action, which means we need per-action customization.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/584/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/584/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/584/comments", "html_url": "https://github.com/mozilla/normandy/issues/584", "updated_at": "2018-01-30T17:40:31Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/584", "created_at": "2017-03-07T00:32:36Z", "assignees": []}