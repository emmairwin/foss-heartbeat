{"original_position": 34, "diff_hunk": "@@ -0,0 +1,94 @@\n+import autobind from 'autobind-decorator';\n+import { Form, message } from 'antd';\n+import React, { PropTypes as pt } from 'react';\n+\n+\n+/**\n+ * Base class for antd-based forms that handles displaying errors\n+ * from the API.\n+ */\n+export default class BaseAntForm extends React.Component {\n+  static propTypes = {\n+    form: pt.object.isRequired,\n+    onSubmit: pt.func.isRequired,\n+    errors: pt.object,\n+  }\n+\n+  @autobind\n+  handleSubmit(event) {\n+    event.preventDefault();\n+    this.triggerSubmit();\n+  }\n+\n+  @autobind\n+  async triggerSubmit() {\n+    try {\n+      const values = await this.validateFields();\n+      this.props.onSubmit(values);\n+    } catch (error) {\n+      message.error('Could not validate form. Please correct the errors below.');\n+    }\n+  }\n+\n+  @autobind\n+  validateFields() {", "body_text": "We still need the Promise for form.validateFields, right? This is just to make it clear it's effectively async? Just want to make sure I'm not missing if the Promise isn't necessary.", "in_reply_to_id": 124702937, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/851", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/124725092", "created_at": "2017-06-29T07:02:23Z", "author_association": "MEMBER", "body": "We still need the Promise for `form.validateFields`, right? This is just to make it clear it's effectively async? Just want to make sure I'm not missing if the Promise isn't necessary.", "updated_at": "2017-06-29T22:33:36Z", "html_url": "https://github.com/mozilla/normandy/pull/851#discussion_r124725092", "pull_request_review_id": 47040425, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/124725092"}, "html": {"href": "https://github.com/mozilla/normandy/pull/851#discussion_r124725092"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/851"}}, "commit_id": "85676b2552beebf8a1251c780e3088ba40ed81f6", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "recipe-server/client/control_new/components/common/BaseAntForm.js", "body_html": "<p>We still need the Promise for <code>form.validateFields</code>, right? This is just to make it clear it's effectively async? Just want to make sure I'm not missing if the Promise isn't necessary.</p>", "original_commit_id": "cedae8cd4e56de58a3e453c82f25222c0f485b8c", "id": 124725092}