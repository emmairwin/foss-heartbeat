{"body_text": "normandy/recipe-server/normandy/recipes/models.py\n    \n    \n        Lines 331 to 340\n      in\n      1553a2e\n    \n    \n    \n    \n\n        \n          \n           def data(self): \n        \n\n        \n          \n               return { \n        \n\n        \n          \n                   'name': self.name, \n        \n\n        \n          \n                   'action': self.action, \n        \n\n        \n          \n                   'arguments_json': self.arguments_json, \n        \n\n        \n          \n                   'extra_filter_expression': self.extra_filter_expression, \n        \n\n        \n          \n                   'channels': list(self.channels.all()), \n        \n\n        \n          \n                   'countries': list(self.countries.all()), \n        \n\n        \n          \n                   'locales': list(self.locales.all()), \n        \n\n        \n          \n                   'identicon_seed': self.identicon_seed, \n        \n    \n  \n\n\nThe api/v1/recipe response returns the list of recipes. Most of the responses contain a valid filter and extra filter expression, but are missing the raw fields for creating these filters. countries, channel, and locale are all empty lists.\nI would expect these fields to be populated.", "labels": [], "number": 1125, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-11-03T19:45:04Z", "body_html": "<p><div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom bg-gray-light\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/mozilla/normandy/blob/1553a2ebac90a7004975874401a8fb2c6e10303e/recipe-server/normandy/recipes/models.py#L331-L340\">normandy/recipe-server/normandy/recipes/models.py</a>\n    </p>\n    <p class=\"mb-0 text-gray-light\">\n        Lines 331 to 340\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/mozilla/normandy/commit/1553a2ebac90a7004975874401a8fb2c6e10303e\">1553a2e</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L331\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"331\"></td>\n          <td id=\"LC331\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">data</span>(<span class=\"pl-smi\"><span class=\"pl-smi\">self</span></span>): </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L332\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"332\"></td>\n          <td id=\"LC332\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">     <span class=\"pl-k\">return</span> { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L333\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"333\"></td>\n          <td id=\"LC333\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>name<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">self</span>.name, </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L334\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"334\"></td>\n          <td id=\"LC334\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>action<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">self</span>.action, </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L335\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"335\"></td>\n          <td id=\"LC335\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>arguments_json<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">self</span>.arguments_json, </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L336\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"336\"></td>\n          <td id=\"LC336\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>extra_filter_expression<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">self</span>.extra_filter_expression, </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L337\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"337\"></td>\n          <td id=\"LC337\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>channels<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">list</span>(<span class=\"pl-c1\">self</span>.channels.all()), </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L338\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"338\"></td>\n          <td id=\"LC338\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>countries<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">list</span>(<span class=\"pl-c1\">self</span>.countries.all()), </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L339\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"339\"></td>\n          <td id=\"LC339\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>locales<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">list</span>(<span class=\"pl-c1\">self</span>.locales.all()), </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L340\" class=\"blob-num border-0 px-3 py-0 bg-white js-line-number\" data-line-number=\"340\"></td>\n          <td id=\"LC340\" class=\"blob-code border-0 px-3 py-0 bg-white blob-code-inner js-file-line\">         <span class=\"pl-s\"><span class=\"pl-pds\">'</span>identicon_seed<span class=\"pl-pds\">'</span></span>: <span class=\"pl-c1\">self</span>.identicon_seed, </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p>The <a href=\"https://normandy.services.mozilla.com/api/v1/recipe/\" rel=\"nofollow\"><code>api/v1/recipe</code> response</a> returns the list of recipes. Most of the responses contain a valid filter and extra filter expression, but are missing the raw fields for creating these filters. <code>countries</code>, <code>channel</code>, and <code>locale</code> are all empty lists.</p>\n<p>I would expect these fields to be populated.</p>", "id": 271068150, "title": "Recipe server response returns empty population criteria fields (countries, channel, locale)", "comments": 1, "state": "closed", "body": "https://github.com/mozilla/normandy/blob/1553a2ebac90a7004975874401a8fb2c6e10303e/recipe-server/normandy/recipes/models.py#L331-L340\r\n\r\nThe [`api/v1/recipe` response](https://normandy.services.mozilla.com/api/v1/recipe/) returns the list of recipes. Most of the responses contain a valid filter and extra filter expression, but are missing the raw fields for creating these filters. `countries`, `channel`, and `locale` are all empty lists.\r\n\r\nI would expect these fields to be populated. ", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/1125/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/1125/labels{/name}", "author_association": "NONE", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/1125/comments", "html_url": "https://github.com/mozilla/normandy/issues/1125", "updated_at": "2017-11-03T19:45:04Z", "user": {"following_url": "https://api.github.com/users/acmiyaguchi/following{/other_user}", "events_url": "https://api.github.com/users/acmiyaguchi/events{/privacy}", "organizations_url": "https://api.github.com/users/acmiyaguchi/orgs", "url": "https://api.github.com/users/acmiyaguchi", "gists_url": "https://api.github.com/users/acmiyaguchi/gists{/gist_id}", "html_url": "https://github.com/acmiyaguchi", "subscriptions_url": "https://api.github.com/users/acmiyaguchi/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/3304040?v=4", "repos_url": "https://api.github.com/users/acmiyaguchi/repos", "received_events_url": "https://api.github.com/users/acmiyaguchi/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/acmiyaguchi/starred{/owner}{/repo}", "site_admin": false, "login": "acmiyaguchi", "type": "User", "id": 3304040, "followers_url": "https://api.github.com/users/acmiyaguchi/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/1125", "created_at": "2017-11-03T18:05:27Z", "assignees": []}