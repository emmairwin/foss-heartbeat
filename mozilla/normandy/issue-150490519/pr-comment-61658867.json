{"original_position": 122, "diff_hunk": "@@ -103,14 +100,46 @@ function runRecipe(recipe) {\n }\n \n \n+/**\n+ * Generate a context object for JEXL filter expressions.\n+ * @return {object}\n+ */\n+function filterContext() {\n+    return {\n+        normandy: classifyClient(),\n+        telemetry: {},\n+        events: {},\n+    }\n+}\n+\n+\n+/**\n+ * Match a recipe against a context using its filter expression.\n+ * @param  {Recipe} recipe  Recipe fetched from the server.\n+ * @param  {object} context Context returned by filterContext.\n+ * @promise Resolves with a list containing the recipe and a boolean\n+ *     signifying if the filter passed or failed.\n+ */\n+function matches(recipe, context) {\n+    return jexl.eval(recipe.filter_expression, context)\n+    .then(value => [recipe, !!value]);", "body_text": "Ah, I misunderstood what you said as meaning that JEXL considers a blank expression to be true. Whoops!", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/114", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/61658867", "created_at": "2016-04-29T23:51:59Z", "author_association": "MEMBER", "body": "Ah, I misunderstood what you said as meaning that JEXL considers a blank expression to be true. Whoops!\n", "updated_at": "2016-05-04T17:21:54Z", "html_url": "https://github.com/mozilla/normandy/pull/114#discussion_r61658867", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/61658867"}, "html": {"href": "https://github.com/mozilla/normandy/pull/114#discussion_r61658867"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/114"}}, "commit_id": "01ca8558645737571380fc84217a433a6e646977", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "normandy/selfrepair/static/js/self_repair_runner.js", "body_html": "<p>Ah, I misunderstood what you said as meaning that JEXL considers a blank expression to be true. Whoops!</p>", "original_commit_id": "0f8db50877f8711a3349007a2759c712e6eb9e02", "id": 61658867}