{"body": "# Firefox Request for Data Collection\r\n\r\n## 1) What are the motivating questions you want to answer with this data?\r\n\r\n- What types of errors are happening client-side when Shield executes recipes, and how often?\r\n- How often is an individual Shield recipe being matched to a client and executed? \r\n\r\n## 2) Why does Mozilla need answers to this question?  Are there benefits for users? Do we need this information to address business requirements? \r\n\r\nWe need this information to measure the technical quality of Shield as a platform, as well as to measure the impact of filters used on Normandy recipes. Better understanding the impact of filters helps us target experiments with minimal impact to users while still hitting user populations necessary for analysis.\r\n\r\n## 3) List all proposed measurements.  Refer to data collection types in Firefox and indicate types of measurements for each one.   General characterization of your collection will fall the highest type of data.\r\n\r\n| High-level Description | Measurement type | Tracking Bug # |\r\n| ---------------------- | ---------------- | -------------- |\r\n| Measuring whether recipe execution on the client was successful, and if not, why it failed, on a per-recipe basis | Keyed histogram via [Uptake Telemetry][] | #802 |\r\n\r\n## 4) How long will this data be collected?  Choose one of the following:\r\n\r\nI want to permanently monitor this data. (Michael Kelly, Shield Dev Team)\r\n\r\n## 5) What populations do you need to these measurements for?\r\n\r\nAll Desktop Firefox users: all release channels, countries, and locales.\r\n\r\n## 6) Please provide a general description of how you will analyze this data.\r\n\r\nWe plan to aggregate this data by recipe and by action and make the aggregated counts available via the Normandy admin interface. We may also build alert-based monitoring for unexpected error counts. It's undecided if we will store the aggregated data within Normandy or pull it remotely on demand.\r\n\r\nLonger-term, [Uptake Telemetry][] may have plans to add automated analysis of all update channels using it to report uptake.\r\n\r\n## 7) What alternative methods did you consider to answer this question? Why were they not sufficient?\r\n\r\nThere aren't many alternatives for answering the question of how client-side recipe execution occurred. The main alternative was to only report error information to an existing error monitoring system, like Sentry, but other Firefox projects have had technical issues reporting errors from privileged Firefox code to Sentry.\r\n\r\n## 8) Can current instrumentation answer this question?\r\n\r\nNope. Nothing else is currently monitoring the execution of Shield recipes.\r\n\r\n## 9) Where do you intend to share the results of your analysis?\r\n\r\nThe Normandy admin interface. We have existing plans to add public dashboards to Normandy describing the content that is currently going out, and will evaluate whether these counts are appropriate to share on that dashboard later.\r\n\r\n# Supplementary details\r\n\r\n## Describe the analysis you will perform on the collected data to answer the motivating question.\r\n\r\n- Other (please describe in extensive detail below)\r\n\r\nThe engineering team will integrate the data analysis with the Normandy admin UI, which will be monitored by engineering, product management, and other Shield users.\r\n\r\n## What data platform are you using to collect this data?  Examples:\r\n\r\nUnified Telemetry + custom admin integration\r\n\r\n## If using Unified Telemetry, please indicate how your measurements are implemented according to the following:\r\n\r\nTelemetry histogram (main ping) via [Uptake Telemetry][]\r\n\r\n## Provide an example of the measurement artifact (e.g. JSON blob) that will be produced\r\n\r\nHere's an example of the keyed histogram that is included with the main telemetry ping for uptake data:\r\n\r\n```json\r\n{\r\n  \"UPTAKE_REMOTE_CONTENT_RESULT_1\": {\r\n    \"shield-recipe-client/runner\": {\r\n      \"range\": [\r\n        1,\r\n        50\r\n      ],\r\n      \"bucket_count\": 51,\r\n      \"histogram_type\": 1,\r\n      \"values\": {\r\n        \"0\": 1,\r\n        \"1\": 0\r\n      },\r\n      \"sum\": 0\r\n    },\r\n    \"shield-recipe-client/action/show-heartbeat\": {\r\n      \"range\": [\r\n        1,\r\n        50\r\n      ],\r\n      \"bucket_count\": 51,\r\n      \"histogram_type\": 1,\r\n      \"values\": {\r\n        \"6\": 0,\r\n        \"7\": 1,\r\n        \"8\": 0\r\n      },\r\n      \"sum\": 7\r\n    },\r\n    \"shield-recipe-runner/recipe/17\": {\r\n      \"range\": [\r\n        1,\r\n        50\r\n      ],\r\n      \"bucket_count\": 51,\r\n      \"histogram_type\": 1,\r\n      \"values\": {\r\n        \"0\": 1,\r\n        \"1\": 0\r\n      },\r\n      \"sum\": 0\r\n    },\r\n  },\r\n}\r\n```\r\n\r\n[Uptake Telemetry]: http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/uptake.html", "body_text": "Firefox Request for Data Collection\n1) What are the motivating questions you want to answer with this data?\n\nWhat types of errors are happening client-side when Shield executes recipes, and how often?\nHow often is an individual Shield recipe being matched to a client and executed?\n\n2) Why does Mozilla need answers to this question?  Are there benefits for users? Do we need this information to address business requirements?\nWe need this information to measure the technical quality of Shield as a platform, as well as to measure the impact of filters used on Normandy recipes. Better understanding the impact of filters helps us target experiments with minimal impact to users while still hitting user populations necessary for analysis.\n3) List all proposed measurements.  Refer to data collection types in Firefox and indicate types of measurements for each one.   General characterization of your collection will fall the highest type of data.\n\n\n\nHigh-level Description\nMeasurement type\nTracking Bug #\n\n\n\n\nMeasuring whether recipe execution on the client was successful, and if not, why it failed, on a per-recipe basis\nKeyed histogram via Uptake Telemetry\n#802\n\n4) How long will this data be collected?  Choose one of the following:\nI want to permanently monitor this data. (Michael Kelly, Shield Dev Team)\n5) What populations do you need to these measurements for?\nAll Desktop Firefox users: all release channels, countries, and locales.\n6) Please provide a general description of how you will analyze this data.\nWe plan to aggregate this data by recipe and by action and make the aggregated counts available via the Normandy admin interface. We may also build alert-based monitoring for unexpected error counts. It's undecided if we will store the aggregated data within Normandy or pull it remotely on demand.\nLonger-term, Uptake Telemetry may have plans to add automated analysis of all update channels using it to report uptake.\n7) What alternative methods did you consider to answer this question? Why were they not sufficient?\nThere aren't many alternatives for answering the question of how client-side recipe execution occurred. The main alternative was to only report error information to an existing error monitoring system, like Sentry, but other Firefox projects have had technical issues reporting errors from privileged Firefox code to Sentry.\n8) Can current instrumentation answer this question?\nNope. Nothing else is currently monitoring the execution of Shield recipes.\n9) Where do you intend to share the results of your analysis?\nThe Normandy admin interface. We have existing plans to add public dashboards to Normandy describing the content that is currently going out, and will evaluate whether these counts are appropriate to share on that dashboard later.\nSupplementary details\nDescribe the analysis you will perform on the collected data to answer the motivating question.\n\nOther (please describe in extensive detail below)\n\nThe engineering team will integrate the data analysis with the Normandy admin UI, which will be monitored by engineering, product management, and other Shield users.\nWhat data platform are you using to collect this data?  Examples:\nUnified Telemetry + custom admin integration\nIf using Unified Telemetry, please indicate how your measurements are implemented according to the following:\nTelemetry histogram (main ping) via Uptake Telemetry\nProvide an example of the measurement artifact (e.g. JSON blob) that will be produced\nHere's an example of the keyed histogram that is included with the main telemetry ping for uptake data:\n{\n  \"UPTAKE_REMOTE_CONTENT_RESULT_1\": {\n    \"shield-recipe-client/runner\": {\n      \"range\": [\n        1,\n        50\n      ],\n      \"bucket_count\": 51,\n      \"histogram_type\": 1,\n      \"values\": {\n        \"0\": 1,\n        \"1\": 0\n      },\n      \"sum\": 0\n    },\n    \"shield-recipe-client/action/show-heartbeat\": {\n      \"range\": [\n        1,\n        50\n      ],\n      \"bucket_count\": 51,\n      \"histogram_type\": 1,\n      \"values\": {\n        \"6\": 0,\n        \"7\": 1,\n        \"8\": 0\n      },\n      \"sum\": 7\n    },\n    \"shield-recipe-runner/recipe/17\": {\n      \"range\": [\n        1,\n        50\n      ],\n      \"bucket_count\": 51,\n      \"histogram_type\": 1,\n      \"values\": {\n        \"0\": 1,\n        \"1\": 0\n      },\n      \"sum\": 0\n    },\n  },\n}", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/316795682", "created_at": "2017-07-20T18:48:42Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/pull/818#issuecomment-316795682", "updated_at": "2017-07-20T18:48:42Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "body_html": "<h1>Firefox Request for Data Collection</h1>\n<h2>1) What are the motivating questions you want to answer with this data?</h2>\n<ul>\n<li>What types of errors are happening client-side when Shield executes recipes, and how often?</li>\n<li>How often is an individual Shield recipe being matched to a client and executed?</li>\n</ul>\n<h2>2) Why does Mozilla need answers to this question?  Are there benefits for users? Do we need this information to address business requirements?</h2>\n<p>We need this information to measure the technical quality of Shield as a platform, as well as to measure the impact of filters used on Normandy recipes. Better understanding the impact of filters helps us target experiments with minimal impact to users while still hitting user populations necessary for analysis.</p>\n<h2>3) List all proposed measurements.  Refer to data collection types in Firefox and indicate types of measurements for each one.   General characterization of your collection will fall the highest type of data.</h2>\n<table>\n<thead>\n<tr>\n<th>High-level Description</th>\n<th>Measurement type</th>\n<th>Tracking Bug #</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Measuring whether recipe execution on the client was successful, and if not, why it failed, on a per-recipe basis</td>\n<td>Keyed histogram via <a href=\"http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/uptake.html\" rel=\"nofollow\">Uptake Telemetry</a></td>\n<td><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"234720063\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/802\" href=\"https://github.com/mozilla/normandy/issues/802\">#802</a></td>\n</tr></tbody></table>\n<h2>4) How long will this data be collected?  Choose one of the following:</h2>\n<p>I want to permanently monitor this data. (Michael Kelly, Shield Dev Team)</p>\n<h2>5) What populations do you need to these measurements for?</h2>\n<p>All Desktop Firefox users: all release channels, countries, and locales.</p>\n<h2>6) Please provide a general description of how you will analyze this data.</h2>\n<p>We plan to aggregate this data by recipe and by action and make the aggregated counts available via the Normandy admin interface. We may also build alert-based monitoring for unexpected error counts. It's undecided if we will store the aggregated data within Normandy or pull it remotely on demand.</p>\n<p>Longer-term, <a href=\"http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/uptake.html\" rel=\"nofollow\">Uptake Telemetry</a> may have plans to add automated analysis of all update channels using it to report uptake.</p>\n<h2>7) What alternative methods did you consider to answer this question? Why were they not sufficient?</h2>\n<p>There aren't many alternatives for answering the question of how client-side recipe execution occurred. The main alternative was to only report error information to an existing error monitoring system, like Sentry, but other Firefox projects have had technical issues reporting errors from privileged Firefox code to Sentry.</p>\n<h2>8) Can current instrumentation answer this question?</h2>\n<p>Nope. Nothing else is currently monitoring the execution of Shield recipes.</p>\n<h2>9) Where do you intend to share the results of your analysis?</h2>\n<p>The Normandy admin interface. We have existing plans to add public dashboards to Normandy describing the content that is currently going out, and will evaluate whether these counts are appropriate to share on that dashboard later.</p>\n<h1>Supplementary details</h1>\n<h2>Describe the analysis you will perform on the collected data to answer the motivating question.</h2>\n<ul>\n<li>Other (please describe in extensive detail below)</li>\n</ul>\n<p>The engineering team will integrate the data analysis with the Normandy admin UI, which will be monitored by engineering, product management, and other Shield users.</p>\n<h2>What data platform are you using to collect this data?  Examples:</h2>\n<p>Unified Telemetry + custom admin integration</p>\n<h2>If using Unified Telemetry, please indicate how your measurements are implemented according to the following:</h2>\n<p>Telemetry histogram (main ping) via <a href=\"http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/uptake.html\" rel=\"nofollow\">Uptake Telemetry</a></p>\n<h2>Provide an example of the measurement artifact (e.g. JSON blob) that will be produced</h2>\n<p>Here's an example of the keyed histogram that is included with the main telemetry ping for uptake data:</p>\n<div class=\"highlight highlight-source-json\"><pre>{\n  <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>UPTAKE_REMOTE_CONTENT_RESULT_1<span class=\"pl-pds\">\"</span></span>: {\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>shield-recipe-client/runner<span class=\"pl-pds\">\"</span></span>: {\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>range<span class=\"pl-pds\">\"</span></span>: [\n        <span class=\"pl-c1\">1</span>,\n        <span class=\"pl-c1\">50</span>\n      ],\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>bucket_count<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">51</span>,\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>histogram_type<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">1</span>,\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>values<span class=\"pl-pds\">\"</span></span>: {\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>0<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">1</span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">0</span>\n      },\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sum<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">0</span>\n    },\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>shield-recipe-client/action/show-heartbeat<span class=\"pl-pds\">\"</span></span>: {\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>range<span class=\"pl-pds\">\"</span></span>: [\n        <span class=\"pl-c1\">1</span>,\n        <span class=\"pl-c1\">50</span>\n      ],\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>bucket_count<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">51</span>,\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>histogram_type<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">1</span>,\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>values<span class=\"pl-pds\">\"</span></span>: {\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>6<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">0</span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>7<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">1</span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>8<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">0</span>\n      },\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sum<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">7</span>\n    },\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>shield-recipe-runner/recipe/17<span class=\"pl-pds\">\"</span></span>: {\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>range<span class=\"pl-pds\">\"</span></span>: [\n        <span class=\"pl-c1\">1</span>,\n        <span class=\"pl-c1\">50</span>\n      ],\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>bucket_count<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">51</span>,\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>histogram_type<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">1</span>,\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>values<span class=\"pl-pds\">\"</span></span>: {\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>0<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">1</span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">0</span>\n      },\n      <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sum<span class=\"pl-pds\">\"</span></span>: <span class=\"pl-c1\">0</span>\n    },\n  },\n}</pre></div>", "id": 316795682, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/818"}