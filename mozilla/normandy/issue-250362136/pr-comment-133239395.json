{"original_position": 80, "diff_hunk": "@@ -0,0 +1,88 @@\n+import { Col, Row, Input, Select } from 'antd';\n+import { Map, List } from 'immutable';\n+import PropTypes from 'prop-types';\n+import React from 'react';\n+import { connect } from 'react-redux';\n+\n+import SwitchBox from 'control_new/components/forms/SwitchBox';\n+import FormItem from 'control_new/components/forms/FormItem';\n+import { connectFormProps } from 'control_new/utils/forms';\n+\n+import { getExtensionListing } from 'control_new/state/app/extensions/selectors';\n+\n+@connectFormProps\n+@connect(\n+  state => ({\n+    extensions: getExtensionListing(state),\n+  }),\n+)\n+export default class OptOutStudyFields extends React.Component {\n+  static propTypes = {\n+    disabled: PropTypes.bool,\n+    extensions: PropTypes.instanceOf(List).isRequired,\n+    recipeArguments: PropTypes.instanceOf(Map).isRequired,\n+  };\n+\n+  static defaultProps = {\n+    disabled: false,\n+    extensions: new List(),\n+    recipeArguments: new Map(),\n+  };\n+\n+  render() {\n+    const {\n+      recipeArguments,\n+      disabled,\n+    } = this.props;\n+    return (\n+      <Row>\n+        <p className=\"action-info\">Enroll the user in a study which they can remove themselves from.</p>\n+        <Row gutter={24}>\n+          <Col xs={24} md={12}>\n+            <FormItem\n+              label=\"Study Name\"\n+              name=\"arguments.name\"\n+              initialValue={recipeArguments.get('name', '')}\n+            >\n+              <Input disabled={disabled} />\n+            </FormItem>\n+            <FormItem\n+              label=\"Study Description\"\n+              name=\"arguments.description\"\n+              initialValue={recipeArguments.get('description', '')}\n+            >\n+              <Input type=\"textarea\" rows=\"3\" disabled={disabled} />\n+            </FormItem>\n+          </Col>\n+\n+          <Col xs={24} md={12}>\n+            <FormItem\n+              label=\"Add-on Extension\"\n+              name=\"arguments.addonUrl\"\n+              initialValue={recipeArguments.get('addonUrl', '')}\n+            >\n+              <Select disabled={disabled}>\n+                {this.props.extensions.map(extension =>\n+                  (<Select.Option key={extension.get('id')} value={extension.get('xpi')}>\n+                    {extension.get('name')}\n+                  </Select.Option>),\n+                )}\n+              </Select>\n+            </FormItem>\n+\n+            <FormItem\n+              label=\"Prevent New Enrollment\"\n+              name=\"arguments.isEnrollmentPaused\"\n+              initialValue={recipeArguments.get('isEnrollmentPaused', false)}\n+            >\n+              <SwitchBox>\n+                Prevents new users from joining this study&nbsp;cohort. <br /> Existing\n+                users will remain in&nbsp;the&nbsp;study.", "body_text": "They're non-breaking spaces, to prevent widows:\nLong text long text existing users will remain in the\nstudy.\n\nHere, I'm ensuring that cohort/study don't become widows. Technically, this could be accomplished via CSS, but I've never gotten the widows/orphans properties to work correctly.", "in_reply_to_id": 133236736, "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/985", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/133239395", "created_at": "2017-08-15T16:43:39Z", "author_association": "CONTRIBUTOR", "body": "They're non-breaking spaces, to prevent widows:\r\n\r\n```\r\nLong text long text existing users will remain in the\r\nstudy.\r\n```\r\nHere, I'm ensuring that `cohort`/`study` don't become widows. Technically, this could be accomplished via CSS, but I've never gotten the `widows`/`orphans` properties to work correctly.", "updated_at": "2017-08-18T15:50:43Z", "html_url": "https://github.com/mozilla/normandy/pull/985#discussion_r133239395", "pull_request_review_id": 56396879, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/133239395"}, "html": {"href": "https://github.com/mozilla/normandy/pull/985#discussion_r133239395"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/985"}}, "commit_id": "e4406b5f88d606c7ae83bb0f5699ea977bf18d15", "user": {"following_url": "https://api.github.com/users/andymikulski/following{/other_user}", "events_url": "https://api.github.com/users/andymikulski/events{/privacy}", "organizations_url": "https://api.github.com/users/andymikulski/orgs", "url": "https://api.github.com/users/andymikulski", "gists_url": "https://api.github.com/users/andymikulski/gists{/gist_id}", "html_url": "https://github.com/andymikulski", "subscriptions_url": "https://api.github.com/users/andymikulski/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/2767162?v=4", "repos_url": "https://api.github.com/users/andymikulski/repos", "received_events_url": "https://api.github.com/users/andymikulski/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/andymikulski/starred{/owner}{/repo}", "site_admin": false, "login": "andymikulski", "type": "User", "id": 2767162, "followers_url": "https://api.github.com/users/andymikulski/followers"}, "position": null, "path": "recipe-server/client/control_new/components/recipes/OptOutStudyFields.js", "body_html": "<p>They're non-breaking spaces, to prevent widows:</p>\n<pre><code>Long text long text existing users will remain in the\nstudy.\n</code></pre>\n<p>Here, I'm ensuring that <code>cohort</code>/<code>study</code> don't become widows. Technically, this could be accomplished via CSS, but I've never gotten the <code>widows</code>/<code>orphans</code> properties to work correctly.</p>", "original_commit_id": "b5c820e928f0dae6e2ddd594b4fa290a77fb45e2", "id": 133239395}