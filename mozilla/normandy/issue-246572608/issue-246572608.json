{"body_text": "I was looking at the test slowness in #914; even locally I was starting to get out-of-memory errors. I merged in #918 and it fixed the problem, but prod builds were still taking 80 seconds or so.\nI suspected Babili was the issue given that prod builds were the ones mainly affected. Since we switched to it, the Uglify harmony branch (uglify-es on npm) has landed support for async/await, which was the main reason we switched away. The webpack plugin has a beta version 1.0.0-beta.2 that uses uglify-es; when I swapped it out for Babili in the main build and ran it locally, the build time went down to 24 seconds. Yay!\nThis PR is mostly to see how Circle runs the tests with all these changes piled together.", "labels": [], "number": 943, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-07-30T18:54:37Z", "body_html": "<p>I was looking at the test slowness in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"245518159\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/914\" href=\"https://github.com/mozilla/normandy/pull/914\">#914</a>; even locally I was starting to get out-of-memory errors. I merged in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"245548813\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/918\" href=\"https://github.com/mozilla/normandy/pull/918\">#918</a> and it fixed the problem, but prod builds were still taking 80 seconds or so.</p>\n<p>I suspected Babili was the issue given that prod builds were the ones mainly affected. Since we switched to it, the Uglify harmony branch (<code>uglify-es</code> on npm) has landed support for async/await, which was the main reason we switched away. The webpack plugin has a beta version <code>1.0.0-beta.2</code> that uses <code>uglify-es</code>; when I swapped it out for Babili in the main build and ran it locally, the build time went down to 24 seconds. Yay!</p>\n<p>This PR is mostly to see how Circle runs the tests with all these changes piled together.</p>", "id": 246572608, "title": "Uglify test", "pull_request": {"url": "https://api.github.com/repos/mozilla/normandy/pulls/943", "diff_url": "https://github.com/mozilla/normandy/pull/943.diff", "html_url": "https://github.com/mozilla/normandy/pull/943", "patch_url": "https://github.com/mozilla/normandy/pull/943.patch"}, "comments": 1, "state": "closed", "body": "I was looking at the test slowness in #914; even locally I was starting to get out-of-memory errors. I merged in #918 and it fixed the problem, but prod builds were still taking 80 seconds or so. \r\n\r\nI suspected Babili was the issue given that prod builds were the ones mainly affected. Since we switched to it, the Uglify harmony branch (`uglify-es` on npm) has landed support for async/await, which was the main reason we switched away. The webpack plugin has a beta version `1.0.0-beta.2` that uses `uglify-es`; when I swapped it out for Babili in the main build and ran it locally, the build time went down to 24 seconds. Yay!\r\n\r\nThis PR is mostly to see how Circle runs the tests with all these changes piled together.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/943/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/943/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/943/comments", "html_url": "https://github.com/mozilla/normandy/pull/943", "updated_at": "2017-07-30T18:54:42Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/943", "created_at": "2017-07-30T09:16:55Z", "assignees": []}