{"original_position": 75, "diff_hunk": "@@ -70,79 +74,84 @@ describe('controlApp Actions', () => {\n     const expectedAction = { type: actionTypes.RECIPES_RECEIVED, recipes: fixtureRecipes }\n     spyOn(window, 'fetch').and.returnValue(successPromise(fixtureRecipes));\n \n-    return store.dispatch(controlActions.makeApiRequest('fetchAllRecipes')).then(() => {\n+    return store.dispatch(actionTypes.makeApiRequest('fetchAllRecipes'))\n+    .then((response) => {\n+      store.dispatch(actionTypes.recipesReceived(response));\n+\n       expect(window.fetch).toHaveBeenCalled();\n-      expect(window.fetch).toHaveBeenCalledWith('/api/v1/recipe/?format=json&', jasmine.any(Object));\n+      expect(window.fetch).toHaveBeenCalledWith('/api/v1/recipe/', jasmine.objectContaining({ method: 'GET' }));\n       expect(store.getActions()).toContain(expectedAction);\n     });\n-\n-  });\n-\n-  it('doesnt create any actions if fetching recipes is not needed', () => {\n-    const store = mockStore({ controlApp: { ...initialState, recipeListNeedsFetch: false } }, []);\n-\n-    store.dispatch(controlActions.makeApiRequest('fetchAllRecipes'));\n-    expect(store.getActions()).toEqual([]);\n   });\n \n-  it('creates SINGLE_RECIPE_RECEIVED when fetching a single RECIPE is successful', () => {\n+  it('creates SINGLE_RECIPE_RECEIVED when fetching by RECIPE id is successful', () => {", "body_text": "Same goes for this test as the one above.\nAnd the ones below, too.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/171", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/68302777", "created_at": "2016-06-23T19:51:00Z", "author_association": "MEMBER", "body": "Same goes for this test as the one above.\n\nAnd the ones below, too.\n", "updated_at": "2016-06-29T19:03:17Z", "html_url": "https://github.com/mozilla/normandy/pull/171#discussion_r68302777", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/68302777"}, "html": {"href": "https://github.com/mozilla/normandy/pull/171#discussion_r68302777"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/171"}}, "commit_id": "eccf53d0106764be093f2baebd03f9dd2896165f", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "normandy/control/tests/actions/controlActions.js", "body_html": "<p>Same goes for this test as the one above.</p>\n<p>And the ones below, too.</p>", "original_commit_id": "e0953fd4f1bbdd71eaf1f941bac4f51ba4253807", "id": 68302777}