{"body": "Phew. Okay. I think this is ready.\n\nI spun my wheels on trying to remove action code and schemas from the database, but couldn't come up with a good solution. I'm convinced one exists, but I think landing this is a better thing to do than to stand around trying to find one.\n\nAction code lives in `normandy/recipes/static/actions`. Whenever the code or schema changes, you need to run `manage.py update_actions` to update the code in the database. The webpack config for actions will do this automatically if you pass the `--update-actions` flag to webpack. This can be combined with `--watch` so that you can just save actions and refresh the self-repair page during development.\n\n`update_actions` disables recipes being used by actions that are updated. You can pass `--no-disable` to not do that.\n\nWe'll need to update the deploy process to call `update_actions` on deploy so that the database has the latest action code. This also means that deploys can potentially automatically disable recipes. I think that's fine.\n\nI call upon @rehandalal for r?, although feedback from @brittanystoroz would be appreciated as well.\n", "body_text": "Phew. Okay. I think this is ready.\nI spun my wheels on trying to remove action code and schemas from the database, but couldn't come up with a good solution. I'm convinced one exists, but I think landing this is a better thing to do than to stand around trying to find one.\nAction code lives in normandy/recipes/static/actions. Whenever the code or schema changes, you need to run manage.py update_actions to update the code in the database. The webpack config for actions will do this automatically if you pass the --update-actions flag to webpack. This can be combined with --watch so that you can just save actions and refresh the self-repair page during development.\nupdate_actions disables recipes being used by actions that are updated. You can pass --no-disable to not do that.\nWe'll need to update the deploy process to call update_actions on deploy so that the database has the latest action code. This also means that deploys can potentially automatically disable recipes. I think that's fine.\nI call upon @rehandalal for r?, although feedback from @brittanystoroz would be appreciated as well.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/220469668", "created_at": "2016-05-19T22:27:27Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/pull/144#issuecomment-220469668", "updated_at": "2016-05-19T22:27:27Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "body_html": "<p>Phew. Okay. I think this is ready.</p>\n<p>I spun my wheels on trying to remove action code and schemas from the database, but couldn't come up with a good solution. I'm convinced one exists, but I think landing this is a better thing to do than to stand around trying to find one.</p>\n<p>Action code lives in <code>normandy/recipes/static/actions</code>. Whenever the code or schema changes, you need to run <code>manage.py update_actions</code> to update the code in the database. The webpack config for actions will do this automatically if you pass the <code>--update-actions</code> flag to webpack. This can be combined with <code>--watch</code> so that you can just save actions and refresh the self-repair page during development.</p>\n<p><code>update_actions</code> disables recipes being used by actions that are updated. You can pass <code>--no-disable</code> to not do that.</p>\n<p>We'll need to update the deploy process to call <code>update_actions</code> on deploy so that the database has the latest action code. This also means that deploys can potentially automatically disable recipes. I think that's fine.</p>\n<p>I call upon <a class=\"user-mention\" href=\"https://github.com/rehandalal\">@rehandalal</a> for r?, although feedback from <a class=\"user-mention\" href=\"https://github.com/brittanystoroz\">@brittanystoroz</a> would be appreciated as well.</p>", "id": 220469668, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/144"}