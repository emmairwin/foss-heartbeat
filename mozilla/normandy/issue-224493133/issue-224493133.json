{"body_text": "I see this during late-stage startup on my profile:\nGET XHR https://self-repair.mozilla.org/api/v1 [HTTP/1.1 301 Moved Permanently 0ms]\nGET XHR https://self-repair.mozilla.org/api/v1/ [HTTP/1.1 200 OK 104ms]\n\u2026\nGET XHR https://self-repair.mozilla.org/api/v1/action/console-log [HTTP/1.1 301 Moved Permanently 0ms]\nGET XHR https://self-repair.mozilla.org/api/v1/action/console-log/ [HTTP/1.1 200 OK 53ms]\n\nThe call stacks, with promise bumpf elided:\n        apiCall resource://shield-recipe-client/lib/NormandyApi.jsm:42:12\n\tget resource://shield-recipe-client/lib/NormandyApi.jsm:46:12\n\tthis.NormandyApi.fetchAction< resource://shield-recipe-client/lib/NormandyApi.jsm:136:23\n\tthis.NormandyApi.fetchAction< resource://shield-recipe-client/lib/NormandyApi.jsm:132:30\n\tthis.RecipeRunner.executeRecipe< resource://shield-recipe-client/lib/RecipeRunner.jsm:135:26\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:95:17\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\n\nI think there's a missing trailing slash somewhere, causing hundreds of millions of surplus HTTP requests each day. Worth a fix?", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}], "number": 719, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-05-03T17:45:13Z", "body_html": "<p>I see this during late-stage startup on my profile:</p>\n<pre><code>GET XHR https://self-repair.mozilla.org/api/v1 [HTTP/1.1 301 Moved Permanently 0ms]\nGET XHR https://self-repair.mozilla.org/api/v1/ [HTTP/1.1 200 OK 104ms]\n\u2026\nGET XHR https://self-repair.mozilla.org/api/v1/action/console-log [HTTP/1.1 301 Moved Permanently 0ms]\nGET XHR https://self-repair.mozilla.org/api/v1/action/console-log/ [HTTP/1.1 200 OK 53ms]\n</code></pre>\n<p>The call stacks, with promise bumpf elided:</p>\n<pre><code>        apiCall resource://shield-recipe-client/lib/NormandyApi.jsm:42:12\n\tget resource://shield-recipe-client/lib/NormandyApi.jsm:46:12\n\tthis.NormandyApi.fetchAction&lt; resource://shield-recipe-client/lib/NormandyApi.jsm:136:23\n\tthis.NormandyApi.fetchAction&lt; resource://shield-recipe-client/lib/NormandyApi.jsm:132:30\n\tthis.RecipeRunner.executeRecipe&lt; resource://shield-recipe-client/lib/RecipeRunner.jsm:135:26\n\tthis.RecipeRunner.start&lt; resource://shield-recipe-client/lib/RecipeRunner.jsm:95:17\n\tthis.RecipeRunner.start&lt; resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\n\tthis.RecipeRunner.start&lt; resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\n\tthis.RecipeRunner.start&lt; resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\n</code></pre>\n<p>I think there's a missing trailing slash somewhere, causing hundreds of millions of surplus HTTP requests each day. Worth a fix?</p>", "id": 224493133, "title": "getApiUrl omits trailing slashes", "comments": 3, "state": "closed", "body": "I see this during late-stage startup on my profile:\r\n\r\n```\r\nGET XHR https://self-repair.mozilla.org/api/v1 [HTTP/1.1 301 Moved Permanently 0ms]\r\nGET XHR https://self-repair.mozilla.org/api/v1/ [HTTP/1.1 200 OK 104ms]\r\n\u2026\r\nGET XHR https://self-repair.mozilla.org/api/v1/action/console-log [HTTP/1.1 301 Moved Permanently 0ms]\r\nGET XHR https://self-repair.mozilla.org/api/v1/action/console-log/ [HTTP/1.1 200 OK 53ms]\r\n```\r\n\r\nThe call stacks, with promise bumpf elided:\r\n\r\n```\r\n        apiCall resource://shield-recipe-client/lib/NormandyApi.jsm:42:12\r\n\tget resource://shield-recipe-client/lib/NormandyApi.jsm:46:12\r\n\tthis.NormandyApi.fetchAction< resource://shield-recipe-client/lib/NormandyApi.jsm:136:23\r\n\tthis.NormandyApi.fetchAction< resource://shield-recipe-client/lib/NormandyApi.jsm:132:30\r\n\tthis.RecipeRunner.executeRecipe< resource://shield-recipe-client/lib/RecipeRunner.jsm:135:26\r\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:95:17\r\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\r\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\r\n\tthis.RecipeRunner.start< resource://shield-recipe-client/lib/RecipeRunner.jsm:84:17\r\n```\r\n\r\nI think there's a missing trailing slash somewhere, causing hundreds of millions of surplus HTTP requests each day. Worth a fix?", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/719/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/719/labels{/name}", "author_association": "NONE", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/719/comments", "html_url": "https://github.com/mozilla/normandy/issues/719", "updated_at": "2017-05-03T17:45:13Z", "user": {"following_url": "https://api.github.com/users/rnewman/following{/other_user}", "events_url": "https://api.github.com/users/rnewman/events{/privacy}", "organizations_url": "https://api.github.com/users/rnewman/orgs", "url": "https://api.github.com/users/rnewman", "gists_url": "https://api.github.com/users/rnewman/gists{/gist_id}", "html_url": "https://github.com/rnewman", "subscriptions_url": "https://api.github.com/users/rnewman/subscriptions", "avatar_url": "https://avatars2.githubusercontent.com/u/91722?v=4", "repos_url": "https://api.github.com/users/rnewman/repos", "received_events_url": "https://api.github.com/users/rnewman/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/rnewman/starred{/owner}{/repo}", "site_admin": false, "login": "rnewman", "type": "User", "id": 91722, "followers_url": "https://api.github.com/users/rnewman/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/719", "created_at": "2017-04-26T14:44:01Z", "assignees": []}