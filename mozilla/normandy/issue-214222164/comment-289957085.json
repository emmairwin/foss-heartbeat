{"body": "> I've fixed @Osmose 's review points:\r\n\r\nThanks, this does seem to fix the issues I was seeing before! However, I'm now seeing new issues:\r\n\r\n1. After creating a new recipe (or editing an existing recipe), the \"Request Approval\" button remains disabled until I refresh the page. If I save the draft, then edit the form back to it's original state before I made any edits, the \"Save Draft\" button is disabled and \"Request Approval\" is enabled again, even though the version saved on the server doesn't match the form.\r\n\r\n2. If I submit a recipe for approval, and reject it, the \"Request Approval\" button disappears. But then, if I save a new draft, the button doesn't appear again, and the rejection information remains even though I've created a new revision (the rejection information says specifically \"this revision has been rejected\", which is why I was confused by this). Refreshing fixes this.\r\n\r\n3. If I approve a recipe, and then save a new draft before enabling it, I get shown the loading indicator, and the devtools shows a successful PATCH request, but the returned recipe data doesn't match my edit. If I refresh the page, the recipe doesn't have my saved draft and is waiting for me to enable it again.\r\n\r\n4. If I approve a recipe, then enable it, then save a new draft, I get shown the loading indicator. Refreshing the page shows that my new draft wasn't saved. If I disable the recipe, then the edit form updates and now has my saved draft from earlier.\r\n\r\nLet me know if I can provide any more info or better replication steps.", "body_text": "I've fixed @Osmose 's review points:\n\nThanks, this does seem to fix the issues I was seeing before! However, I'm now seeing new issues:\n\n\nAfter creating a new recipe (or editing an existing recipe), the \"Request Approval\" button remains disabled until I refresh the page. If I save the draft, then edit the form back to it's original state before I made any edits, the \"Save Draft\" button is disabled and \"Request Approval\" is enabled again, even though the version saved on the server doesn't match the form.\n\n\nIf I submit a recipe for approval, and reject it, the \"Request Approval\" button disappears. But then, if I save a new draft, the button doesn't appear again, and the rejection information remains even though I've created a new revision (the rejection information says specifically \"this revision has been rejected\", which is why I was confused by this). Refreshing fixes this.\n\n\nIf I approve a recipe, and then save a new draft before enabling it, I get shown the loading indicator, and the devtools shows a successful PATCH request, but the returned recipe data doesn't match my edit. If I refresh the page, the recipe doesn't have my saved draft and is waiting for me to enable it again.\n\n\nIf I approve a recipe, then enable it, then save a new draft, I get shown the loading indicator. Refreshing the page shows that my new draft wasn't saved. If I disable the recipe, then the edit form updates and now has my saved draft from earlier.\n\n\nLet me know if I can provide any more info or better replication steps.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/289957085", "created_at": "2017-03-29T01:45:47Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/pull/613#issuecomment-289957085", "updated_at": "2017-03-29T01:45:47Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "body_html": "<blockquote>\n<p>I've fixed <a class=\"user-mention\" href=\"https://github.com/osmose\">@Osmose</a> 's review points:</p>\n</blockquote>\n<p>Thanks, this does seem to fix the issues I was seeing before! However, I'm now seeing new issues:</p>\n<ol>\n<li>\n<p>After creating a new recipe (or editing an existing recipe), the \"Request Approval\" button remains disabled until I refresh the page. If I save the draft, then edit the form back to it's original state before I made any edits, the \"Save Draft\" button is disabled and \"Request Approval\" is enabled again, even though the version saved on the server doesn't match the form.</p>\n</li>\n<li>\n<p>If I submit a recipe for approval, and reject it, the \"Request Approval\" button disappears. But then, if I save a new draft, the button doesn't appear again, and the rejection information remains even though I've created a new revision (the rejection information says specifically \"this revision has been rejected\", which is why I was confused by this). Refreshing fixes this.</p>\n</li>\n<li>\n<p>If I approve a recipe, and then save a new draft before enabling it, I get shown the loading indicator, and the devtools shows a successful PATCH request, but the returned recipe data doesn't match my edit. If I refresh the page, the recipe doesn't have my saved draft and is waiting for me to enable it again.</p>\n</li>\n<li>\n<p>If I approve a recipe, then enable it, then save a new draft, I get shown the loading indicator. Refreshing the page shows that my new draft wasn't saved. If I disable the recipe, then the edit form updates and now has my saved draft from earlier.</p>\n</li>\n</ol>\n<p>Let me know if I can provide any more info or better replication steps.</p>", "id": 289957085, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/613"}