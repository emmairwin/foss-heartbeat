{"original_position": 39, "diff_hunk": "@@ -0,0 +1,116 @@\n+Docker for QA\n+=============\n+The following describes how to get a prebuilt instance of Normandy for\n+testing. This is not suitable for development.\n+\n+Prerequisites\n+-------------\n+This guide assumes you have already installed and set up the following:\n+\n+1. Docker_\n+2. `Postgres 9.4`_\n+\n+.. _Docker: https://docs.docker.com/engine/installation/\n+.. _Postgres 9.4: http://www.postgresql.org/\n+\n+Preparing an environment file\n+-----------------------------\n+Normandy gets all of its configuration via environment variables. Docker\n+has built in support for this pattern. For this set up, we will be using\n+and environment file to specifiy this configuration, and having Docker\n+read that file.\n+\n+The file can be named anything, but canonically is named ``.env``. The\n+only thing that is required is a database config, which looks something\n+like the below. We'll go over how to fill in the blanks next.\n+\n+.. code-block:: ini\n+\n+  DATABASE_URL=postgresql://<username>:<password>@<host>/<db_name>\n+\n+``<username>`` and ``<password>`` are the details to authenticate with\n+Postgres. ``<db_name>`` is the name of the database to connect to, and\n+is usually ``normandy``.\n+\n+``<host>`` is more complicated. This needs to be something that the\n+Docker container can use to connect to Postgres. There are a few options here:\n+\n+Linux with local Postgres\n+  Use ``172.17.0.1``", "body_text": "I think the most accurate thing I can put here without going to far into the weeds is something like\n\nThis needs to be the IP address of your host machine on a network the Docker container can access. This can be figured out by looking at the IP address of the host on the bridge network device.\nThe defaults for this IP are usually one of these two values:\n\nOn Linux: 172.17.0.1\nWith Docker Machine (on OSX or Windows): 192.168.99.1\n\n\nHow does that sound?", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/54", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/54601698", "created_at": "2016-03-01T17:24:14Z", "author_association": "MEMBER", "body": "I think the most accurate thing I can put here without going to far into the weeds is something like\n\n> This needs to be the IP address of your host machine on a network the Docker container can access. This can be figured out by looking at the IP address of the host on the bridge network device.\n> \n> The defaults for this IP are _usually_ one of these two values:\n> - On Linux: `172.17.0.1`\n> - With Docker Machine (on OSX or Windows): `192.168.99.1`\n\nHow does that sound?\n", "updated_at": "2016-03-02T00:58:23Z", "html_url": "https://github.com/mozilla/normandy/pull/54#discussion_r54601698", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/54601698"}, "html": {"href": "https://github.com/mozilla/normandy/pull/54#discussion_r54601698"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/54"}}, "commit_id": "0017d89b4341090efa2aaca5f53b07310de3b234", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "docs/qa/docker.rst", "body_html": "<p>I think the most accurate thing I can put here without going to far into the weeds is something like</p>\n<blockquote>\n<p>This needs to be the IP address of your host machine on a network the Docker container can access. This can be figured out by looking at the IP address of the host on the bridge network device.</p>\n<p>The defaults for this IP are <em>usually</em> one of these two values:</p>\n<ul>\n<li>On Linux: <code>172.17.0.1</code></li>\n<li>With Docker Machine (on OSX or Windows): <code>192.168.99.1</code></li>\n</ul>\n</blockquote>\n<p>How does that sound?</p>", "original_commit_id": "88c9d00de264cdf2310d46303681c53b71f7f139", "id": 54601698}