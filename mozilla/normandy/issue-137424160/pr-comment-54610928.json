{"original_position": 39, "diff_hunk": "@@ -0,0 +1,116 @@\n+Docker for QA\n+=============\n+The following describes how to get a prebuilt instance of Normandy for\n+testing. This is not suitable for development.\n+\n+Prerequisites\n+-------------\n+This guide assumes you have already installed and set up the following:\n+\n+1. Docker_\n+2. `Postgres 9.4`_\n+\n+.. _Docker: https://docs.docker.com/engine/installation/\n+.. _Postgres 9.4: http://www.postgresql.org/\n+\n+Preparing an environment file\n+-----------------------------\n+Normandy gets all of its configuration via environment variables. Docker\n+has built in support for this pattern. For this set up, we will be using\n+and environment file to specifiy this configuration, and having Docker\n+read that file.\n+\n+The file can be named anything, but canonically is named ``.env``. The\n+only thing that is required is a database config, which looks something\n+like the below. We'll go over how to fill in the blanks next.\n+\n+.. code-block:: ini\n+\n+  DATABASE_URL=postgresql://<username>:<password>@<host>/<db_name>\n+\n+``<username>`` and ``<password>`` are the details to authenticate with\n+Postgres. ``<db_name>`` is the name of the database to connect to, and\n+is usually ``normandy``.\n+\n+``<host>`` is more complicated. This needs to be something that the\n+Docker container can use to connect to Postgres. There are a few options here:\n+\n+Linux with local Postgres\n+  Use ``172.17.0.1``", "body_text": "The docker-machine command you showed me is the command the find the IP of the virtual machine. Here we need the IP of the host machine that is accessible to the container.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/54", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/54610928", "created_at": "2016-03-01T18:26:34Z", "author_association": "MEMBER", "body": "The docker-machine command you showed me is the command the find the IP of the _virtual machine_. Here we need the IP of the _host machine_ that is accessible to the container.\n", "updated_at": "2016-03-02T00:58:23Z", "html_url": "https://github.com/mozilla/normandy/pull/54#discussion_r54610928", "pull_request_review_id": null, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/54610928"}, "html": {"href": "https://github.com/mozilla/normandy/pull/54#discussion_r54610928"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/54"}}, "commit_id": "0017d89b4341090efa2aaca5f53b07310de3b234", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "position": null, "path": "docs/qa/docker.rst", "body_html": "<p>The docker-machine command you showed me is the command the find the IP of the <em>virtual machine</em>. Here we need the IP of the <em>host machine</em> that is accessible to the container.</p>", "original_commit_id": "88c9d00de264cdf2310d46303681c53b71f7f139", "id": 54610928}