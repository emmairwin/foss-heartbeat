{"body": "> Not performance concerns, as such, but the event loop tends to be so busy during startup that, unless you start the query very early, there's a good chance you won't get the response until after firstpaint. But that's also true for just about any other async IO operation.\r\n\r\nGood point, thanks.\r\n\r\nFor this particular feature, I think IndexedDB is fine (the helper I mentioned is [here](http://searchfox.org/mozilla-central/source/toolkit/modules/IndexedDB.jsm)). We don't need to do this immediately at startup, and in [bug 1371350](https://bugzilla.mozilla.org/show_bug.cgi?id=1371350) we're going to split things that happen in `ShieldRecipeClient.jsm` from happening immediately at startup, so the startup methods there are a fine place to register the listeners and check if the add-on was removed between sessions.", "body_text": "Not performance concerns, as such, but the event loop tends to be so busy during startup that, unless you start the query very early, there's a good chance you won't get the response until after firstpaint. But that's also true for just about any other async IO operation.\n\nGood point, thanks.\nFor this particular feature, I think IndexedDB is fine (the helper I mentioned is here). We don't need to do this immediately at startup, and in bug 1371350 we're going to split things that happen in ShieldRecipeClient.jsm from happening immediately at startup, so the startup methods there are a fine place to register the listeners and check if the add-on was removed between sessions.", "url": "https://api.github.com/repos/mozilla/normandy/issues/comments/308805338", "created_at": "2017-06-15T17:04:54Z", "author_association": "MEMBER", "html_url": "https://github.com/mozilla/normandy/issues/749#issuecomment-308805338", "updated_at": "2017-06-15T17:04:54Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "body_html": "<blockquote>\n<p>Not performance concerns, as such, but the event loop tends to be so busy during startup that, unless you start the query very early, there's a good chance you won't get the response until after firstpaint. But that's also true for just about any other async IO operation.</p>\n</blockquote>\n<p>Good point, thanks.</p>\n<p>For this particular feature, I think IndexedDB is fine (the helper I mentioned is <a href=\"http://searchfox.org/mozilla-central/source/toolkit/modules/IndexedDB.jsm\" rel=\"nofollow\">here</a>). We don't need to do this immediately at startup, and in <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1371350\" rel=\"nofollow\">bug 1371350</a> we're going to split things that happen in <code>ShieldRecipeClient.jsm</code> from happening immediately at startup, so the startup methods there are a fine place to register the listeners and check if the add-on was removed between sessions.</p>", "id": 308805338, "issue_url": "https://api.github.com/repos/mozilla/normandy/issues/749"}