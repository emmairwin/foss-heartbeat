{"body_text": "Users should be able to view a list of current and past studies that they have participated in. To show this, we need to store that data, and keep it up-to-date.\nThe install function in #748 should, when called, add a new entry to our internal list of studies the user has participated, storing:\n\nThe unique name for the experiment\nThe install date\nThe study end date (starts off null)\nThe add-on ID\nThe add-on version\nThe add-on description\nThe active status of the study (starts off true)\n\nIn order to detect when the user removes an add-on, we need to monitor two things:\n\nIf we detect the add-on in question is uninstalled (using the AddonManager.addAddonListener method), we should mark the study as inactive and record the time the study ended. We'll need to register these listeners on startup, similar to what we do for preference experiments.\nIf, on startup (before we fetch recipes) we notice that the addon is no longer installed, we should mark the study as inactive and record the time the study ended.\n\n@kmaglione Is IndexedDB, via your promise-based helper, a reasonable place to store this kind of data? Would we be able to ship in 54 (post-release, potentially) if we used IndexedDB.jsm?\nIf not, then we should consider consolidating the JSON files we're storing in the profile folder (currently two of them) rather than adding yet another one.", "labels": [], "number": 749, "assignee": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-08-02T06:25:09Z", "body_html": "<p>Users should be able to view a list of current and past studies that they have participated in. To show this, we need to store that data, and keep it up-to-date.</p>\n<p>The install function in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"227528520\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/mozilla/normandy/issues/748\" href=\"https://github.com/mozilla/normandy/issues/748\">#748</a> should, when called, add a new entry to our internal list of studies the user has participated, storing:</p>\n<ul>\n<li>The unique name for the experiment</li>\n<li>The install date</li>\n<li>The study end date (starts off null)</li>\n<li>The add-on ID</li>\n<li>The add-on version</li>\n<li>The add-on description</li>\n<li>The active status of the study (starts off true)</li>\n</ul>\n<p>In order to detect when the user removes an add-on, we need to monitor two things:</p>\n<ul>\n<li>If we detect the add-on in question is uninstalled (using the <a href=\"https://developer.mozilla.org/en-US/Add-ons/Add-on_Manager/AddonManager#addAddonListener()\" rel=\"nofollow\">AddonManager.addAddonListener</a> method), we should mark the study as inactive and record the time the study ended. We'll need to register these listeners on startup, similar to what we do for preference experiments.</li>\n<li>If, on startup (before we fetch recipes) we notice that the addon is no longer installed, we should mark the study as inactive and record the time the study ended.</li>\n</ul>\n<p><a class=\"user-mention\" href=\"https://github.com/kmaglione\">@kmaglione</a> Is IndexedDB, via your promise-based helper, a reasonable place to store this kind of data? Would we be able to ship in 54 (post-release, potentially) if we used IndexedDB.jsm?</p>\n<p>If not, then we should consider consolidating the JSON files we're storing in the profile folder (currently two of them) rather than adding yet another one.</p>", "id": 227530261, "title": "Store info about installed studies ", "comments": 6, "state": "closed", "body": "Users should be able to view a list of current and past studies that they have participated in. To show this, we need to store that data, and keep it up-to-date.\r\n\r\nThe install function in #748 should, when called, add a new entry to our internal list of studies the user has participated, storing:\r\n\r\n- The unique name for the experiment\r\n- The install date\r\n- The study end date (starts off null)\r\n- The add-on ID\r\n- The add-on version\r\n- The add-on description\r\n- The active status of the study (starts off true)\r\n\r\nIn order to detect when the user removes an add-on, we need to monitor two things:\r\n\r\n- If we detect the add-on in question is uninstalled (using the [AddonManager.addAddonListener](https://developer.mozilla.org/en-US/Add-ons/Add-on_Manager/AddonManager#addAddonListener()) method), we should mark the study as inactive and record the time the study ended. We'll need to register these listeners on startup, similar to what we do for preference experiments.\r\n- If, on startup (before we fetch recipes) we notice that the addon is no longer installed, we should mark the study as inactive and record the time the study ended.\r\n\r\n@kmaglione Is IndexedDB, via your promise-based helper, a reasonable place to store this kind of data? Would we be able to ship in 54 (post-release, potentially) if we used IndexedDB.jsm?\r\n\r\nIf not, then we should consider consolidating the JSON files we're storing in the profile folder (currently two of them) rather than adding yet another one.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/749/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/749/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/749/comments", "html_url": "https://github.com/mozilla/normandy/issues/749", "updated_at": "2018-01-30T17:39:19Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/749", "created_at": "2017-05-09T23:52:36Z", "assignees": [{"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}]}