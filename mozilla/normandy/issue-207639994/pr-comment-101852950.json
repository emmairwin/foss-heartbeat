{"original_position": 49, "diff_hunk": "@@ -0,0 +1,93 @@\n+#!/usr/bin/env python\n+import os\n+\n+import requests\n+from taskcluster import fromNow\n+from taskcluster.utils import stableSlugId, dumpJson\n+\n+tasks = [\n+    {\n+        'name': 'recipe-client-addon:test',\n+        'description': 'Test recipe-client-addon with gecko-dev',\n+        'command': 'normandy/recipe-client-addon/bin/tc/test.sh',\n+        'env': {\n+            'GECKO_DEV_URL': 'https://github.com/mozilla/gecko-dev',\n+        },\n+    },\n+    {\n+        'name': 'recipe-client-addon:make-xpi',\n+        'description': 'Build XPI for recipe-client-addon',\n+        'command': 'normandy/recipe-client-addon/bin/tc/make-xpi.sh',\n+        'dependencies': ['recipe-client-addon:test'],\n+    },\n+]\n+\n+\n+def main():\n+    _idMaker = stableSlugId()\n+\n+    def idMaker(name):\n+        return _idMaker(name).decode()\n+\n+    decisionTaskId = os.environ['TASK_ID']\n+\n+    with requests.Session() as session:\n+        for task in tasks:\n+            dependencies = [idMaker(name) for name in task.get('dependencies', [])]\n+            dependencies.append(decisionTaskId)\n+\n+            env = task.get('env', {})\n+            for key, val in os.environ.items():\n+                if key.startswith('GITHUB_'):\n+                    env.setdefault(key, val)\n+\n+            task_id = idMaker(task['name'])\n+            res = session.put(f'http://taskcluster/queue/v1/task/{task_id}', data=dumpJson({\n+                'metadata': {\n+                    'name': task['name'],\n+                    'description': task['description'],\n+                    'owner': \"mcooper@mozilla.com\",", "body_text": "Can this be any email? Do we need to create a Normandy users with shared credentials?", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/514", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/101852950", "created_at": "2017-02-17T21:41:59Z", "author_association": "MEMBER", "body": "Can this be any email? Do we need to create a Normandy users with shared credentials?", "updated_at": "2017-02-22T22:33:32Z", "html_url": "https://github.com/mozilla/normandy/pull/514#discussion_r101852950", "pull_request_review_id": 22593388, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/101852950"}, "html": {"href": "https://github.com/mozilla/normandy/pull/514#discussion_r101852950"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/514"}}, "commit_id": "70c8f16f1f6dae1920dc0c69ba497c1a70db72f4", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": null, "path": "ci/taskcluster/bin/decision.py", "body_html": "<p>Can this be any email? Do we need to create a Normandy users with shared credentials?</p>", "original_commit_id": "9aebecda4af23261221c85a290520b002e45a649", "id": 101852950}