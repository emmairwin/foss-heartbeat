{"original_position": 52, "diff_hunk": "@@ -86,6 +103,15 @@ export class HeartbeatEmitter {\n export default class NormandyDriver {\n   constructor(uitour = Mozilla.UITour) {\n     this._uitour = uitour;\n+    this.setDurability();", "body_text": "I think setting and checking this is the responsibility of the runtime, since we don't necessarily guarantee that only one driver is created per-run. If something causes the driver to be created multiple times, after the first time it will think that it is durable when in fact it is not.\nI think the driver API we want is more along the lines of just having an isStorageDurable() method.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/313", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/86901820", "created_at": "2016-11-08T00:37:54Z", "author_association": "MEMBER", "body": "I think setting and checking this is the responsibility of the runtime, since we don't necessarily guarantee that only one driver is created per-run. If something causes the driver to be created multiple times, after the first time it will think that it is durable when in fact it is not.\n\nI think the driver API we want is more along the lines of just having an `isStorageDurable()` method.\n", "updated_at": "2016-11-09T00:31:42Z", "html_url": "https://github.com/mozilla/normandy/pull/313#discussion_r86901820", "pull_request_review_id": 7535723, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/86901820"}, "html": {"href": "https://github.com/mozilla/normandy/pull/313#discussion_r86901820"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/313"}}, "commit_id": "710bf7efa61187df4a4b9c69222967f3c14b6ed1", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "position": 53, "path": "client/selfrepair/normandy_driver.js", "body_html": "<p>I think setting and checking this is the responsibility of the runtime, since we don't necessarily guarantee that only one driver is created per-run. If something causes the driver to be created multiple times, after the first time it will think that it is durable when in fact it is not.</p>\n<p>I think the driver API we want is more along the lines of just having an <code>isStorageDurable()</code> method.</p>", "original_commit_id": "3fce5a3816f9cf45adc0ebeba96fa40459d27a66", "id": 86901820}