{"original_position": 62, "diff_hunk": "@@ -0,0 +1,70 @@\n+\"use strict\";\n+\n+Cu.import(\"resource://shield-recipe-client/lib/StudyStorage.jsm\", this);\n+\n+function withStudyStorage(testFn) {\n+  return async () => {\n+    await testFn(StudyStorage);\n+\n+    await StudyStorage.clearAllData();\n+    await StudyStorage.closeConnection();\n+  };\n+}\n+\n+// -------\n+\n+add_task(withStudyStorage(async function checkSaveStudy(storage) {\n+  try {\n+    await storage.saveStudy({\n+      name: \"hi\",\n+      version: 2,\n+      description: \"fake\",\n+      id: 12345\n+    });\n+  } catch (err) {\n+    throw err;\n+  }\n+}));\n+\n+// Test looking up study data\n+add_task(withStudyStorage(async function checkGetStudy(storage) {\n+  const mockStudy = {\n+    name: \"Test\",\n+    version: 2,\n+    description: \"fake\",\n+    id: \"12345\"\n+  };\n+\n+  await storage.saveStudy(mockStudy);\n+\n+  const study = await storage.getStudy(\"Test\");\n+\n+  is(study.name, mockStudy.name, \"StudyStorage loaded name successfully using `getStudyData`.\");\n+  is(study.version, mockStudy.version,\n+    \"StudyStorage loaded version successfully using `getStudyData`.\");\n+}));\n+\n+\n+// Test saving different data with the same `id`\n+add_task(withStudyStorage(async function checkUpdateStudy(storage) {\n+\n+  await storage.saveStudy({\n+    name: \"hey\",\n+    version: 1,\n+    description: \"fake\",\n+    id: \"12345\"\n+  });\n+\n+  await storage.updateStudy({\n+    name: \"hey\",\n+    version: 123,\n+    description: \"test\",\n+    id: \"12345\"", "body_text": "As noted above, this won't do anything. Also note that you're sometimes passing a string and sometimes a number for this property.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/860", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/126101587", "created_at": "2017-07-07T09:07:00Z", "author_association": "CONTRIBUTOR", "body": "As noted above, this won't do anything. Also note that you're sometimes passing a string and sometimes a number for this property.", "updated_at": "2017-07-11T21:12:35Z", "html_url": "https://github.com/mozilla/normandy/pull/860#discussion_r126101587", "pull_request_review_id": 48550816, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/126101587"}, "html": {"href": "https://github.com/mozilla/normandy/pull/860#discussion_r126101587"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/860"}}, "commit_id": "f1440ec998aab5190ee6b3c661e89c7c45e49821", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": null, "path": "recipe-client-addon/test/browser/browser_StudyStorage.js", "body_html": "<p>As noted above, this won't do anything. Also note that you're sometimes passing a string and sometimes a number for this property.</p>", "original_commit_id": "0e79179ffd3eb6c8cf09f6b80bc736136dd0252d", "id": 126101587}