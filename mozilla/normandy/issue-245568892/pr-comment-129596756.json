{"original_position": 18, "diff_hunk": "@@ -182,11 +182,11 @@ this.NormandyDriver = function(sandboxManager) {\n \n     // Study storage API\n     studies: {\n-      create: sandboxManager.wrapAsync(StudyStorage.create, {cloneArguments: true}),\n-      update: sandboxManager.wrapAsync(StudyStorage.update, {cloneArguments: true}),\n-      get: sandboxManager.wrapAsync(StudyStorage.get, {cloneInto: true}),\n-      getAll: sandboxManager.wrapAsync(StudyStorage.getAll, {cloneInto: true}),\n-      has: sandboxManager.wrapAsync(StudyStorage.has),\n+      start: sandboxManager.wrapAsync(AddonStudies.start, {cloneArguments: true, cloneInto: true}),", "body_text": "So... this effectively will allow the recipe to run arbitrary code (somewhat sandboxed via webextensions unless the add-on is signed by mozilla, though on pre-release the recipe could turn that off via the relevant pref and the pref changing mechanisms of recipes!). It's a built-in sandbox escape. Did the relevant security folks OK doing that? Because if anything is wrong with this code or whatnot, people will get owned pretty seriously.", "pull_request_url": "https://api.github.com/repos/mozilla/normandy/pulls/919", "url": "https://api.github.com/repos/mozilla/normandy/pulls/comments/129596756", "created_at": "2017-07-26T14:57:04Z", "author_association": "CONTRIBUTOR", "body": "So... this effectively will allow the recipe to run arbitrary code (somewhat sandboxed via webextensions unless the add-on is signed by mozilla, though on pre-release the recipe could turn that off via the relevant pref and the pref changing mechanisms of recipes!). It's a built-in sandbox escape. Did the relevant security folks OK doing that? Because if anything is wrong with this code or whatnot, people will get owned pretty seriously.", "updated_at": "2017-07-29T08:05:04Z", "html_url": "https://github.com/mozilla/normandy/pull/919#discussion_r129596756", "pull_request_review_id": 52370766, "_links": {"self": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/comments/129596756"}, "html": {"href": "https://github.com/mozilla/normandy/pull/919#discussion_r129596756"}, "pull_request": {"href": "https://api.github.com/repos/mozilla/normandy/pulls/919"}}, "commit_id": "7351b095c1164513f096650ebc41a4298af9fc2c", "user": {"following_url": "https://api.github.com/users/gijsk/following{/other_user}", "events_url": "https://api.github.com/users/gijsk/events{/privacy}", "organizations_url": "https://api.github.com/users/gijsk/orgs", "url": "https://api.github.com/users/gijsk", "gists_url": "https://api.github.com/users/gijsk/gists{/gist_id}", "html_url": "https://github.com/gijsk", "subscriptions_url": "https://api.github.com/users/gijsk/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/375983?v=4", "repos_url": "https://api.github.com/users/gijsk/repos", "received_events_url": "https://api.github.com/users/gijsk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/gijsk/starred{/owner}{/repo}", "site_admin": false, "login": "gijsk", "type": "User", "id": 375983, "followers_url": "https://api.github.com/users/gijsk/followers"}, "position": 18, "path": "recipe-client-addon/lib/NormandyDriver.jsm", "body_html": "<p>So... this effectively will allow the recipe to run arbitrary code (somewhat sandboxed via webextensions unless the add-on is signed by mozilla, though on pre-release the recipe could turn that off via the relevant pref and the pref changing mechanisms of recipes!). It's a built-in sandbox escape. Did the relevant security folks OK doing that? Because if anything is wrong with this code or whatnot, people will get owned pretty seriously.</p>", "original_commit_id": "2bf859d0e75d413a3bf070eecc920d3418f1004c", "id": 129596756}