{"body_text": "Currently, we use Services.appinfo.defaultUpdateChannel to determine the update channel used in filtering. However, this value changes from beta to release when the RC builds hit the Beta channel. This bit us by preemptively stopping a preference experiment on Beta.\nGiven that we ship changes to Firefox, we should probably use a more stable indicator for update channel. The update system uses UpdateUtils.jsm to get the update channel. However, this adds a bunch of extra modifiers to the channel. We should take this into account when figuring out how to write filters with this value:\n\nShould we add some transforms to compare the base channel?\nShould we manually remove the extra annotations and expose that as the channel value?\n\n@Mossop @gijsk Can one of you double-check my thinking on this?", "labels": [], "number": 957, "assignee": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-09-25T20:04:09Z", "body_html": "<p>Currently, we use <code>Services.appinfo.defaultUpdateChannel</code> to determine the update channel used in filtering. However, this value changes from <code>beta</code> to <code>release</code> when the RC builds hit the Beta channel. This bit us by preemptively stopping a preference experiment on Beta.</p>\n<p>Given that we ship changes to Firefox, we should probably use a more stable indicator for update channel. The update system uses <a href=\"http://searchfox.org/mozilla-central/source/toolkit/modules/UpdateUtils.jsm\" rel=\"nofollow\">UpdateUtils.jsm</a> to get the update channel. However, this adds a bunch of extra modifiers to the channel. We should take this into account when figuring out how to write filters with this value:</p>\n<ul>\n<li>Should we add some transforms to compare the base channel?</li>\n<li>Should we manually remove the extra annotations and expose that as the channel value?</li>\n</ul>\n<p><a class=\"user-mention\" href=\"https://github.com/mossop\">@Mossop</a> <a class=\"user-mention\" href=\"https://github.com/gijsk\">@gijsk</a> Can one of you double-check my thinking on this?</p>", "id": 248109213, "title": "Use UpdateUtils.jsm to determine update channel", "comments": 2, "state": "closed", "body": "Currently, we use `Services.appinfo.defaultUpdateChannel` to determine the update channel used in filtering. However, this value changes from `beta` to `release` when the RC builds hit the Beta channel. This bit us by preemptively stopping a preference experiment on Beta.\r\n\r\nGiven that we ship changes to Firefox, we should probably use a more stable indicator for update channel. The update system uses [UpdateUtils.jsm](http://searchfox.org/mozilla-central/source/toolkit/modules/UpdateUtils.jsm) to get the update channel. However, this adds a bunch of extra modifiers to the channel. We should take this into account when figuring out how to write filters with this value:\r\n\r\n- Should we add some transforms to compare the base channel?\r\n- Should we manually remove the extra annotations and expose that as the channel value?\r\n\r\n@Mossop @gijsk Can one of you double-check my thinking on this?", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/957/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/957/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/957/comments", "html_url": "https://github.com/mozilla/normandy/issues/957", "updated_at": "2017-09-25T20:04:09Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/957", "created_at": "2017-08-04T20:27:59Z", "assignees": [{"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}]}