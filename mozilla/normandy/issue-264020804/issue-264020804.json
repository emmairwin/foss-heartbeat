{"body_text": "Currently, when we roll back a defualt-branch pref study, we set the default branch's value to what it was when we started the study. Instead, we should set it to whatever it would be in the current version of Firefox had Shield not intervened.\nFor a concrete example, in Firefox 55, Screenshots was disabled by default. There was a default-branch pref study to enable it. In Firefox 56, Screenshots was enabled by default. The pref study only targeted 55. when a user upgraded from 55 to 56, Shield would unenroll them from the experiment, setting the value of the preference to disabled, since that is what it was before the study began. The correct behavior would be to set to enabled (ie, no change). more details.\nSince the default branch is not persistent, users affected by this bug revert back to the desired behavior after restarting Firefox once.", "labels": [], "number": 1100, "assignee": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-10-16T15:24:32Z", "body_html": "<p>Currently, when we roll back a defualt-branch pref study, we set the default branch's value to what it was when we started the study. Instead, we should set it to whatever it would be in the current version of Firefox had Shield not intervened.</p>\n<p>For a concrete example, in Firefox 55, Screenshots was disabled by default. There was a default-branch pref study to enable it. In Firefox 56, Screenshots was enabled by default. The pref study only targeted 55. when a user upgraded from 55 to 56, Shield would unenroll them from the experiment, setting the value of the preference to disabled, since that is what it was before the study began. The correct behavior would be to set to enabled (ie, no change). <a href=\"https://mail.mozilla.org/pipermail/dev-shield/2017-September/000302.html\" rel=\"nofollow\">more details</a>.</p>\n<p>Since the default branch is not persistent, users affected by this bug revert back to the desired behavior after restarting Firefox once.</p>", "id": 264020804, "title": "When rolling back default-branch pref-studies, roll back to current default", "comments": 0, "state": "closed", "body": "Currently, when we roll back a defualt-branch pref study, we set the default branch's value to what it was when we started the study. Instead, we should set it to whatever it would be in the current version of Firefox had Shield not intervened.\r\n\r\nFor a concrete example, in Firefox 55, Screenshots was disabled by default. There was a default-branch pref study to enable it. In Firefox 56, Screenshots was enabled by default. The pref study only targeted 55. when a user upgraded from 55 to 56, Shield would unenroll them from the experiment, setting the value of the preference to disabled, since that is what it was before the study began. The correct behavior would be to set to enabled (ie, no change). [more details](https://mail.mozilla.org/pipermail/dev-shield/2017-September/000302.html).\r\n\r\nSince the default branch is not persistent, users affected by this bug revert back to the desired behavior after restarting Firefox once.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/1100/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/1100/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/1100/comments", "html_url": "https://github.com/mozilla/normandy/issues/1100", "updated_at": "2018-01-30T17:40:35Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/1100", "created_at": "2017-10-09T20:45:26Z", "assignees": [{"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}]}