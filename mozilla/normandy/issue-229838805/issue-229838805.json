{"body_text": "CC @raymak @MattGrimes : I had to disable Kamyar's add-on bug due to this issue.\nIn JEXL, if you type in foo.bar.baz, and foo.bar is undefined, then the entire expression foo.bar.baz is returned as undefined, which is desired behavior. However, if you type foo.bar['baz'], and foo.bar is undefined, JEXL throws an exception. Instead, we'd like it to return undefined as well.\nWe will commonly run into this with Telemetry filters that use keys that are invalid for dotted-path attributes, like normandy.telemetry.main.environment.addons.activeAddons['{2b10c1c8-a11f-4bad-fe9c-1c11e82cac42}']. See bug 1366125 for an actual example of us running into this in production.\nThis is a bug in JEXL, and I think it's likely that we'll end up forking JEXL to fix this.", "labels": [{"url": "https://api.github.com/repos/mozilla/normandy/labels/bug", "color": "b60205", "default": true, "id": 482996638, "name": "bug"}], "number": 767, "assignee": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2017-06-14T15:13:17Z", "body_html": "<p>CC <a class=\"user-mention\" href=\"https://github.com/raymak\">@raymak</a> <a class=\"user-mention\" href=\"https://github.com/mattgrimes\">@MattGrimes</a> : I had to disable Kamyar's add-on bug due to this issue.</p>\n<p>In JEXL, if you type in <code>foo.bar.baz</code>, and <code>foo.bar</code> is undefined, then the entire expression <code>foo.bar.baz</code> is returned as undefined, which is desired behavior. However, if you type <code>foo.bar['baz']</code>, and <code>foo.bar</code> is undefined, JEXL throws an exception. Instead, we'd like it to return undefined as well.</p>\n<p>We will commonly run into this with Telemetry filters that use keys that are invalid for dotted-path attributes, like <code>normandy.telemetry.main.environment.addons.activeAddons['{2b10c1c8-a11f-4bad-fe9c-1c11e82cac42}']</code>. See <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1366125\" rel=\"nofollow\">bug 1366125</a> for an actual example of us running into this in production.</p>\n<p>This is a bug in JEXL, and I think it's likely that we'll end up forking JEXL to fix this.</p>", "id": 229838805, "title": "Filter Expressions cannot use array syntax on undefined values", "comments": 3, "state": "closed", "body": "CC @raymak @MattGrimes : I had to disable Kamyar's add-on bug due to this issue.\r\n\r\nIn JEXL, if you type in `foo.bar.baz`, and `foo.bar` is undefined, then the entire expression `foo.bar.baz` is returned as undefined, which is desired behavior. However, if you type `foo.bar['baz']`, and `foo.bar` is undefined, JEXL throws an exception. Instead, we'd like it to return undefined as well.\r\n\r\nWe will commonly run into this with Telemetry filters that use keys that are invalid for dotted-path attributes, like `normandy.telemetry.main.environment.addons.activeAddons['{2b10c1c8-a11f-4bad-fe9c-1c11e82cac42}']`. See [bug 1366125](https://bugzilla.mozilla.org/show_bug.cgi?id=1366125) for an actual example of us running into this in production.\r\n\r\nThis is a bug in JEXL, and I think it's likely that we'll end up forking JEXL to fix this.", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/767/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/767/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/767/comments", "html_url": "https://github.com/mozilla/normandy/issues/767", "updated_at": "2018-01-30T17:39:19Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/767", "created_at": "2017-05-19T00:22:51Z", "assignees": [{"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}]}