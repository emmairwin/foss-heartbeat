{"body_text": "The self-repair runner should validate that local storage is reliable, and values stored there actually persist. This is to avoid a problem where storage is not actually resilient for some users (some privacy-focused addons cause this).\nOne way to do this would be to store a counter in localstorage that increments every time the runner starts. Any actions that rely on reading data from localstorage should check this counter and make sure it is at least 2 before proceeding.\nWe probably shouldn't count past 2 here, actually. Values over 2 won't really help us. But we do need more information than a simple boolean, since we need to check that the values persists at least two runs (the first run sets the value, and in the second run the value is persisted).", "labels": [], "number": 279, "assignee": null, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2016-11-11T23:21:42Z", "body_html": "<p>The self-repair runner should validate that local storage is reliable, and values stored there actually persist. This is to avoid a problem where storage is not actually resilient for some users (some privacy-focused addons cause this).</p>\n<p>One way to do this would be to store a counter in localstorage that increments every time the runner starts. Any actions that rely on reading data from localstorage should check this counter and make sure it is at least 2 before proceeding.</p>\n<p>We probably shouldn't count past 2 here, actually. Values over 2 won't really help us. But we do need more information than a simple boolean, since we need to check that the values persists at least two runs (the first run sets the value, and in the second run the value is persisted).</p>", "id": 180104322, "title": "Validate localstorage in self-repair runner", "comments": 3, "state": "closed", "body": "The self-repair runner should validate that local storage is reliable, and values stored there actually persist. This is to avoid a problem where storage is not actually resilient for some users (some privacy-focused addons cause this).\n\nOne way to do this would be to store a counter in localstorage that increments every time the runner starts. Any actions that rely on reading data from localstorage should check this counter and make sure it is at least 2 before proceeding.\n\nWe probably shouldn't count past 2 here, actually. Values over 2 won't really help us. But we do need more information than a simple boolean, since we need to check that the values persists at least two runs (the first run sets the value, and in the second run the value is persisted).\n", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/279/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/279/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/279/comments", "html_url": "https://github.com/mozilla/normandy/issues/279", "updated_at": "2016-11-11T23:21:42Z", "user": {"following_url": "https://api.github.com/users/mythmon/following{/other_user}", "events_url": "https://api.github.com/users/mythmon/events{/privacy}", "organizations_url": "https://api.github.com/users/mythmon/orgs", "url": "https://api.github.com/users/mythmon", "gists_url": "https://api.github.com/users/mythmon/gists{/gist_id}", "html_url": "https://github.com/mythmon", "subscriptions_url": "https://api.github.com/users/mythmon/subscriptions", "avatar_url": "https://avatars3.githubusercontent.com/u/305049?v=4", "repos_url": "https://api.github.com/users/mythmon/repos", "received_events_url": "https://api.github.com/users/mythmon/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/mythmon/starred{/owner}{/repo}", "site_admin": false, "login": "mythmon", "type": "User", "id": 305049, "followers_url": "https://api.github.com/users/mythmon/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/279", "created_at": "2016-09-29T16:51:58Z", "assignees": []}