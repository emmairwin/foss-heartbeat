{"body_text": "Phew. Okay. So, this took way longer than I anticipated.\nThe initial change was easy; add a NoMatch component, display it when other routes don't match. Sure, whatever. The problem was that I wanted to test my route matching.\nI eventually got it working, with the following changes:\n\nMoved the babel-runtime import from self_repair_runner.js to self_repair.js. The former is imported by the tests, which already have a runtime injected into them. The latter is an entry point that isn't in the tests, and without this change, the tests fail due to multiple runtimes being loaded on the same page.\nRemoved the initialState argument from controlStore. This isn't strictly necessary but it was convenient in the middle of my refactoring and I don't see a whole lot of value in passing the initial state in; we're never going to pass another value besides what we always do.\nMoved the root component into a standalone component and moved creation of the store, history, and root component instance into a helper method. This makes setting up tests a lot easier since we can reuse createApp there as well.\n\n@brittanystoroz r? Although I feel like we might be flooding you with review requests. Maybe @mythmon instead?", "labels": [], "number": 178, "assignee": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "repository_url": "https://api.github.com/repos/mozilla/normandy", "closed_at": "2016-06-29T01:48:43Z", "body_html": "<p>Phew. Okay. So, this took way longer than I anticipated.</p>\n<p>The initial change was easy; add a NoMatch component, display it when other routes don't match. Sure, whatever. The problem was that I wanted to test my route matching.</p>\n<p>I eventually got it working, with the following changes:</p>\n<ul>\n<li>Moved the <code>babel-runtime</code> import from <code>self_repair_runner.js</code> to <code>self_repair.js</code>. The former is imported by the tests, which already have a runtime injected into them. The latter is an entry point that isn't in the tests, and without this change, the tests fail due to multiple runtimes being loaded on the same page.</li>\n<li>Removed the <code>initialState</code> argument from <code>controlStore</code>. This isn't strictly necessary but it was convenient in the middle of my refactoring and I don't see a whole lot of value in passing the initial state in; we're never going to pass another value besides what we always do.</li>\n<li>Moved the root component into a standalone component and moved creation of the store, history, and root component instance into a helper method. This makes setting up tests a lot easier since we can reuse <code>createApp</code> there as well.</li>\n</ul>\n<p><a class=\"user-mention\" href=\"https://github.com/brittanystoroz\">@brittanystoroz</a> r? Although I feel like we might be flooding you with review requests. Maybe <a class=\"user-mention\" href=\"https://github.com/mythmon\">@mythmon</a> instead?</p>", "id": 162267523, "title": "Add 404 handler and refactor root component.", "pull_request": {"url": "https://api.github.com/repos/mozilla/normandy/pulls/178", "diff_url": "https://github.com/mozilla/normandy/pull/178.diff", "html_url": "https://github.com/mozilla/normandy/pull/178", "patch_url": "https://github.com/mozilla/normandy/pull/178.patch"}, "comments": 3, "state": "closed", "body": "Phew. Okay. So, this took way longer than I anticipated.\n\nThe initial change was easy; add a NoMatch component, display it when other routes don't match. Sure, whatever. The problem was that I wanted to test my route matching.\n\nI eventually got it working, with the following changes:\n- Moved the `babel-runtime` import from `self_repair_runner.js` to `self_repair.js`. The former is imported by the tests, which already have a runtime injected into them. The latter is an entry point that isn't in the tests, and without this change, the tests fail due to multiple runtimes being loaded on the same page.\n- Removed the `initialState` argument from `controlStore`. This isn't strictly necessary but it was convenient in the middle of my refactoring and I don't see a whole lot of value in passing the initial state in; we're never going to pass another value besides what we always do.\n- Moved the root component into a standalone component and moved creation of the store, history, and root component instance into a helper method. This makes setting up tests a lot easier since we can reuse `createApp` there as well.\n\n@brittanystoroz r? Although I feel like we might be flooding you with review requests. Maybe @mythmon instead?\n", "events_url": "https://api.github.com/repos/mozilla/normandy/issues/178/events", "labels_url": "https://api.github.com/repos/mozilla/normandy/issues/178/labels{/name}", "author_association": "MEMBER", "comments_url": "https://api.github.com/repos/mozilla/normandy/issues/178/comments", "html_url": "https://github.com/mozilla/normandy/pull/178", "updated_at": "2016-06-29T01:48:43Z", "user": {"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}, "milestone": null, "locked": false, "url": "https://api.github.com/repos/mozilla/normandy/issues/178", "created_at": "2016-06-25T06:50:44Z", "assignees": [{"following_url": "https://api.github.com/users/Osmose/following{/other_user}", "events_url": "https://api.github.com/users/Osmose/events{/privacy}", "organizations_url": "https://api.github.com/users/Osmose/orgs", "url": "https://api.github.com/users/Osmose", "gists_url": "https://api.github.com/users/Osmose/gists{/gist_id}", "html_url": "https://github.com/Osmose", "subscriptions_url": "https://api.github.com/users/Osmose/subscriptions", "avatar_url": "https://avatars1.githubusercontent.com/u/193106?v=4", "repos_url": "https://api.github.com/users/Osmose/repos", "received_events_url": "https://api.github.com/users/Osmose/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/Osmose/starred{/owner}{/repo}", "site_admin": false, "login": "Osmose", "type": "User", "id": 193106, "followers_url": "https://api.github.com/users/Osmose/followers"}]}